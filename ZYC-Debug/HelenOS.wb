{"type":"wb","version":2,"source":"file://","elements":[{"type":"rectangle","version":895,"versionNonce":1012946193,"isDeleted":false,"id":"qQbB3RLx9oiGDHmcVhcqq","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":74.66641235351562,"y":-797.0000381469727,"strokeColor":"#000000","backgroundColor":"transparent","width":630.5237295968193,"height":3905,"seed":217874315,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"mNktpybcFM_uP--HOB_QC","type":"arrow"},{"id":"GukZfRZBXgpQkqXK4f8oE","type":"arrow"},{"id":"M-_4OBNci4aqK1RgrfJxv","type":"arrow"},{"id":"-sbT3DNoVD1DG2pKtOOH0","type":"arrow"},{"id":"zDsyagdpVAF8_jKYuodDL","type":"arrow"},{"id":"Awebk3ydC8kEjT1MXi3AP","type":"arrow"},{"id":"02kiu_tjXeSq8NeYxJliM","type":"arrow"},{"id":"638y-rkjKlY6a7JZ6pJLv","type":"arrow"},{"id":"HbgvjoWclp7_vD1YwmAjY","type":"arrow"},{"id":"ghhCjRr9n7fLtt1rhA8ig","type":"arrow"},{"id":"Tl47XxD1JXOq3wnVrtfa4","type":"arrow"},{"id":"OzSvIGjQidjgQX2K9_Znk","type":"arrow"},{"id":"Skr-xEQJPjthQBqlOwPA2","type":"arrow"},{"id":"Gy6ib-fNaKLD806gkMSXI","type":"arrow"},{"id":"hpHqGj5XELoEUNQ24y_jU","type":"arrow"},{"id":"4OvbJzDAt8EJTUUcGDu5p","type":"arrow"},{"id":"wetZLkSkEwOtJ_Ccbs6cA","type":"arrow"},{"id":"dPddR7B0MvjbzQIIdft6t","type":"arrow"},{"id":"i5h33vcTF-RtU-TIHDsD2","type":"arrow"},{"id":"ao8lpJ7a3JT-UCmvxz2Q9","type":"arrow"},{"id":"OSJRxE0NLq2M83H-EK6k2","type":"arrow"},{"id":"Ezt2hTsbVZB3w3A1Csj8J","type":"arrow"},{"id":"1AHAYZCTl6MmPPDC7Hy2E","type":"arrow"}],"updated":1741338914513,"link":null},{"type":"arrow","version":211,"versionNonce":2017984639,"isDeleted":false,"id":"mNktpybcFM_uP--HOB_QC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":716.6506987072173,"y":3102.756551755042,"strokeColor":"#000000","backgroundColor":"transparent","width":407.7777099609375,"height":4.7989800646191725,"seed":256074629,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":11.460556756882397,"focus":0.9948170383599821},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[407.7777099609375,4.7989800646191725]]},{"type":"text","version":76,"versionNonce":278235889,"isDeleted":false,"id":"pUFR_ay4qBDTw5Dx6L9ks","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1141.7619047619048,"y":3099.888956705729,"strokeColor":"#000000","backgroundColor":"transparent","width":276,"height":25,"seed":1111503563,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000 0000 0000 0000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000 0000 0000 0000"},{"type":"arrow","version":141,"versionNonce":361863327,"isDeleted":false,"id":"GukZfRZBXgpQkqXK4f8oE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":723.9841948009673,"y":-795.5630319256882,"strokeColor":"#000000","backgroundColor":"transparent","width":250,"height":2.2147288978806046,"seed":256113925,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":18.794052850632397,"focus":-0.9963206722514236},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[250,-2.2147288978806046]]},{"type":"text","version":62,"versionNonce":2020148433,"isDeleted":false,"id":"nK_Mubw1gjrH7U1SfbnBX","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":991.7619047619048,"y":-814.5555216471365,"strokeColor":"#000000","backgroundColor":"transparent","width":239,"height":51,"seed":377484837,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0xFFFF FFFF FFFF FFFF\n","baseline":43,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xFFFF FFFF FFFF FFFF\n"},{"type":"arrow","version":196,"versionNonce":1647520959,"isDeleted":false,"id":"M-_4OBNci4aqK1RgrfJxv","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":711.9285714285718,"y":2999.8699008425906,"strokeColor":"#000000","backgroundColor":"transparent","width":404.7619628906252,"height":5.630128221767791,"seed":2019651083,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":6.738429478236981,"focus":0.9415369247951652},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[404.7619628906252,5.630128221767791]]},{"type":"text","version":56,"versionNonce":1869759153,"isDeleted":false,"id":"5EIGgt9sNSVpQ6xN40zyi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1146.3333623976937,"y":2998.4761904761885,"strokeColor":"#000000","backgroundColor":"transparent","width":268,"height":25,"seed":488162405,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000 0000 0010 80e8","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000 0000 0010 80e8"},{"type":"text","version":53,"versionNonce":701316319,"isDeleted":false,"id":"M_T4PtZvWInQf5kqknXRV","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1434.9047909691226,"y":2994.6666811988443,"strokeColor":"#000000","backgroundColor":"transparent","width":162,"height":25,"seed":7223595,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"unmapped_start","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"unmapped_start"},{"type":"arrow","version":253,"versionNonce":307807377,"isDeleted":false,"id":"-sbT3DNoVD1DG2pKtOOH0","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":708.8728971935457,"y":2796.761361418744,"strokeColor":"#000000","backgroundColor":"transparent","width":400,"height":4.603749432723816,"seed":2019045547,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":3.6827552432107495,"focus":0.8384120744111291},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[400,4.603749432723816]]},{"type":"text","version":88,"versionNonce":1878018303,"isDeleted":false,"id":"wGwMPyGafyiIv-ExQbR4o","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1128.2379499162948,"y":2784.6666666666647,"strokeColor":"#000000","backgroundColor":"transparent","width":259,"height":25,"seed":742127467,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000 0000 0011 4000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000 0000 0011 4000"},{"type":"text","version":113,"versionNonce":2094271089,"isDeleted":false,"id":"hWdRguflluvsgANaBWIKE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1429.3493710472474,"y":2782.444478352863,"strokeColor":"#000000","backgroundColor":"transparent","width":138,"height":25,"seed":1416389349,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"unmapped_end","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"unmapped_end"},{"type":"arrow","version":328,"versionNonce":1914491167,"isDeleted":false,"id":"zDsyagdpVAF8_jKYuodDL","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":712.4047619047624,"y":2857.653064165045,"strokeColor":"#000000","backgroundColor":"transparent","width":1066.8334350585938,"height":8.684169605414354,"seed":201494251,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":7.214619954427576,"focus":0.8705700554809708},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1066.8334350585938,8.684169605414354]]},{"type":"text","version":35,"versionNonce":1739297873,"isDeleted":false,"id":"9QQnU0OFGCARjcrD20ZXK","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1795.7381969633561,"y":2836.3928571428555,"strokeColor":"#000000","backgroundColor":"transparent","width":238,"height":25,"seed":406330853,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000000000109080","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000000000109080"},{"type":"text","version":37,"versionNonce":1774409023,"isDeleted":false,"id":"20znHZGYVnnHumfhVE2ET","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1797.4047619047624,"y":2866.3928571428555,"strokeColor":"#000000","backgroundColor":"transparent","width":237,"height":25,"seed":673940325,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000000000109086","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000000000109086"},{"type":"text","version":48,"versionNonce":112648753,"isDeleted":false,"id":"31rMRD-tJLu8pQiTUaQ29","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1798.2381969633561,"y":2894.726215907504,"strokeColor":"#000000","backgroundColor":"transparent","width":234,"height":25,"seed":303279653,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x000000000010908c","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x000000000010908c"},{"type":"text","version":76,"versionNonce":239359327,"isDeleted":false,"id":"3xY7x_SGbBGKAo7aQDcwa","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1798.2380443754655,"y":2925.559498378207,"strokeColor":"#000000","backgroundColor":"transparent","width":235,"height":25,"seed":644101739,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000000000109090","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000000000109090"},{"type":"text","version":35,"versionNonce":652047377,"isDeleted":false,"id":"HrBN4UNWGAPdoD9nIaAwR","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2058.238196963356,"y":2827.226215907504,"strokeColor":"#000000","backgroundColor":"transparent","width":151,"height":25,"seed":466769125,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"bootstrap_idtr","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"bootstrap_idtr"},{"type":"text","version":35,"versionNonce":1458590079,"isDeleted":false,"id":"-04VzwmSdeYvoRJ-Vy-mn","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2059.9047619047624,"y":2861.3928571428555,"strokeColor":"#000000","backgroundColor":"transparent","width":156,"height":25,"seed":1817452453,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"bootstrap_gdtr","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"bootstrap_gdtr"},{"type":"text","version":35,"versionNonce":202820081,"isDeleted":false,"id":"mjWiUBNhRTi059iKuNDp8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2059.9047619047624,"y":2893.0595365251797,"strokeColor":"#000000","backgroundColor":"transparent","width":142,"height":25,"seed":1030896229,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"multiboot_eax","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"multiboot_eax"},{"type":"text","version":35,"versionNonce":2097662367,"isDeleted":false,"id":"pfyewwUGGk_mawPNNEJFu","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2062.4047619047624,"y":2926.3928571428555,"strokeColor":"#000000","backgroundColor":"transparent","width":138,"height":25,"seed":811115813,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"multiboot_ebx","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"multiboot_ebx"},{"type":"text","version":59,"versionNonce":258630609,"isDeleted":false,"id":"zVHlBphBab9Ss0N2Qnqrq","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1800.2739257812505,"y":2957.3453252883182,"strokeColor":"#000000","backgroundColor":"transparent","width":228,"height":25,"seed":187916261,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000000000109213","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000000000109213"},{"type":"text","version":35,"versionNonce":1035681215,"isDeleted":false,"id":"skHz-LDhH2pDJdbOJZKXP","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2059.3214285714294,"y":2956.392915271577,"strokeColor":"#000000","backgroundColor":"transparent","width":187,"height":25,"seed":544116357,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"unmapped_ap_gdtr","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"unmapped_ap_gdtr"},{"type":"arrow","version":236,"versionNonce":2096087473,"isDeleted":false,"id":"Awebk3ydC8kEjT1MXi3AP","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":60.98797680082862,"y":2888.969651680517,"strokeColor":"#000000","backgroundColor":"transparent","width":716,"height":4.399446801160593,"seed":1720427909,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":13.678435552687006,"focus":-0.8871939269420895},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-716,4.399446801160593]]},{"type":"text","version":94,"versionNonce":1546333663,"isDeleted":false,"id":"QHpn75RHu2TeoA0zmRYGh","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-912.5120282854346,"y":2888.59128679548,"strokeColor":"#000000","backgroundColor":"transparent","width":236,"height":25,"seed":662379173,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000000000109000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000000000109000"},{"type":"text","version":88,"versionNonce":835609489,"isDeleted":false,"id":"M14MAUp-ZMwl_6SGwN0-b","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1171.9564557756687,"y":2880.8136276971723,"strokeColor":"#000000","backgroundColor":"transparent","width":190,"height":25,"seed":1051336741,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"unmapped_ap_boot","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"unmapped_ap_boot"},{"type":"arrow","version":308,"versionNonce":1667766783,"isDeleted":false,"id":"02kiu_tjXeSq8NeYxJliM","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":61.32122875395356,"y":2942.2681480525675,"strokeColor":"#000000","backgroundColor":"transparent","width":697.7777099609375,"height":0.6009504291100711,"seed":794523461,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":13.345183599562006,"focus":-0.9161542958432544},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-697.7777099609375,0.6009504291100711]]},{"type":"text","version":198,"versionNonce":2050869617,"isDeleted":false,"id":"i7Rj9qYUhJxfC1kl4E-jl","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1197.567689804803,"y":2934.4246709914423,"strokeColor":"#000000","backgroundColor":"transparent","width":244,"height":25,"seed":625835941,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"multiboot2_image_start","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"multiboot2_image_start"},{"type":"text","version":169,"versionNonce":678593055,"isDeleted":false,"id":"FeP0H4vGBLvkwpA4dViLF","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-899.2341403052912,"y":2938.8690476190473,"strokeColor":"#000000","backgroundColor":"transparent","width":230,"height":25,"seed":1991580619,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000000000108178","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000000000108178"},{"type":"text","version":120,"versionNonce":797274961,"isDeleted":false,"id":"JukkGvIYMPpijafuH8AKN","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-750.4619615342856,"y":3300.948548332093,"strokeColor":"#000000","backgroundColor":"transparent","width":869,"height":25,"seed":1294564965,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"unmapped_start = BOOT_OFFSET + SIZEOF_HEADERS = 0x0000 0000 0010 80e8","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"unmapped_start = BOOT_OFFSET + SIZEOF_HEADERS = 0x0000 0000 0010 80e8"},{"type":"text","version":53,"versionNonce":205186623,"isDeleted":false,"id":"wEM0lqO1gfk-pHt0ahnw8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-753.099516369044,"y":3343.8351201309256,"strokeColor":"#000000","backgroundColor":"transparent","width":319,"height":25,"seed":1010112453,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"BOOT_OFFSET   =  0x108000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"BOOT_OFFSET   =  0x108000"},{"type":"text","version":43,"versionNonce":368894257,"isDeleted":false,"id":"ky2usPmODclo5oHIoaw1L","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-754.2105596633148,"y":3386.057308444728,"strokeColor":"#000000","backgroundColor":"transparent","width":361,"height":25,"seed":1440616933,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"AP_BOOT_OFFSET  =  0x008000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"AP_BOOT_OFFSET  =  0x008000"},{"type":"text","version":66,"versionNonce":2107754079,"isDeleted":false,"id":"JmtmuJfk9l0IonwxeDHQ8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-749.7661830357106,"y":3433.8351201309256,"strokeColor":"#000000","backgroundColor":"transparent","width":246,"height":51,"seed":1680328869,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"SIZE_HEADERS = 0Xe8\n","baseline":43,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"SIZE_HEADERS = 0Xe8\n"},{"type":"text","version":47,"versionNonce":2064356113,"isDeleted":false,"id":"n0-KqUeJ_Le5Zd_-c3s8F","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-755.3217046828461,"y":3471.6129318171234,"strokeColor":"#000000","backgroundColor":"transparent","width":714,"height":25,"seed":453676235,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"ap_boot = unmapped_ap_boot - 0x108000 + 0x008000 = 0x009000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ap_boot = unmapped_ap_boot - 0x108000 + 0x008000 = 0x009000"},{"type":"text","version":60,"versionNonce":997696127,"isDeleted":false,"id":"P4_cCkbTQIBivMlFo7Sl2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-754.2106105259447,"y":3507.1683517389984,"strokeColor":"#000000","backgroundColor":"transparent","width":712,"height":25,"seed":589212267,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"ap_gdtr = unmapped_ap_gdtr - 0x108000 + 0x008000 = 0x009213 ","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ap_gdtr = unmapped_ap_gdtr - 0x108000 + 0x008000 = 0x009213 "},{"type":"arrow","version":116,"versionNonce":321456369,"isDeleted":false,"id":"638y-rkjKlY6a7JZ6pJLv","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":72.45580182757197,"y":3079.3172442996038,"strokeColor":"#000000","backgroundColor":"transparent","width":124.44437662760419,"height":2.406527361278677,"seed":2106338667,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":2.2106105259435935,"focus":-0.9804563746785065},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-124.44437662760419,2.406527361278677]]},{"type":"text","version":81,"versionNonce":1451031199,"isDeleted":false,"id":"JjUL2r81sQzSTnsgEzqw3","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-181.9885748000322,"y":3072.7237716608824,"strokeColor":"#000000","backgroundColor":"transparent","width":110,"height":25,"seed":1898454021,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x008000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x008000"},{"type":"text","version":100,"versionNonce":400343761,"isDeleted":false,"id":"0RGTspIE8ygiTyyag-bo5","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-420.87753150576145,"y":3071.612626641351,"strokeColor":"#000000","backgroundColor":"transparent","width":199,"height":25,"seed":1471583301,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"AP_BOOT_OFFSET","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"AP_BOOT_OFFSET"},{"type":"arrow","version":210,"versionNonce":1935822527,"isDeleted":false,"id":"HbgvjoWclp7_vD1YwmAjY","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":68.01127261207648,"y":2814.3239121498173,"strokeColor":"#000000","backgroundColor":"transparent","width":708.8888549804689,"height":7.399757785806287,"seed":1973040875,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":6.655139741439143,"focus":-0.8477016635601716},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-708.8888549804689,7.399757785806287]]},{"type":"text","version":45,"versionNonce":633225393,"isDeleted":false,"id":"xJPfTV59w6cRYTSlFeNRs","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-895.3220098586266,"y":2809.3903366022905,"strokeColor":"#000000","backgroundColor":"transparent","width":229,"height":25,"seed":1186789669,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"0x0000000000113000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000000000113000"},{"type":"text","version":87,"versionNonce":1288183519,"isDeleted":false,"id":"nTnhvF4KEpA0iSXJw8ifC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-997.5441981724287,"y":2809.39028573966,"strokeColor":"#000000","backgroundColor":"transparent","width":58,"height":25,"seed":731034597,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":20,"fontFamily":1,"text":"ptl_0","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ptl_0"},{"type":"line","version":655,"versionNonce":1517617809,"isDeleted":false,"id":"6v5JZ-RbWSrN9-cUVSe3i","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-2014.2109157017258,"y":2748.390362033605,"strokeColor":"#000000","backgroundColor":"transparent","width":4900.555521647136,"height":4.444440205891624,"seed":1797144779,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[4900.555521647136,4.444440205891624]]},{"type":"text","version":109,"versionNonce":1967057663,"isDeleted":false,"id":"DEVrhW8rufLMdn2nzhXPy","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1999.7666662306965,"y":2782.112474053462,"strokeColor":"#000000","backgroundColor":"transparent","width":671,"height":51,"seed":1487522405,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":"这里是低地址的数据，也就是ummapped段","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"这里是低地址的数据，也就是ummapped段"},{"type":"line","version":171,"versionNonce":850954353,"isDeleted":false,"id":"tzK_Kek4tFR1cMLi6rwUo","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1918.0996435256184,"y":1137.4463160130972,"strokeColor":"#000000","backgroundColor":"transparent","width":5073.333740234375,"height":0,"seed":1898755557,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[5073.333740234375,0]]},{"type":"text","version":60,"versionNonce":1497838367,"isDeleted":false,"id":"Qjmh3-tudNh0zmYIH5pA0","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3206.066870553158,"y":1118.1128809545035,"strokeColor":"#000000","backgroundColor":"transparent","width":441,"height":45,"seed":1965200837,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffff ffff 8000 0000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffff ffff 8000 0000"},{"type":"text","version":72,"versionNonce":676352593,"isDeleted":false,"id":"pHUKGj6uVg8N1CYX4Hg1L","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2924.400076729916,"y":2728.1128809545035,"strokeColor":"#000000","backgroundColor":"transparent","width":482,"height":45,"seed":376914021,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":"0x0000 0000 0012 0000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x0000 0000 0012 0000"},{"type":"text","version":149,"versionNonce":22116159,"isDeleted":false,"id":"i3bE44jVc3etjx7eq6Z1q","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1214.4000767299158,"y":1456.4461634252066,"strokeColor":"#000000","backgroundColor":"transparent","width":1044,"height":97,"seed":846104229,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":"这部分地址空间相当大，但是我们不关心。。。。所以画的比较小\n","baseline":83,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"这部分地址空间相当大，但是我们不关心。。。。所以画的比较小\n"},{"type":"line","version":141,"versionNonce":269738033,"isDeleted":false,"id":"I40RZsxzE5QYrnR39V389","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":72.89960370745484,"y":625.9461367223257,"strokeColor":"#000000","backgroundColor":"transparent","width":628.3334350585938,"height":8.333282470703125,"seed":24940811,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[628.3334350585938,-8.333282470703125]]},{"type":"text","version":46,"versionNonce":331233119,"isDeleted":false,"id":"T-e7dVEJm_gmyB1sJIL1o","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":212.89960370745484,"y":729.9461367223257,"strokeColor":"#000000","backgroundColor":"transparent","width":145,"height":51,"seed":1675601445,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":".text 段","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".text 段"},{"type":"line","version":150,"versionNonce":938127889,"isDeleted":false,"id":"WUMI6eITa2NC2CjXkdHzi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":81.23296247210328,"y":394.27941919302884,"strokeColor":"#000000","backgroundColor":"transparent","width":621.6666412353516,"height":11.666641235351562,"seed":535523621,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[621.6666412353516,-11.666641235351562]]},{"type":"text","version":37,"versionNonce":383644543,"isDeleted":false,"id":"8463kAvwhPe1gbhsCPdms","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":197.89960370745484,"y":546.6127779576773,"strokeColor":"#000000","backgroundColor":"transparent","width":261,"height":45,"seed":1218940651,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":".eh_frame_hdr","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".eh_frame_hdr"},{"type":"text","version":55,"versionNonce":1154238449,"isDeleted":false,"id":"5MKAETPBAPFGc9_hnvzvd","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":197.89960370745484,"y":484.9461367223257,"strokeColor":"#000000","backgroundColor":"transparent","width":178,"height":45,"seed":1345704805,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":".eh_frame","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".eh_frame"},{"type":"line","version":171,"versionNonce":1928407967,"isDeleted":false,"id":"-44JrpZsLGUiG5hBGEOMe","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":69.56624494280635,"y":-259.0539395716196,"strokeColor":"#000000","backgroundColor":"transparent","width":631.6666412353516,"height":8.333358764648438,"seed":719487883,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[631.6666412353516,-8.333358764648438]]},{"type":"text","version":50,"versionNonce":1354768849,"isDeleted":false,"id":"mYqEDqdog-QT2Ntc3jE7K","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":229.56632123675172,"y":311.6127779576773,"strokeColor":"#000000","backgroundColor":"transparent","width":135,"height":45,"seed":530489797,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":".rodata","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".rodata"},{"type":"line","version":212,"versionNonce":875061183,"isDeleted":false,"id":"rmutiHXueAelblAWRxcck","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":78.56633649554072,"y":208.27941919302884,"strokeColor":"#000000","backgroundColor":"transparent","width":628.3333587646484,"height":11.666641235351562,"seed":1680688971,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[628.3333587646484,-11.666641235351562]]},{"type":"text","version":80,"versionNonce":1222492081,"isDeleted":false,"id":"H7buzqN1YyW5kCxhX-sty","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":288.8996647426111,"y":110.94613672232572,"strokeColor":"#000000","backgroundColor":"transparent","width":100,"height":45,"seed":2044885285,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914513,"link":null,"fontSize":36,"fontFamily":1,"text":".data","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".data"},{"type":"line","version":156,"versionNonce":212078559,"isDeleted":false,"id":"8tqxylcnpsOJQh27I2bQe","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":81.23296247210328,"y":63.61273218131009,"strokeColor":"#000000","backgroundColor":"transparent","width":618.3333587646484,"height":6.6666412353515625,"seed":76510693,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914513,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[618.3333587646484,-6.6666412353515625]]},{"type":"text","version":34,"versionNonce":189571473,"isDeleted":false,"id":"SdQy1U4cHxAD8pV6R6q0Z","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":271.2330387660486,"y":-101.72058080697116,"strokeColor":"#000000","backgroundColor":"transparent","width":68,"height":45,"seed":569440427,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":".bss","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".bss"},{"type":"arrow","version":130,"versionNonce":376749055,"isDeleted":false,"id":"ghhCjRr9n7fLtt1rhA8ig","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":707.8996037074548,"y":610.787641670695,"strokeColor":"#000000","backgroundColor":"transparent","width":448.33343505859375,"height":5.158495051630666,"seed":100993387,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":2.709461757119925,"focus":-0.2798440884261464},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[448.33343505859375,5.158495051630666]]},{"type":"text","version":41,"versionNonce":1162102641,"isDeleted":false,"id":"p3tQqABlbMElmHzWcFySy","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1189.5663212367517,"y":596.6127779576773,"strokeColor":"#000000","backgroundColor":"transparent","width":362,"height":45,"seed":218098437,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff801539f8","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff801539f8"},{"type":"text","version":67,"versionNonce":1436214303,"isDeleted":false,"id":"79OhEs3nNARC-kXhLf1Xl","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1599.566168648861,"y":589.9460604283804,"strokeColor":"#000000","backgroundColor":"transparent","width":186,"height":45,"seed":23768517,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"ktext_end","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ktext_end"},{"type":"arrow","version":148,"versionNonce":286011729,"isDeleted":false,"id":"Tl47XxD1JXOq3wnVrtfa4","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":711.2330387660486,"y":372.89435460785273,"strokeColor":"#000000","backgroundColor":"transparent","width":445,"height":6.38506458517611,"seed":1138936843,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":6.042896815713675,"focus":-0.40184407479369283},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[445,6.38506458517611]]},{"type":"text","version":46,"versionNonce":2047281215,"isDeleted":false,"id":"qFb14JZOWsCFJKAde66Vw","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1182.8996037074548,"y":358.27941919302884,"strokeColor":"#000000","backgroundColor":"transparent","width":362,"height":45,"seed":1291989189,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff8015f058","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff8015f058"},{"type":"text","version":39,"versionNonce":1409015601,"isDeleted":false,"id":"vEa6DrGE3z5uyTWDRSz8w","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1587.8996037074548,"y":351.6127779576773,"strokeColor":"#000000","backgroundColor":"transparent","width":254,"height":45,"seed":2100009765,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"eh_frame_end","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"eh_frame_end"},{"type":"arrow","version":142,"versionNonce":1637460063,"isDeleted":false,"id":"OzSvIGjQidjgQX2K9_Znk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":66.23296247210322,"y":371.5623928413886,"strokeColor":"#000000","backgroundColor":"transparent","width":321.66664123535156,"height":6.05038511628868,"seed":140045003,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":8.433449881412344,"focus":0.40299124673913356},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-321.66664123535156,6.05038511628868]]},{"type":"text","version":58,"versionNonce":1551552785,"isDeleted":false,"id":"k6JZ09hfcwnB2kFMV28sb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-647.1004344395178,"y":348.27949548697416,"strokeColor":"#000000","backgroundColor":"transparent","width":370,"height":45,"seed":837556197,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80160000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80160000"},{"type":"text","version":45,"versionNonce":1512260735,"isDeleted":false,"id":"_PJxkDB9z1DBZPxWYRam7","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-945.4337169102209,"y":349.9461367223257,"strokeColor":"#000000","backgroundColor":"transparent","width":237,"height":45,"seed":1802389125,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"kdata_start","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"kdata_start"},{"type":"arrow","version":225,"versionNonce":1073776369,"isDeleted":false,"id":"Skr-xEQJPjthQBqlOwPA2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":57.8997181483727,"y":-259.0853481451204,"strokeColor":"#000000","backgroundColor":"transparent","width":383.33343505859364,"height":0.8911524050018897,"seed":1415959883,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":0.7232056993238217,"gap":16.766694205142926},"endBinding":{"elementId":"GotOBWlk3Vh4CLp-S1cng","focus":-0.95371077599048,"gap":12.33343505859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-383.33343505859364,0.8911524050018897]]},{"type":"text","version":80,"versionNonce":593779871,"isDeleted":false,"id":"GotOBWlk3Vh4CLp-S1cng","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-698.7671519688147,"y":-258.3872220423227,"strokeColor":"#000000","backgroundColor":"transparent","width":361,"height":45,"seed":988757771,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"Skr-xEQJPjthQBqlOwPA2","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff801aaf29","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff801aaf29"},{"type":"text","version":70,"versionNonce":2031386833,"isDeleted":false,"id":"gaoSXvIdzwm2DIhViAojE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-918.7669230869787,"y":-266.72050451302584,"strokeColor":"#000000","backgroundColor":"transparent","width":194,"height":45,"seed":773551717,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"kdata_end","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"kdata_end"},{"type":"text","version":68,"versionNonce":822964415,"isDeleted":false,"id":"40lzBoFx2_JMsJ6fvVAuz","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-760.766584850488,"y":3557.279730726639,"strokeColor":"#000000","backgroundColor":"transparent","width":983,"height":25,"seed":181658683,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":20,"fontFamily":1,"text":"START_STACK = (BOOT_OFFSET - BOOT_STACK_SIZE)  = 0X108000 - 0X400 = 0x10 7C00 ","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"START_STACK = (BOOT_OFFSET - BOOT_STACK_SIZE)  = 0X108000 - 0X400 = 0x10 7C00 "},{"type":"arrow","version":193,"versionNonce":1162755761,"isDeleted":false,"id":"Gy6ib-fNaKLD806gkMSXI","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":73.66641235351558,"y":3026.246996539165,"strokeColor":"#000000","backgroundColor":"transparent","width":122.4328751336911,"height":5.032612117161534,"seed":1832209845,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","gap":1,"focus":-0.9465180992981401},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-122.4328751336911,5.032612117161534]]},{"type":"text","version":61,"versionNonce":750715103,"isDeleted":false,"id":"5F67SyD9bWoQlewgFjA7E","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-184.76646278017552,"y":3019.612921644608,"strokeColor":"#000000","backgroundColor":"transparent","width":102,"height":25,"seed":1149409781,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":20,"fontFamily":1,"text":"0x108000","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x108000"},{"type":"text","version":53,"versionNonce":1129660561,"isDeleted":false,"id":"5bkaqb4x79wg8Dw700ELF","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-384.76652381533177,"y":3026.2796086563267,"strokeColor":"#000000","backgroundColor":"transparent","width":156,"height":25,"seed":1218141461,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":20,"fontFamily":1,"text":"BOOT_OFFSET","baseline":18,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"BOOT_OFFSET"},{"type":"text","version":205,"versionNonce":940150015,"isDeleted":false,"id":"ef5ecq8U2eYeENPtuLz9u","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-2011.0050085158525,"y":4372.128919273923,"strokeColor":"#000000","backgroundColor":"transparent","width":280.40743933783585,"height":111.66667938232393,"seed":1158214485,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":89.33334350585915,"fontFamily":1,"text":"GDT :","baseline":77.66667938232393,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"GDT :"},{"type":"arrow","version":207,"versionNonce":1356924529,"isDeleted":false,"id":"hpHqGj5XELoEUNQ24y_jU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":68.87343633742421,"y":-63.22209676106877,"strokeColor":"#000000","backgroundColor":"transparent","width":603.2221374511719,"height":19.171347134514818,"seed":2138890041,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":0.6261979434919518,"gap":5.792976016091416},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-603.2221374511719,19.171347134514818]]},{"type":"text","version":159,"versionNonce":1852675359,"isDeleted":false,"id":"SNzSxMeVxOzLqBV659Lhm","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-865.237693423318,"y":-68.1109975179047,"strokeColor":"#000000","backgroundColor":"transparent","width":306,"height":45,"seed":1519228663,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"bootstrap_stack","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"bootstrap_stack"},{"type":"text","version":169,"versionNonce":683216977,"isDeleted":false,"id":"9Cd--SVK34Tdxb3sp2wPk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-640.4598461332789,"y":3.777857462564043,"strokeColor":"#000000","backgroundColor":"transparent","width":366,"height":45,"seed":1235144759,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff8016a640","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff8016a640"},{"type":"arrow","version":197,"versionNonce":660314431,"isDeleted":false,"id":"ctObaBztS7UBwBLfGTyEf","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":75.54015386672114,"y":-49.052030030082065,"strokeColor":"#000000","backgroundColor":"transparent","width":324.11626840011087,"height":83.96313318115706,"seed":1280214871,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-324.11626840011087,83.96313318115706]]},{"type":"text","version":332,"versionNonce":1085595185,"isDeleted":false,"id":"6oyV8KdU3BAlkt8pNMz9J","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1158.7932964506617,"y":-10.72209676106877,"strokeColor":"#000000","backgroundColor":"transparent","width":466,"height":51,"seed":241431321,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"vs6jVc4vp3Sude2u-8HIE","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"bootstrap_stack_top指针","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"bootstrap_stack_top指针"},{"type":"arrow","version":503,"versionNonce":2016680287,"isDeleted":false,"id":"vs6jVc4vp3Sude2u-8HIE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1173.2824819729206,"y":-14.602974765982907,"strokeColor":"#000000","backgroundColor":"transparent","width":64.93619144137551,"height":165.95245024215617,"seed":1438812567,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"6oyV8KdU3BAlkt8pNMz9J","focus":-0.9719155391690332,"gap":14.999923706054688},"endBinding":{"elementId":"hATfGdK7b8kvjxUsDonTv","focus":-0.2499800896534187,"gap":6.666717529296875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-64.93619144137551,-165.95245024215617]]},{"type":"text","version":175,"versionNonce":1740369937,"isDeleted":false,"id":"hATfGdK7b8kvjxUsDonTv","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1655.7932048979274,"y":-238.22214253743596,"strokeColor":"#000000","backgroundColor":"transparent","width":644,"height":51,"seed":625591385,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"IgPVeA3yUiwWxfqYmj-yj","type":"arrow"},{"id":"vs6jVc4vp3Sude2u-8HIE","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"指向bootstrap_stack+STACK_SIZE","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"指向bootstrap_stack+STACK_SIZE"},{"type":"arrow","version":75,"versionNonce":1984402815,"isDeleted":false,"id":"IgPVeA3yUiwWxfqYmj-yj","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1116.2808147277615,"y":-253.88878377278752,"strokeColor":"#000000","backgroundColor":"transparent","width":17.15425106518569,"height":116.66664123535156,"seed":1203894551,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"hATfGdK7b8kvjxUsDonTv","focus":0.6491473909414281,"gap":15.666641235351562},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[17.15425106518569,-116.66664123535156]]},{"type":"text","version":37,"versionNonce":600163825,"isDeleted":false,"id":"GLZ7TGx7rgbogY6MmvZUO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1189.1265636625758,"y":-433.22214253743596,"strokeColor":"#000000","backgroundColor":"transparent","width":146,"height":45,"seed":231716313,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0x2000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x2000"},{"type":"arrow","version":116,"versionNonce":953585055,"isDeleted":false,"id":"OSJRxE0NLq2M83H-EK6k2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":714.2069324311742,"y":-100.5554555257172,"strokeColor":"#000000","backgroundColor":"transparent","width":185,"height":15,"seed":373857463,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":-0.6217007832283516,"gap":9.01679048083929},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[185,-15]]},{"type":"text","version":143,"versionNonce":1339678673,"isDeleted":false,"id":"pmpPvNz04qlK9hIaIV_ro","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":933.2069324311742,"y":-134.88884480794377,"strokeColor":"#000000","backgroundColor":"transparent","width":376,"height":45,"seed":858274521,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80182000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80182000"},{"type":"arrow","version":135,"versionNonce":454132159,"isDeleted":false,"id":"4OvbJzDAt8EJTUUcGDu5p","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":705.8734363374242,"y":-193.88878377278752,"strokeColor":"#000000","backgroundColor":"transparent","width":201.6668701171875,"height":40,"seed":126981849,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":-0.638561819921457,"gap":1},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[201.6668701171875,-40]]},{"type":"text","version":32,"versionNonce":2047851953,"isDeleted":false,"id":"IP9gfRCtwWLJaE_WgAnF5","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":925.8734363374242,"y":-259.8887837727875,"strokeColor":"#000000","backgroundColor":"transparent","width":374,"height":45,"seed":1632602647,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80182060","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80182060"},{"type":"text","version":32,"versionNonce":1041822175,"isDeleted":false,"id":"bbfib0wUp6_Oo9bTovXHh","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1339.206871396018,"y":-269.8887837727875,"strokeColor":"#000000","backgroundColor":"transparent","width":54,"height":45,"seed":2103914583,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"init","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"init"},{"type":"text","version":57,"versionNonce":26140561,"isDeleted":false,"id":"Ksi7RHAF0Ss8XOIL_qRYC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":925.8734363374242,"y":-214.88878377278752,"strokeColor":"#000000","backgroundColor":"transparent","width":373,"height":45,"seed":1677346455,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80182050","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80182050"},{"type":"arrow","version":97,"versionNonce":1258118655,"isDeleted":false,"id":"wetZLkSkEwOtJ_Ccbs6cA","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":709.206871396018,"y":-183.88878377278752,"strokeColor":"#000000","backgroundColor":"transparent","width":198.33343505859375,"height":20,"seed":2100610425,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":-0.6587705825708209,"gap":4.0167294456830405},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[198.33343505859375,-20]]},{"type":"text","version":37,"versionNonce":1955513713,"isDeleted":false,"id":"ETKgO34qKTHEjh3kNnk0J","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1332.5403064546117,"y":-218.22214253743596,"strokeColor":"#000000","backgroundColor":"transparent","width":120,"height":45,"seed":145551671,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"ballocs","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ballocs"},{"type":"arrow","version":94,"versionNonce":1958692383,"isDeleted":false,"id":"dPddR7B0MvjbzQIIdft6t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":712.5403064546117,"y":-213.88878377278752,"strokeColor":"#000000","backgroundColor":"transparent","width":188.3331298828125,"height":63.33335876464844,"seed":699223927,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":-0.6125280120405345,"gap":7.3501645042767905},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[188.3331298828125,-63.33335876464844]]},{"type":"text","version":44,"versionNonce":777449297,"isDeleted":false,"id":"ZZQVCkqeQR4fB-UQuVWpK","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":925.8737415132055,"y":-309.8887837727875,"strokeColor":"#000000","backgroundColor":"transparent","width":373,"height":45,"seed":123677847,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80182e80","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80182e80"},{"type":"text","version":53,"versionNonce":978266687,"isDeleted":false,"id":"h8kT8kQPIbCJMEyAQAMiA","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1329.206871396018,"y":-313.22214253743596,"strokeColor":"#000000","backgroundColor":"transparent","width":96,"height":45,"seed":1824856759,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"bargs","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"bargs"},{"type":"text","version":46,"versionNonce":893312305,"isDeleted":false,"id":"5pvuPqsf49naFVW_408jC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":935.8734363374242,"y":-354.88886006673283,"strokeColor":"#000000","backgroundColor":"transparent","width":371,"height":45,"seed":1716734073,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80182f80","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80182f80"},{"type":"arrow","version":110,"versionNonce":1754106463,"isDeleted":false,"id":"i5h33vcTF-RtU-TIHDsD2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":712.5403064546117,"y":-238.88878377278752,"strokeColor":"#000000","backgroundColor":"transparent","width":205,"height":98.33335876464844,"seed":1175958841,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":-0.5892599559247894,"gap":7.3501645042767905},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[205,-98.33335876464844]]},{"type":"text","version":35,"versionNonce":1487802129,"isDeleted":false,"id":"qdFqVvL4ZI4joPPvljBx9","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1332.5403064546117,"y":-364.8887837727875,"strokeColor":"#000000","backgroundColor":"transparent","width":99,"height":45,"seed":1759502583,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"lZ6xJvse54CDanauZELk-","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"config","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"config"},{"type":"text","version":210,"versionNonce":1548412543,"isDeleted":false,"id":"gfEiHOxJLDlm--HGM7o5C","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1324.206871396018,"y":-182.8887074788422,"strokeColor":"#000000","backgroundColor":"transparent","width":694,"height":142,"seed":1117204505,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"nX2PnoO7OO-840GGGC3eP","type":"arrow"},{"id":"giVno-aZAlQTqJi9Jy6dM","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"ctx(紧紧跟在bootstrap_stack_top之后)\nbootstrap_stack_top\n","baseline":129,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ctx(紧紧跟在bootstrap_stack_top之后)\nbootstrap_stack_top\n"},{"type":"arrow","version":102,"versionNonce":253494513,"isDeleted":false,"id":"nX2PnoO7OO-840GGGC3eP","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2044.762372698102,"y":-170.2850207167464,"strokeColor":"#000000","backgroundColor":"transparent","width":297.7777099609375,"height":26.511455860861503,"seed":687670233,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"gfEiHOxJLDlm--HGM7o5C","focus":-0.2675042973645211,"gap":26.55550130208394},"endBinding":{"elementId":"W1KhjR7dmsle8-xCjAnOV","focus":0.09853655781961622,"gap":11.111246744791515},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[297.7777099609375,-26.511455860861503]]},{"type":"text","version":126,"versionNonce":71810719,"isDeleted":false,"id":"W1KhjR7dmsle8-xCjAnOV","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2353.651329403831,"y":-540.7220815022794,"strokeColor":"#000000","backgroundColor":"transparent","width":1245,"height":650,"seed":1621877369,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"nX2PnoO7OO-840GGGC3eP","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct context {\n        /*\n         * We include only registers that must be preserved\n         * during function call.\n         */\n        uint64_t sp;\n        uint64_t pc;\n        uint64_t rbx;\n        uint64_t rbp;\n        uint64_t r12;\n        uint64_t r13;\n        uint64_t r14;\n        uint64_t r15;\n        uint64_t tp;\n} context_t;","baseline":641,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct context {\n        /*\n         * We include only registers that must be preserved\n         * during function call.\n         */\n        uint64_t sp;\n        uint64_t pc;\n        uint64_t rbx;\n        uint64_t rbp;\n        uint64_t r12;\n        uint64_t r13;\n        uint64_t r14;\n        uint64_t r15;\n        uint64_t tp;\n} context_t;"},{"type":"arrow","version":336,"versionNonce":336608977,"isDeleted":false,"id":"lZ6xJvse54CDanauZELk-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1430.0402352469296,"y":-374.9999694824219,"strokeColor":"#000000","backgroundColor":"transparent","width":848.3331298828125,"height":962.2191957059556,"seed":392572025,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"qdFqVvL4ZI4joPPvljBx9","focus":0.2756074552885947,"gap":10.111185709634356},"endBinding":{"elementId":"NmZt7MnvsBUo1FivPWXaB","focus":0.6088012903932717,"gap":8.33343505859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[848.3331298828125,-962.2191957059556]]},{"type":"text","version":155,"versionNonce":590647999,"isDeleted":false,"id":"NmZt7MnvsBUo1FivPWXaB","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2286.706800188336,"y":-1799.3333282470703,"strokeColor":"#000000","backgroundColor":"transparent","width":1371,"height":910,"seed":483230647,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"lZ6xJvse54CDanauZELk-","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\n        /** Number of processors detected. */\n        unsigned int cpu_count;\n        /** Number of processors that are up and running. */\n        volatile size_t cpu_active;\n\n        uintptr_t base;\n        /** Size of memory in bytes taken by kernel and stack. */\n        size_t kernel_size;\n\n        bool identity_configured;\n        /** Base address of the kernel identity mapped memory. */\n        uintptr_t identity_base;\n        /** Size of the kernel identity mapped memory. */\n        size_t identity_size;\n\n        bool non_identity_configured;\n\n        /** End of physical memory. */\n        uint64_t physmem_end;\n} config_t;","baseline":901,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\n        /** Number of processors detected. */\n        unsigned int cpu_count;\n        /** Number of processors that are up and running. */\n        volatile size_t cpu_active;\n\n        uintptr_t base;\n        /** Size of memory in bytes taken by kernel and stack. */\n        size_t kernel_size;\n\n        bool identity_configured;\n        /** Base address of the kernel identity mapped memory. */\n        uintptr_t identity_base;\n        /** Size of the kernel identity mapped memory. */\n        size_t identity_size;\n\n        bool non_identity_configured;\n\n        /** End of physical memory. */\n        uint64_t physmem_end;\n} config_t;"},{"type":"arrow","version":227,"versionNonce":1176648881,"isDeleted":false,"id":"39eRx0NQeG5crDZk5ey4h","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2793.9290902273983,"y":-1525.8332265218098,"strokeColor":"#000000","backgroundColor":"transparent","width":979.9999999999995,"height":8.88890584309911,"seed":71787255,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":null,"endBinding":{"elementId":"_JueS0iXvJfxjaTEjOf8R","focus":0.0739149031521371,"gap":8.888956705729697},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[979.9999999999995,-8.88890584309911]]},{"type":"text","version":75,"versionNonce":1370612447,"isDeleted":false,"id":"_JueS0iXvJfxjaTEjOf8R","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3782.818046933128,"y":-1556.666559855143,"strokeColor":"#000000","backgroundColor":"transparent","width":465,"height":43,"seed":2135313207,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"39eRx0NQeG5crDZk5ey4h","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":3,"text":" 0xFFFF FFFF 8010 8000","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":" 0xFFFF FFFF 8010 8000"},{"type":"arrow","version":262,"versionNonce":1157201553,"isDeleted":false,"id":"giVno-aZAlQTqJi9Jy6dM","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1452.4846729096905,"y":-202.05553690592933,"strokeColor":"#000000","backgroundColor":"transparent","width":897.7777608235676,"height":574.4444274902344,"seed":22008087,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"gfEiHOxJLDlm--HGM7o5C","focus":-0.7853044346976283,"gap":19.166829427087123},"endBinding":{"elementId":"M9xKygWBamU-KdmckYrTU","focus":0.7238049012828698,"gap":13.33333333333303},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[897.7777608235676,-574.4444274902344]]},{"type":"text","version":49,"versionNonce":1078996735,"isDeleted":false,"id":"M9xKygWBamU-KdmckYrTU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2363.595767066591,"y":-851.7777252197315,"strokeColor":"#000000","backgroundColor":"transparent","width":485,"height":173,"seed":1243823449,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"giVno-aZAlQTqJi9Jy6dM","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\n        uintptr_t base;\n        size_t size;\n} ballocs_t;","baseline":165,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\n        uintptr_t base;\n        size_t size;\n} ballocs_t;"},{"type":"text","version":555,"versionNonce":1330480241,"isDeleted":false,"id":"YSzxxSmRi0XbHCgNfRdUs","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3783.4055233909976,"y":-1461.151073637465,"strokeColor":"#000000","backgroundColor":"transparent","width":1509,"height":45,"seed":689776183,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"6T0tcX5B3i6vcykMWyJRz","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff801aaf29 - 0xffffffff8010 8000 = ALIGN_UP(0x A 2F29) = 0xA3000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff801aaf29 - 0xffffffff8010 8000 = ALIGN_UP(0x A 2F29) = 0xA3000"},{"type":"arrow","version":176,"versionNonce":965736223,"isDeleted":false,"id":"6T0tcX5B3i6vcykMWyJRz","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2872.516363234748,"y":-1424.0398777553037,"strokeColor":"#000000","backgroundColor":"transparent","width":901.1115519205728,"height":12.845718147832258,"seed":319710231,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":null,"endBinding":{"elementId":"YSzxxSmRi0XbHCgNfRdUs","focus":0.2745277718343605,"gap":9.77760823567678},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[901.1115519205728,-12.845718147832258]]},{"type":"arrow","version":132,"versionNonce":1625673297,"isDeleted":false,"id":"7aMpL87-2P5V35_WsQK-C","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2785.1274472191244,"y":49.682351248598934,"strokeColor":"#000000","backgroundColor":"transparent","width":526.6667175292969,"height":168.33328247070312,"seed":1676269111,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":null,"endBinding":{"elementId":"4IleDZ2gBfsC9_LEXFtAW","focus":0.789628969443241,"gap":8.333282470703125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[526.6667175292969,-168.33328247070312]]},{"type":"text","version":128,"versionNonce":1675737919,"isDeleted":false,"id":"4IleDZ2gBfsC9_LEXFtAW","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3320.1274472191244,"y":-142.98428998675263,"strokeColor":"#000000","backgroundColor":"transparent","width":485,"height":51,"seed":1116119063,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"7aMpL87-2P5V35_WsQK-C","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":1,"text":"线程指针（Thread Pointer）","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"线程指针（Thread Pointer）"},{"type":"text","version":72,"versionNonce":278518833,"isDeleted":false,"id":"PAWMB4KkfZk3iatPtY9fS","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5911.460251581104,"y":-1010.8173639206725,"strokeColor":"#000000","backgroundColor":"transparent","width":1962,"height":303,"seed":2088484217,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"ZnL6ReAoas9nQFLf6gXl5","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":3,"text":"_NO_TRACE void main_bsp(void)\n{\n...\n        context_create(&ctx, main_bsp_separated_stack,bootstrap_stack, bootstrap_stack_size);\n        context_restore(&ctx);\n...\n}","baseline":295,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"_NO_TRACE void main_bsp(void)\n{\n...\n        context_create(&ctx, main_bsp_separated_stack,bootstrap_stack, bootstrap_stack_size);\n        context_restore(&ctx);\n...\n}"},{"type":"arrow","version":295,"versionNonce":1134951263,"isDeleted":false,"id":"ZnL6ReAoas9nQFLf6gXl5","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7876.960251581104,"y":-811.7689140776965,"strokeColor":"#000000","backgroundColor":"transparent","width":184,"height":8.317308913962052,"seed":1947589143,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"PAWMB4KkfZk3iatPtY9fS","focus":0.015557204604579496,"gap":3.5},"endBinding":{"elementId":"EgYPDKX-BgoZgLWx0mcaZ","focus":0.1499146094110779,"gap":22.666748046875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[184,8.317308913962052]]},{"type":"text","version":172,"versionNonce":777072145,"isDeleted":false,"id":"EgYPDKX-BgoZgLWx0mcaZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8083.626999627979,"y":-980.1504327683288,"strokeColor":"#000000","backgroundColor":"transparent","width":1666,"height":520,"seed":1959411321,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"ZnL6ReAoas9nQFLf6gXl5","type":"arrow"},{"id":"Ko12BQTBBHvUdzFJFwOkb","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":3,"text":"_NO_TRACE static inline void context_create(context_t *context,\n    void (*fn)(void), void *stack_base, size_t stack_size)\n{\n        *context = (context_t) { 0 };\n        context_set(context, FADDR(fn), stack_base, stack_size);\n        // replace with :\n        do{\n            context->pc = (uintptr_t) (FADDR(fn));\n            context->sp = ((uintptr_t) (stack_base)) + (stack_size) - SP_DELTA;\n            context->rbp = 0;\n        }while(0)\n}","baseline":511,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"_NO_TRACE static inline void context_create(context_t *context,\n    void (*fn)(void), void *stack_base, size_t stack_size)\n{\n        *context = (context_t) { 0 };\n        context_set(context, FADDR(fn), stack_base, stack_size);\n        // replace with :\n        do{\n            context->pc = (uintptr_t) (FADDR(fn));\n            context->sp = ((uintptr_t) (stack_base)) + (stack_size) - SP_DELTA;\n            context->rbp = 0;\n        }while(0)\n}"},{"type":"arrow","version":490,"versionNonce":2100115327,"isDeleted":false,"id":"Ko12BQTBBHvUdzFJFwOkb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8838.892174864177,"y":-449.9838067917662,"strokeColor":"#000000","backgroundColor":"transparent","width":32.721696521824924,"height":203.6665649414062,"seed":1449771225,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":{"elementId":"EgYPDKX-BgoZgLWx0mcaZ","focus":0.039243378045256835,"gap":10.166625976562557},"endBinding":{"elementId":"WouzM7Q9XO4E9BbcmtjxK","focus":0.000008793731245222616,"gap":25.83343505859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-32.721696521824924,203.6665649414062]]},{"type":"text","version":171,"versionNonce":553862129,"isDeleted":false,"id":"WouzM7Q9XO4E9BbcmtjxK","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8042.627121698291,"y":-220.48380679176626,"strokeColor":"#000000","backgroundColor":"transparent","width":1477,"height":260,"seed":136385559,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"Ko12BQTBBHvUdzFJFwOkb","type":"arrow"}],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":3,"text":"#define context_set(c, _pc, stack, size) \\\n        do { \\\n                (c)->pc = (uintptr_t) (_pc); \\\n                (c)->sp = ((uintptr_t) (stack)) + (size) - SP_DELTA; \\\n                (c)->rbp = 0; \\\n        } while (0)","baseline":251,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"#define context_set(c, _pc, stack, size) \\\n        do { \\\n                (c)->pc = (uintptr_t) (_pc); \\\n                (c)->sp = ((uintptr_t) (stack)) + (size) - SP_DELTA; \\\n                (c)->rbp = 0; \\\n        } while (0)"},{"type":"arrow","version":156,"versionNonce":1454895007,"isDeleted":false,"id":"QkByQXDxxQoSqPd_mSP0w","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9736.293483189176,"y":-627.3171401250997,"strokeColor":"#000000","backgroundColor":"transparent","width":180,"height":318.33335876464844,"seed":1278047863,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[180,-318.33335876464844]]},{"type":"text","version":35,"versionNonce":79142353,"isDeleted":false,"id":"kmYqxTiRox6vOthE7yTsi","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9944.62691824777,"y":-998.1504988897482,"strokeColor":"#000000","backgroundColor":"transparent","width":275,"height":43,"seed":309870199,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914514,"link":null,"fontSize":36,"fontFamily":3,"text":"SP_DELTA = 16","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"SP_DELTA = 16"},{"type":"arrow","version":78,"versionNonce":2054595519,"isDeleted":false,"id":"WmUfn9_8wS2l5eDvOaLdI","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7196.293483189176,"y":-900.6504988897482,"strokeColor":"#000000","backgroundColor":"transparent","width":43.333282470703125,"height":365,"seed":1991839513,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914514,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[43.333282470703125,-365]]},{"type":"arrow","version":93,"versionNonce":142982065,"isDeleted":false,"id":"of9M2tKo1LHYAupJFMHm-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7607.960048130582,"y":-910.6504988897482,"strokeColor":"#000000","backgroundColor":"transparent","width":30,"height":341.66664123535156,"seed":268036345,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[30,-341.66664123535156]]},{"type":"text","version":67,"versionNonce":2022298591,"isDeleted":false,"id":"1U7BTQ2i2Cl3L0ZZ92lKc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7057.960048130582,"y":-1324.8171401250993,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":43,"seed":307809719,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"0xffffffff80180000","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80180000"},{"type":"text","version":45,"versionNonce":211099025,"isDeleted":false,"id":"O0MyvgCTQMdzo94VBhRu2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7584.626613071989,"y":-1323.1502700079118,"strokeColor":"#000000","backgroundColor":"transparent","width":128,"height":43,"seed":753276825,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"0x2000","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0x2000"},{"type":"line","version":207,"versionNonce":151126015,"isDeleted":false,"id":"djSPtbCup_hO63URDo_Bp","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8836.293330601286,"y":-585.6502700079118,"strokeColor":"#000000","backgroundColor":"transparent","width":913.3334350585938,"height":3.333282470703125,"seed":1734566839,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[913.3334350585938,-3.333282470703125]]},{"type":"arrow","version":91,"versionNonce":1917809,"isDeleted":false,"id":"WRmkSvPOqQbFg8euHQ9VW","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9484.62676565988,"y":-585.6502700079118,"strokeColor":"#000000","backgroundColor":"transparent","width":280,"height":205,"seed":734020889,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[280,205]]},{"type":"text","version":32,"versionNonce":232761375,"isDeleted":false,"id":"ARQMY5POSimJP18IMnh19","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9761.293330601286,"y":-371.4835524786149,"strokeColor":"#000000","backgroundColor":"transparent","width":402,"height":43,"seed":2102782935,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"FFFF FFFF 8018 1FF0","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"FFFF FFFF 8018 1FF0"},{"type":"arrow","version":82,"versionNonce":2137369937,"isDeleted":false,"id":"BMMwTqWnbOIjpmrxyU_Qp","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6778.515620640348,"y":-918.4279291062189,"strokeColor":"#000000","backgroundColor":"transparent","width":13.33333333333303,"height":246.66671752929688,"seed":1427120663,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[13.33333333333303,-246.66671752929688]]},{"type":"text","version":42,"versionNonce":1427328063,"isDeleted":false,"id":"EGMBF1CVPKXFvsDm9KChB","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6634.071040562222,"y":-1233.705740792417,"strokeColor":"#000000","backgroundColor":"transparent","width":339,"height":43,"seed":2065633689,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"ffffffff80115a10","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ffffffff80115a10"},{"type":"arrow","version":75,"versionNonce":835050289,"isDeleted":false,"id":"hZYowgdj8wulf-RcRUVH0","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9118.515620640346,"y":-665.0945957728857,"strokeColor":"#000000","backgroundColor":"transparent","width":220,"height":40,"seed":407243127,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":{"elementId":"9-efbBoQMASKPNKM4AfDm","focus":0.3463783006758137,"gap":4.444580078123181},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[220,-40]]},{"type":"text","version":134,"versionNonce":444427359,"isDeleted":false,"id":"9-efbBoQMASKPNKM4AfDm","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9342.96020071847,"y":-742.5946466355158,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":43,"seed":1154542999,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"hZYowgdj8wulf-RcRUVH0","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"0xffffffff80115a10","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80115a10"},{"type":"arrow","version":138,"versionNonce":1738886417,"isDeleted":false,"id":"S0rmBvlc8WY4zPlgR3YQh","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6338.515620640346,"y":-778.4279291062189,"strokeColor":"#000000","backgroundColor":"transparent","width":32.64190340451205,"height":262.2222900390625,"seed":1042615961,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":{"elementId":"7aLod0K6_PKfRMiLb2M-n","focus":-0.46331149703880403,"gap":26.944376627604015},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-32.64190340451205,262.2222900390625]]},{"type":"text","version":108,"versionNonce":1240369279,"isDeleted":false,"id":"7aLod0K6_PKfRMiLb2M-n","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5989.626867385139,"y":-489.2612624395524,"strokeColor":"#000000","backgroundColor":"transparent","width":1139,"height":217,"seed":1476564503,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"S0rmBvlc8WY4zPlgR3YQh","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"_NO_TRACE __attribute__((noreturn))\n    static inline void context_restore(context_t *ctx)\n{\n        context_restore_arch(ctx);\n}","baseline":208,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"_NO_TRACE __attribute__((noreturn))\n    static inline void context_restore(context_t *ctx)\n{\n        context_restore_arch(ctx);\n}"},{"type":"arrow","version":81,"versionNonce":2021360369,"isDeleted":false,"id":"7U5_dqm9eaqSxi8EszEI-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6426.515702020557,"y":-297.5391555059589,"strokeColor":"#000000","backgroundColor":"transparent","width":0.501812857677578,"height":161.33331298828125,"seed":1569089401,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":{"elementId":"INhaGuOfntKlU3CKNWdV-","focus":-0.2904815541100272,"gap":14.49993896484375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-0.501812857677578,161.33331298828125]]},{"type":"text","version":152,"versionNonce":19341471,"isDeleted":false,"id":"INhaGuOfntKlU3CKNWdV-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5949.1823279971195,"y":-121.70590355283389,"strokeColor":"#000000","backgroundColor":"transparent","width":1340,"height":1277,"seed":1626601047,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"7U5_dqm9eaqSxi8EszEI-","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"FUNCTION_BEGIN(context_restore_arch)\n        movq CONTEXT_OFFSET_R15(%rdi), %r15\n        movq CONTEXT_OFFSET_R14(%rdi), %r14\n        movq CONTEXT_OFFSET_R13(%rdi), %r13\n        movq CONTEXT_OFFSET_R12(%rdi), %r12\n        movq CONTEXT_OFFSET_RBP(%rdi), %rbp\n        movq CONTEXT_OFFSET_RBX(%rdi), %rbx\n\n        movq CONTEXT_OFFSET_SP(%rdi), %rsp\n\n        movq CONTEXT_OFFSET_PC(%rdi), %rdx\n        # 将context里面的pc值存储到rsp指向的位置，相当于push了一个值。\n        movq %rdx, (%rsp)\n    # 将context中的tp的值加载到rcx\n        movq CONTEXT_OFFSET_TP(%rdi), %rcx\n#ifdef MEMORY_MODEL_large\n        movabsq $vreg_ptr, %rsi\n        movq (%rsi), %rsi\n#else\n    # 将 vreg_ptr 的地址加载到 %rsi\n        movq vreg_ptr, %rsi\n#endif\n    # 将context中的tp的值（rcx中），加载到vreg_ptr地址中。\n        movq %rcx, %fs:VREG_TP(%rsi)\n\n        xorl %eax, %eax       # context_restore returns 0\n        # ret指令从栈中取出上次放入的rdx的值，也就是context中的pc值。\n        ret\nFUNCTION_END(context_restore_arch)","baseline":1268,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"FUNCTION_BEGIN(context_restore_arch)\n        movq CONTEXT_OFFSET_R15(%rdi), %r15\n        movq CONTEXT_OFFSET_R14(%rdi), %r14\n        movq CONTEXT_OFFSET_R13(%rdi), %r13\n        movq CONTEXT_OFFSET_R12(%rdi), %r12\n        movq CONTEXT_OFFSET_RBP(%rdi), %rbp\n        movq CONTEXT_OFFSET_RBX(%rdi), %rbx\n\n        movq CONTEXT_OFFSET_SP(%rdi), %rsp\n\n        movq CONTEXT_OFFSET_PC(%rdi), %rdx\n        # 将context里面的pc值存储到rsp指向的位置，相当于push了一个值。\n        movq %rdx, (%rsp)\n    # 将context中的tp的值加载到rcx\n        movq CONTEXT_OFFSET_TP(%rdi), %rcx\n#ifdef MEMORY_MODEL_large\n        movabsq $vreg_ptr, %rsi\n        movq (%rsi), %rsi\n#else\n    # 将 vreg_ptr 的地址加载到 %rsi\n        movq vreg_ptr, %rsi\n#endif\n    # 将context中的tp的值（rcx中），加载到vreg_ptr地址中。\n        movq %rcx, %fs:VREG_TP(%rsi)\n\n        xorl %eax, %eax       # context_restore returns 0\n        # ret指令从栈中取出上次放入的rdx的值，也就是context中的pc值。\n        ret\nFUNCTION_END(context_restore_arch)"},{"type":"arrow","version":79,"versionNonce":1624243409,"isDeleted":false,"id":"yWvdrUXFlVWmuFAnZHuSV","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":704.2070392426976,"y":-78.0553334554047,"strokeColor":"#000000","backgroundColor":"transparent","width":198.666748046875,"height":34.6666259765625,"seed":281675746,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[198.666748046875,34.6666259765625]]},{"type":"text","version":32,"versionNonce":1373091007,"isDeleted":false,"id":"QEOsWTV_5vTZEp0xCagHM","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":929.5402911958226,"y":-55.55533345540471,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":43,"seed":454176126,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"0xffffffff8016fe50","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff8016fe50"},{"type":"text","version":32,"versionNonce":540687025,"isDeleted":false,"id":"w8U-j2EWyWdEQZMShjtHW","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":1336.2070392426976,"y":-56.88870747884221,"strokeColor":"#000000","backgroundColor":"transparent","width":170,"height":43,"seed":1957127678,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"vreg_ptr","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"vreg_ptr"},{"type":"arrow","version":306,"versionNonce":1134609631,"isDeleted":false,"id":"Ezt2hTsbVZB3w3A1Csj8J","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":57.5398639497289,"y":-73.40820365041986,"strokeColor":"#000000","backgroundColor":"transparent","width":287.3454769426626,"height":497.98050382842234,"seed":1025333310,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":0.261265693523254,"gap":17.126548403786728},"endBinding":{"elementId":"ye2eRzdT14gqkPhXnyJpx","focus":-0.12014033809494641,"gap":15.8333740234375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-287.3454769426626,-497.98050382842234]]},{"type":"text","version":308,"versionNonce":1466023057,"isDeleted":false,"id":"nGhM_nC4xFcDuvtbqVOow","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1675.7935711088649,"y":-1280.8887379964203,"strokeColor":"#000000","backgroundColor":"transparent","width":1624,"height":390,"seed":1360509758,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"hz8QOTOwxtsHKZgxYoNH7","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\n        size_t preemption;      /**< Preemption disabled counter and flag. */\n        size_t mutex_locks;\n        struct thread *thread;  /**< Current thread. */\n        struct task *task;      /**< Current task. */\n        struct cpu *cpu;        /**< Executing CPU. */\n        struct as *as;          /**< Current address space. */\n        uint32_t magic;         /**< Magic value. */\n} current_t;","baseline":381,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\n        size_t preemption;      /**< Preemption disabled counter and flag. */\n        size_t mutex_locks;\n        struct thread *thread;  /**< Current thread. */\n        struct task *task;      /**< Current task. */\n        struct cpu *cpu;        /**< Executing CPU. */\n        struct as *as;          /**< Current address space. */\n        uint32_t magic;         /**< Magic value. */\n} current_t;"},{"type":"text","version":170,"versionNonce":370331903,"isDeleted":false,"id":"ye2eRzdT14gqkPhXnyJpx","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-631.7936321440211,"y":-690.2220815022797,"strokeColor":"#000000","backgroundColor":"transparent","width":642,"height":103,"seed":1237807266,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"Ezt2hTsbVZB3w3A1Csj8J","type":"arrow"},{"id":"hz8QOTOwxtsHKZgxYoNH7","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"CURRENT指向当前栈的基地址，在这里\n初始化一个current_t的结构","baseline":89,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"CURRENT指向当前栈的基地址，在这里\n初始化一个current_t的结构"},{"type":"arrow","version":123,"versionNonce":637403761,"isDeleted":false,"id":"hz8QOTOwxtsHKZgxYoNH7","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-518.4603801908961,"y":-703.3887074788422,"strokeColor":"#000000","backgroundColor":"transparent","width":494.6666259765625,"height":180,"seed":485010686,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"ye2eRzdT14gqkPhXnyJpx","focus":-0.06475973229778628,"gap":13.1666259765625},"endBinding":{"elementId":"nGhM_nC4xFcDuvtbqVOow","focus":0.5236585167003277,"gap":7.500030517578125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-494.6666259765625,-180]]},{"type":"rectangle","version":233,"versionNonce":1118722335,"isDeleted":false,"id":"r0UeXAQl7cU_k_8IpJbsx","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6136.206489926291,"y":4116.61175028483,"strokeColor":"#000000","backgroundColor":"transparent","width":1386.66748046875,"height":3180,"seed":1521847714,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"pzq4oQD_B39ZPmBHcwuFS","type":"arrow"},{"id":"fCDV6-jQTqN2fRCiJOrIV","type":"arrow"},{"id":"YL8nlfZ9cz4KOth9XU-gD","type":"arrow"},{"id":"-B6whLI7Uhw8ip2A3tDXt","type":"arrow"},{"id":"aVxfiixZaa17j0kwlTVvH","type":"arrow"},{"id":"ciyOkI3LiaxpUbQ6jFYVL","type":"arrow"}],"updated":1741338914515,"link":null},{"type":"text","version":179,"versionNonce":1222020177,"isDeleted":false,"id":"9fhe-Mo7JnmjgFh04ee79","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6584.5401792980365,"y":5673.945236206054,"strokeColor":"#000000","backgroundColor":"transparent","width":521.3333333333325,"height":344.99999999999955,"seed":447807102,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":275.9999999999996,"fontFamily":1,"text":".bss","baseline":240.99999999999955,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".bss"},{"type":"text","version":262,"versionNonce":1055120703,"isDeleted":false,"id":"VVLlRSC8RJLjyqDLcB-95","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5485.371834164574,"y":5844.945312499999,"strokeColor":"#000000","backgroundColor":"transparent","width":375,"height":45,"seed":1961227746,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80180000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80180000"},{"type":"text","version":410,"versionNonce":2009258545,"isDeleted":false,"id":"vgRXhdZYlqDe6J9FvtlwU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5480.70603216262,"y":5725.778747558593,"strokeColor":"#000000","backgroundColor":"transparent","width":376,"height":45,"seed":1187658238,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"pzq4oQD_B39ZPmBHcwuFS","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80182000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80182000"},{"type":"arrow","version":76,"versionNonce":2115231071,"isDeleted":false,"id":"pzq4oQD_B39ZPmBHcwuFS","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6115.373054867699,"y":5756.61180114746,"strokeColor":"#000000","backgroundColor":"transparent","width":253.333740234375,"height":14.999847412109375,"seed":743725566,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"r0UeXAQl7cU_k_8IpJbsx","focus":-0.05658051207062926,"gap":20.83343505859284},"endBinding":{"elementId":"vgRXhdZYlqDe6J9FvtlwU","focus":-0.5386037641972921,"gap":5.333282470703125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-253.333740234375,-14.999847412109375]]},{"type":"arrow","version":78,"versionNonce":61500433,"isDeleted":false,"id":"fCDV6-jQTqN2fRCiJOrIV","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6108.70603216262,"y":5854.945388793944,"strokeColor":"#000000","backgroundColor":"transparent","width":223.33297729492188,"height":3.3331298828125,"seed":1854741538,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"r0UeXAQl7cU_k_8IpJbsx","focus":-0.08596604536153472,"gap":27.500457763670966},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-223.33297729492188,3.3331298828125]]},{"type":"text","version":68,"versionNonce":864999807,"isDeleted":false,"id":"8sSZ8BvGV5LjBjm1xRjI3","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5125.372749691917,"y":5788.945236206054,"strokeColor":"#000000","backgroundColor":"transparent","width":306,"height":45,"seed":1809986402,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"bootstrap_stack","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"bootstrap_stack"},{"type":"text","version":70,"versionNonce":881115633,"isDeleted":false,"id":"8PigzrX6Wwarai6MdrKhS","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1967.7528163364987,"y":9701.618701250127,"strokeColor":"#000000","backgroundColor":"transparent","width":244,"height":261,"seed":319404414,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":102.92307692307688,"fontFamily":1,"text":"IDT:\n","baseline":222,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"IDT:\n"},{"type":"rectangle","version":231,"versionNonce":1419071903,"isDeleted":false,"id":"eRq1s-7nF5GVEkfnqLFl0","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1305.2526383172935,"y":9758.35516866048,"strokeColor":"#000000","backgroundColor":"transparent","width":1093.3334350585938,"height":3853.3334350585938,"seed":929803746,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"jAxpVQA1NQ0b-J2TM4WgB","type":"arrow"},{"id":"Ap0XHCt6UQX19JbtC2px0","type":"arrow"},{"id":"fTbvXwvg8Iqtkwzhz9YYb","type":"arrow"}],"updated":1741338914515,"link":null},{"type":"text","version":92,"versionNonce":1733909457,"isDeleted":false,"id":"NoBxPNUIhJV7LAP1E6LMx","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-1065.2526383172935,"y":11419.022191365559,"strokeColor":"#000000","backgroundColor":"transparent","width":502.1850823296437,"height":248.3332824707029,"seed":1818924258,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":198.66662597656233,"fontFamily":1,"text":".text","baseline":173.3332824707029,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".text"},{"type":"text","version":145,"versionNonce":1515701695,"isDeleted":false,"id":"jf2bnovArhATy89svzyA-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":439.2469802129799,"y":9738.354405721027,"strokeColor":"#000000","backgroundColor":"transparent","width":362,"height":45,"seed":736552290,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"jAxpVQA1NQ0b-J2TM4WgB","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff801539f8","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff801539f8"},{"type":"text","version":164,"versionNonce":1816115633,"isDeleted":false,"id":"A6yBOmJyPOfoAljiRCf59","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":834.2468276250893,"y":9733.354329427082,"strokeColor":"#000000","backgroundColor":"transparent","width":186,"height":45,"seed":376314302,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"ktext_end","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ktext_end"},{"type":"arrow","version":162,"versionNonce":1140241887,"isDeleted":false,"id":"jAxpVQA1NQ0b-J2TM4WgB","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-197.75324866885603,"y":9756.687917073566,"strokeColor":"#000000","backgroundColor":"transparent","width":626.6665649414062,"height":1.6666412353515625,"seed":719812130,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"eRq1s-7nF5GVEkfnqLFl0","focus":-1.000884242631116,"gap":14.16595458984375},"endBinding":{"elementId":"jf2bnovArhATy89svzyA-","focus":0.08663489042944453,"gap":10.333663940429688},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[626.6665649414062,1.6666412353515625]]},{"type":"text","version":163,"versionNonce":610229137,"isDeleted":false,"id":"aJl10CNwEjIshHsUEDcZ-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":323.9132552373958,"y":13590.632659912104,"strokeColor":"#000000","backgroundColor":"transparent","width":355,"height":45,"seed":232264830,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff80114000","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80114000"},{"type":"text","version":106,"versionNonce":1484956159,"isDeleted":false,"id":"7xqZfc5Zcj9SLkcwNjsQA","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":724.6911279587498,"y":13578.188247680659,"strokeColor":"#000000","backgroundColor":"transparent","width":229,"height":45,"seed":1259731710,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"ktext_start","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ktext_start"},{"type":"arrow","version":113,"versionNonce":1609548145,"isDeleted":false,"id":"Ap0XHCt6UQX19JbtC2px0","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-206.4201187860417,"y":13604.29939270019,"strokeColor":"#000000","backgroundColor":"transparent","width":500,"height":0,"seed":1733441918,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"eRq1s-7nF5GVEkfnqLFl0","focus":0.9961647694686083,"gap":5.499084472658069},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[500,0]]},{"type":"arrow","version":118,"versionNonce":687606303,"isDeleted":false,"id":"fTbvXwvg8Iqtkwzhz9YYb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":-204.19782874697512,"y":13320.965906778969,"strokeColor":"#000000","backgroundColor":"transparent","width":488.888956705729,"height":0,"seed":1044456930,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"eRq1s-7nF5GVEkfnqLFl0","focus":0.8491058706235816,"gap":7.721374511724662},"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[488.888956705729,0]]},{"type":"text","version":81,"versionNonce":2084072273,"isDeleted":false,"id":"189au0l8yv-nALb-EreU_","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":311.3577946254204,"y":13304.299036661781,"strokeColor":"#000000","backgroundColor":"transparent","width":349,"height":45,"seed":237716606,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff801152b0","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff801152b0"},{"type":"text","version":156,"versionNonce":1381199423,"isDeleted":false,"id":"UnCrMIB9JN4gqDm4Cg1w2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":726.913214547295,"y":13303.188095092772,"strokeColor":"#000000","backgroundColor":"transparent","width":142,"height":45,"seed":351717282,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"exc_init","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"exc_init"},{"type":"text","version":119,"versionNonce":1100011825,"isDeleted":false,"id":"YCY2Zv0YYYbA2q6Ckj7GE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10820.874280657083,"y":-1197.8333791097002,"strokeColor":"#000000","backgroundColor":"transparent","width":1140,"height":185,"seed":285512297,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":73.33333333333339,"fontFamily":1,"text":"main_bsp_separated_stack  : \n    ","baseline":157,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"main_bsp_separated_stack  : \n    "},{"type":"rectangle","version":255,"versionNonce":2137607775,"isDeleted":false,"id":"Mco1DCmn7gkdhNEbRliBK","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11611.985527401872,"y":-1026.2778574625652,"strokeColor":"#000000","backgroundColor":"transparent","width":764.444580078125,"height":2357.777811686198,"seed":1071522697,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"5CQDqAtB7n-btktQpBYmf","type":"arrow"},{"id":"zHat_WQVnVjjQa1ivczei","type":"arrow"}],"updated":1741338914515,"link":null},{"type":"text","version":57,"versionNonce":23104273,"isDeleted":false,"id":"4gjgTnVVdfoY3wovnLgoC","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11787.541252499517,"y":-128.94452412923215,"strokeColor":"#000000","backgroundColor":"transparent","width":388.33343505859347,"height":129.4444783528645,"seed":182350727,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":103.55558268229161,"fontFamily":1,"text":".rodata","baseline":90.44447835286451,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":".rodata"},{"type":"text","version":102,"versionNonce":722348671,"isDeleted":false,"id":"KiCtLiACMjezAaZxB1K89","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12681.985425676601,"y":-162.9446258544922,"strokeColor":"#000000","backgroundColor":"transparent","width":359,"height":45,"seed":813644393,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"5CQDqAtB7n-btktQpBYmf","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"0xffffffff8016f560","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff8016f560"},{"type":"text","version":86,"versionNonce":1948188913,"isDeleted":false,"id":"eHV1F1Qmq7T2wjJ2iDv1O","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13093.09738449821,"y":-171.83348083496207,"strokeColor":"#000000","backgroundColor":"transparent","width":283,"height":45,"seed":1253274663,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"pXzcgBWtruVFBt9gVNn73","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"basic_commands","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"basic_commands"},{"type":"arrow","version":96,"versionNonce":570589855,"isDeleted":false,"id":"5CQDqAtB7n-btktQpBYmf","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12378.652804420088,"y":-141.83348083496207,"strokeColor":"#000000","backgroundColor":"transparent","width":295.55582682291606,"height":2.2222900390625,"seed":1662190471,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"Mco1DCmn7gkdhNEbRliBK","focus":-0.2516030863727623,"gap":2.2226969400908274},"endBinding":{"elementId":"KiCtLiACMjezAaZxB1K89","focus":-0.09398761071828099,"gap":7.776794433597388},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[295.55582682291606,2.2222900390625]]},{"type":"text","version":309,"versionNonce":1465105105,"isDeleted":false,"id":"oFuWQdhWDz5OiudvnXcE2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":14281.430666968912,"y":-128.55569458007812,"strokeColor":"#000000","backgroundColor":"transparent","width":457,"height":1032,"seed":2070988041,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"pXzcgBWtruVFBt9gVNn73","type":"arrow"},{"id":"bjECJhrVjDddtRIlFBJtU","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":20,"fontFamily":3,"text":"static cmd_info_t *basic_commands[] = {\n        &call0_info,\n        &mcall0_info,\n        &caches_info,\n        &call1_info,\n        &call2_info,\n        &call3_info,\n        &cont inue_info,\n        &cpus_info,\n        &desc_info,\n        &halt_info,\n        &help_info,\n        &ipc_info,\n        &kill_info,\n        &physmem_info,\n        &reboot_info,\n        &sched_info,\n        &set4_  info,\n        &symaddr_info,\n        &sysinfo_info,\n        &tasks_info,\n        &threads_info,\n        &tlb_info,\n        &uptime_info,\n        &version_info,\n        &zones_info,\n        &zone_info,\n#ifdef CONFIG_TEST\n        &test_info,\n        &bench_info,\n        &printbench_info,\n#endif\n#ifdef CONFIG_UDEBUG\n        &btrace_info,\n#endif\n        &pio_read_8_info,\n        &pio_read_16_info,\n        &pio_read_32_info,\n        &pio_write_8_info,\n        &pio_write_16_info,\n        &pio_write_32_info,\n        NULL\n};","baseline":1027,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"static cmd_info_t *basic_commands[] = {\n        &call0_info,\n        &mcall0_info,\n        &caches_info,\n        &call1_info,\n        &call2_info,\n        &call3_info,\n        &cont inue_info,\n        &cpus_info,\n        &desc_info,\n        &halt_info,\n        &help_info,\n        &ipc_info,\n        &kill_info,\n        &physmem_info,\n        &reboot_info,\n        &sched_info,\n        &set4_  info,\n        &symaddr_info,\n        &sysinfo_info,\n        &tasks_info,\n        &threads_info,\n        &tlb_info,\n        &uptime_info,\n        &version_info,\n        &zones_info,\n        &zone_info,\n#ifdef CONFIG_TEST\n        &test_info,\n        &bench_info,\n        &printbench_info,\n#endif\n#ifdef CONFIG_UDEBUG\n        &btrace_info,\n#endif\n        &pio_read_8_info,\n        &pio_read_16_info,\n        &pio_read_32_info,\n        &pio_write_8_info,\n        &pio_write_16_info,\n        &pio_write_32_info,\n        NULL\n};"},{"type":"arrow","version":462,"versionNonce":1157027519,"isDeleted":false,"id":"pXzcgBWtruVFBt9gVNn73","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13179.695321369338,"y":-125.11124165853221,"strokeColor":"#000000","backgroundColor":"transparent","width":1094.7910198345999,"height":293.0716984334488,"seed":1782398215,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"eHV1F1Qmq7T2wjJ2iDv1O","focus":0.6445288390509082,"gap":1.7222391764298663},"endBinding":{"elementId":"oFuWQdhWDz5OiudvnXcE2","focus":0.27107541900517984,"gap":6.944325764974565},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1094.7910198345999,293.0716984334488]]},{"type":"arrow","version":758,"versionNonce":1268136113,"isDeleted":false,"id":"bjECJhrVjDddtRIlFBJtU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":14446.014462479448,"y":-141.83340090797037,"strokeColor":"#000000","backgroundColor":"transparent","width":530.2574404223124,"height":195.38043301429684,"seed":1402825831,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"oFuWQdhWDz5OiudvnXcE2","focus":-0.9215276804248426,"gap":13.277706327892247},"endBinding":{"elementId":"d5UDxRyarXvY7AM7Vvm_A","focus":0.44711196803630526,"gap":10},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[530.2574404223124,-195.38043301429684]]},{"type":"text","version":308,"versionNonce":176924383,"isDeleted":false,"id":"d5UDxRyarXvY7AM7Vvm_A","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":14986.27190290176,"y":-551.833471752348,"strokeColor":"#000000","backgroundColor":"transparent","width":703,"height":504,"seed":1577615879,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"bjECJhrVjDddtRIlFBJtU","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":20,"fontFamily":3,"text":"/** Structure representing one kconsole command. */\r\ntypedef struct {\r\n\t/** Command list link. */\r\n\tlink_t link;\r\n\t/** This lock protects everything below. */\r\n\tSPINLOCK_DECLARE(lock);\r\n\t/** Command name. */\r\n\tconst char *name;\r\n\t/** Textual description. */\r\n\tconst char *description;\r\n\t/** Function implementing the command. */\r\n\tint (*func)(cmd_arg_t *);\r\n\t/** Number of arguments. */\r\n\tsize_t argc;\r\n\t/** Argument vector. */\r\n\tcmd_arg_t *argv;\r\n\t/** Function for printing detailed help. */\r\n\tvoid (*help)(void);\r\n\t/** Function for enumerating hints for arguments. */\r\n\thints_enum_func_t hints_enum;\r\n} cmd_info_t;","baseline":499,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"/** Structure representing one kconsole command. */\r\ntypedef struct {\r\n\t/** Command list link. */\r\n\tlink_t link;\r\n\t/** This lock protects everything below. */\r\n\tSPINLOCK_DECLARE(lock);\r\n\t/** Command name. */\r\n\tconst char *name;\r\n\t/** Textual description. */\r\n\tconst char *description;\r\n\t/** Function implementing the command. */\r\n\tint (*func)(cmd_arg_t *);\r\n\t/** Number of arguments. */\r\n\tsize_t argc;\r\n\t/** Argument vector. */\r\n\tcmd_arg_t *argv;\r\n\t/** Function for printing detailed help. */\r\n\tvoid (*help)(void);\r\n\t/** Function for enumerating hints for arguments. */\r\n\thints_enum_func_t hints_enum;\r\n} cmd_info_t;"},{"type":"text","version":144,"versionNonce":1921907345,"isDeleted":false,"id":"0Whxu5EzvgkgcDeoMN7aA","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12667.271572294654,"y":-270.1670248849023,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":43,"seed":70109223,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"zHat_WQVnVjjQa1ivczei","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"0xffffffff8016fd70","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff8016fd70"},{"type":"arrow","version":97,"versionNonce":1095856895,"isDeleted":false,"id":"zHat_WQVnVjjQa1ivczei","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12385.604854765357,"y":-254.0003836495507,"strokeColor":"#000000","backgroundColor":"transparent","width":273.33343505859375,"height":3.3333587646484375,"seed":1691391561,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"Mco1DCmn7gkdhNEbRliBK","focus":-0.3475852614883425,"gap":9.174747285360354},"endBinding":{"elementId":"0Whxu5EzvgkgcDeoMN7aA","focus":-0.017831943074547697,"gap":8.333282470703125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[273.33343505859375,3.3333587646484375]]},{"type":"text","version":58,"versionNonce":1290961009,"isDeleted":false,"id":"bSAgUuAtfYUAuipJZr4VO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13096.43813723606,"y":-277.33374241419915,"strokeColor":"#000000","backgroundColor":"transparent","width":149,"height":45,"seed":1266849607,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":1,"text":"cmd_list","baseline":32,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"cmd_list"},{"type":"text","version":222,"versionNonce":298367775,"isDeleted":false,"id":"TuxnYm28sPciuQewwiZFE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13513.104931059303,"y":-899.000459943496,"strokeColor":"#000000","backgroundColor":"transparent","width":802,"height":260,"seed":1121296743,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"mI9y664jn2HCELvZoBX1L","type":"arrow"},{"id":"BtOr-lJ7Q2G_KjD00ljAX","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"list_t cmd_list = {\n   .head = { \n           .prev = &(cmd_list).head,  \n           .next = &(cmd_list).head \n    } \n}","baseline":251,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"list_t cmd_list = {\n   .head = { \n           .prev = &(cmd_list).head,  \n           .next = &(cmd_list).head \n    } \n}"},{"type":"arrow","version":162,"versionNonce":1485523537,"isDeleted":false,"id":"mI9y664jn2HCELvZoBX1L","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13213.938213530006,"y":-297.33374241419915,"strokeColor":"#000000","backgroundColor":"transparent","width":280,"height":457.140144627328,"seed":1649757607,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":{"elementId":"TuxnYm28sPciuQewwiZFE","focus":0.8556956765527686,"gap":19.166717529296875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[280,-457.140144627328]]},{"type":"text","version":102,"versionNonce":1080164159,"isDeleted":false,"id":"99k-o9r9ucHDqEzRjNAgR","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13516.77146548313,"y":-1521.5004217965234,"strokeColor":"#000000","backgroundColor":"transparent","width":1856,"height":433,"seed":861734089,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"BtOr-lJ7Q2G_KjD00ljAX","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"/** Doubly linked list link. */\ntypedef struct __adt_list_link {\n        struct __adt_list_link *prev;  /**< Pointer to the previous item in the list. */\n        struct __adt_list_link *next;  /**< Pointer to the next item in the list. */\n} link_t;\n\n/** Doubly linked list. */\ntypedef struct {\n        link_t head;  /**< List head. Does not have any data. */\n} list_t; ","baseline":425,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"/** Doubly linked list link. */\ntypedef struct __adt_list_link {\n        struct __adt_list_link *prev;  /**< Pointer to the previous item in the list. */\n        struct __adt_list_link *next;  /**< Pointer to the next item in the list. */\n} link_t;\n\n/** Doubly linked list. */\ntypedef struct {\n        link_t head;  /**< List head. Does not have any data. */\n} list_t; "},{"type":"arrow","version":89,"versionNonce":1848629297,"isDeleted":false,"id":"BtOr-lJ7Q2G_KjD00ljAX","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13590.534408485535,"y":-912.3337424141992,"strokeColor":"#000000","backgroundColor":"transparent","width":36.275346423051815,"height":175,"seed":1273496361,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":{"elementId":"TuxnYm28sPciuQewwiZFE","focus":-0.8255495010196783,"gap":13.333282470703125},"endBinding":{"elementId":"99k-o9r9ucHDqEzRjNAgR","focus":0.7943876383282383,"gap":1.1666793823242188},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[36.275346423051815,-175]]},{"type":"text","version":131,"versionNonce":796770143,"isDeleted":false,"id":"PsrObyxRhSz97zqwQIhwG","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":15783.033306303434,"y":-603.4885907854327,"strokeColor":"#000000","backgroundColor":"transparent","width":1031,"height":120,"seed":385063239,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"Nk60fyMh6gAqU1t9xY79-","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":20,"fontFamily":3,"text":"/** Doubly linked list link. */\ntypedef struct __adt_list_link {\n\tstruct __adt_list_link *prev;  /**< Pointer to the previous item in the list. */\n\tstruct __adt_list_link *next;  /**< Pointer to the next item in the list. */\n} link_t;","baseline":115,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"/** Doubly linked list link. */\ntypedef struct __adt_list_link {\n\tstruct __adt_list_link *prev;  /**< Pointer to the previous item in the list. */\n\tstruct __adt_list_link *next;  /**< Pointer to the next item in the list. */\n} link_t;"},{"type":"arrow","version":240,"versionNonce":1606920721,"isDeleted":false,"id":"Nk60fyMh6gAqU1t9xY79-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":15141.699993315153,"y":-467.98859078543273,"strokeColor":"#000000","backgroundColor":"transparent","width":628.6665649414062,"height":69.8360026951566,"seed":98641319,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914515,"link":null,"startBinding":null,"endBinding":{"elementId":"PsrObyxRhSz97zqwQIhwG","focus":0.45203586284815,"gap":12.666748046875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[628.6665649414062,-69.8360026951566]]},{"type":"text","version":297,"versionNonce":560757631,"isDeleted":false,"id":"2D7PStKyWRXtGmO0iqESb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8180.81594300651,"y":5887.263505676708,"strokeColor":"#000000","backgroundColor":"transparent","width":697,"height":43,"seed":1192534158,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"H5gJHoZgaSMFnrjTanpF7","type":"arrow"},{"id":"eyHtT4ioqNoh--ciGQ6wK","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"exc_table_t exc_table[IVT_ITEMS];","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"exc_table_t exc_table[IVT_ITEMS];"},{"type":"text","version":340,"versionNonce":1447706609,"isDeleted":false,"id":"_fQTsp-QThthmJgONrarQ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7754.149835828775,"y":5895.596788147411,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":43,"seed":903639570,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"YL8nlfZ9cz4KOth9XU-gD","type":"arrow"}],"updated":1741338914515,"link":null,"fontSize":36,"fontFamily":3,"text":"0xffffffff8017d8a0","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff8017d8a0"},{"type":"arrow","version":218,"versionNonce":980333471,"isDeleted":false,"id":"YL8nlfZ9cz4KOth9XU-gD","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7534.149835828775,"y":5940.096940735301,"strokeColor":"#000000","backgroundColor":"transparent","width":206.6668701171875,"height":25,"seed":1240429518,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":{"elementId":"r0UeXAQl7cU_k_8IpJbsx","focus":0.19040902911685845,"gap":11.275865433733998},"endBinding":{"elementId":"_fQTsp-QThthmJgONrarQ","focus":0.5984387980186675,"gap":13.3331298828125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[206.6668701171875,-25]]},{"type":"arrow","version":220,"versionNonce":1874794961,"isDeleted":false,"id":"H5gJHoZgaSMFnrjTanpF7","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8336.578185552682,"y":5878.43071911665,"strokeColor":"#000000","backgroundColor":"transparent","width":725.7391816074723,"height":57.175797711652194,"seed":1361354066,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":{"elementId":"2D7PStKyWRXtGmO0iqESb","focus":-0.9381034286374436,"gap":8.832786560057684},"endBinding":{"elementId":"WOpzij_24OkpjCGBBgAk_","focus":0.3979014769548535,"gap":28.3331298828125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[725.7391816074723,-57.175797711652194]]},{"type":"text","version":115,"versionNonce":1119152063,"isDeleted":false,"id":"WOpzij_24OkpjCGBBgAk_","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9090.650497042967,"y":5675.0973603520015,"strokeColor":"#000000","backgroundColor":"transparent","width":1118,"height":390,"seed":666015630,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"H5gJHoZgaSMFnrjTanpF7","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef void (*iroutine_t)(unsigned int, istate_t *);\r\n\r\ntypedef struct {\r\n\tconst char *name;\r\n\tbool hot;\r\n\tiroutine_t handler;\r\n\tuint64_t cycles;\r\n\tuint64_t count;\r\n} exc_table_t;","baseline":381,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef void (*iroutine_t)(unsigned int, istate_t *);\r\n\r\ntypedef struct {\r\n\tconst char *name;\r\n\tbool hot;\r\n\tiroutine_t handler;\r\n\tuint64_t cycles;\r\n\tuint64_t count;\r\n} exc_table_t;"},{"type":"arrow","version":69,"versionNonce":490583985,"isDeleted":false,"id":"eyHtT4ioqNoh--ciGQ6wK","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8750.650344455076,"y":5873.43071911665,"strokeColor":"#000000","backgroundColor":"transparent","width":8.333282470703125,"height":93.33335876464844,"seed":1084522830,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":{"elementId":"2D7PStKyWRXtGmO0iqESb","focus":0.6406293335343729,"gap":13.832786560057684},"endBinding":{"elementId":"3oZXYRjy_DwdOxO5w9z_m","focus":-0.09606950540132472,"gap":11.166717529296875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-8.333282470703125,-93.33335876464844]]},{"type":"text","version":37,"versionNonce":677353439,"isDeleted":false,"id":"3oZXYRjy_DwdOxO5w9z_m","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8715.650497042967,"y":5725.930642822705,"strokeColor":"#000000","backgroundColor":"transparent","width":43,"height":43,"seed":735335118,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"eyHtT4ioqNoh--ciGQ6wK","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"64","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"64"},{"type":"text","version":77,"versionNonce":1089313169,"isDeleted":false,"id":"YZFfjgRAExY0zrxkQCJCk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10598.98362692578,"y":5320.930566528759,"strokeColor":"#000000","backgroundColor":"transparent","width":1520,"height":130,"seed":1617024786,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"_0PHaKm2t9mdn55ROqbP1","type":"arrow"},{"id":"NWwhJc4qVJ6IJAj91btBA","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"exc_init():\n    for (i = 0; i < IVT_ITEMS; i++)\n                exc_register(i, \"undef\", false, (iroutine_t) exc_undef);","baseline":121,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"exc_init():\n    for (i = 0; i < IVT_ITEMS; i++)\n                exc_register(i, \"undef\", false, (iroutine_t) exc_undef);"},{"type":"arrow","version":333,"versionNonce":1098859519,"isDeleted":false,"id":"_0PHaKm2t9mdn55ROqbP1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11110.528517530092,"y":5461.763925293408,"strokeColor":"#000000","backgroundColor":"transparent","width":4.088957798192496,"height":44.99992370605469,"seed":597741266,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":{"elementId":"YZFfjgRAExY0zrxkQCJCk","focus":0.3274367252627679,"gap":10.833358764648438},"endBinding":{"elementId":"zKv-RbzmHFK1jmTO2gbMm","focus":-0.35413111785776985,"gap":25.000076293945312},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[4.088957798192496,44.99992370605469]]},{"type":"text","version":146,"versionNonce":201736049,"isDeleted":false,"id":"zKv-RbzmHFK1jmTO2gbMm","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10830.650039279295,"y":5531.763925293408,"strokeColor":"#000000","backgroundColor":"transparent","width":954,"height":355,"seed":3910158,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"_0PHaKm2t9mdn55ROqbP1","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"    iroutine_t old = exc_table[n].handler;\n            // 注册新的 handler ， name ， hot \n        exc_table[n].handler = handler;\n        exc_table[n].name = name;\n        exc_table[n].hot = hot;\n        // 将该项的cycles和count设置为 0 \n        exc_table[n].cycles = 0;\n        exc_table[n].count = 0;","baseline":346,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"    iroutine_t old = exc_table[n].handler;\n            // 注册新的 handler ， name ， hot \n        exc_table[n].handler = handler;\n        exc_table[n].name = name;\n        exc_table[n].hot = hot;\n        // 将该项的cycles和count设置为 0 \n        exc_table[n].cycles = 0;\n        exc_table[n].count = 0;"},{"type":"arrow","version":85,"versionNonce":1309961247,"isDeleted":false,"id":"mz4hOjdVC73H6Bh4uBnxO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12010.650344455076,"y":5411.763925293408,"strokeColor":"#000000","backgroundColor":"transparent","width":275,"height":35,"seed":1798178194,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"LgQpzNmSkudHcxvN_vdTA","focus":0.4092948914704666,"gap":13.3331298828125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[275,-35]]},{"type":"text","version":105,"versionNonce":483338577,"isDeleted":false,"id":"LgQpzNmSkudHcxvN_vdTA","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12298.983474337889,"y":5230.097207764111,"strokeColor":"#000000","backgroundColor":"transparent","width":1413,"height":311,"seed":1226775058,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"mz4hOjdVC73H6Bh4uBnxO","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"_NO_TRACE static void exc_undef(unsigned int n, istate_t *istate)\r\n{\r\n\t// 如果异常来自用户空间，则调用fault_from_uspace函数处理。\r\n\tfault_if_from_uspace(istate, \"Unhandled exception %u.\", n);\r\n\t// 如果异常来自内核空间，则触发内核恐慌。\r\n\tpanic_badtrap(istate, n, \"Unhandled exception %u.\", n);\r\n}","baseline":303,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"_NO_TRACE static void exc_undef(unsigned int n, istate_t *istate)\r\n{\r\n\t// 如果异常来自用户空间，则调用fault_from_uspace函数处理。\r\n\tfault_if_from_uspace(istate, \"Unhandled exception %u.\", n);\r\n\t// 如果异常来自内核空间，则触发内核恐慌。\r\n\tpanic_badtrap(istate, n, \"Unhandled exception %u.\", n);\r\n}"},{"type":"arrow","version":536,"versionNonce":974098495,"isDeleted":false,"id":"NWwhJc4qVJ6IJAj91btBA","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10587.317367160154,"y":5383.9261284079275,"strokeColor":"#000000","backgroundColor":"transparent","width":50.897510004750075,"height":722.8378731794255,"seed":1772635026,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":{"elementId":"YZFfjgRAExY0zrxkQCJCk","focus":1.009456897221019,"gap":11.666259765625},"endBinding":{"elementId":"SFoZCbftIWLU-FL9ViEx5","focus":-0.952858166110946,"gap":6.666412353515625},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-50.897510004750075,722.8378731794255]]},{"type":"text","version":207,"versionNonce":1553979185,"isDeleted":false,"id":"SFoZCbftIWLU-FL9ViEx5","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10495.650573336912,"y":6113.430413940869,"strokeColor":"#000000","backgroundColor":"transparent","width":1662.864872546073,"height":665.555521647135,"seed":2131059790,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"NWwhJc4qVJ6IJAj91btBA","type":"arrow"},{"id":"fbsQwsT_4k5el0Qcejgoo","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36.861536583533635,"fontFamily":3,"text":"amd64_pre_mm_init():\n        write_msr(AMD_MSR_EFER, read_msr(AMD_MSR_EFER) | AMD_NXE);\n        cpu_setup_fpu();\n        pm_init();\n        write_rflags(read_rflags() & ~(RFLAGS_IOPL | RFLAGS_NT));\n        write_cr0(read_cr0() & ~CR0_AM);\n        if (pat_supported())\n                pat_set_mapping(false, true, true, PAT_TYPE_WRITE_COMBINING);\n        if (config.cpu_active == 1) {\n                interrupt_init();\n                bios_init();\n                i8259_init((i8259_t *) I8259_PIC0_BASE,\n                    (i8259_t *) I8259_PIC1_BASE, IVT_IRQBASE);\n                pic_ops = &i8259_pic_ops;\n        }","baseline":656.555521647135,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"amd64_pre_mm_init():\n        write_msr(AMD_MSR_EFER, read_msr(AMD_MSR_EFER) | AMD_NXE);\n        cpu_setup_fpu();\n        pm_init();\n        write_rflags(read_rflags() & ~(RFLAGS_IOPL | RFLAGS_NT));\n        write_cr0(read_cr0() & ~CR0_AM);\n        if (pat_supported())\n                pat_set_mapping(false, true, true, PAT_TYPE_WRITE_COMBINING);\n        if (config.cpu_active == 1) {\n                interrupt_init();\n                bios_init();\n                i8259_init((i8259_t *) I8259_PIC0_BASE,\n                    (i8259_t *) I8259_PIC1_BASE, IVT_IRQBASE);\n                pic_ops = &i8259_pic_ops;\n        }"},{"type":"arrow","version":1534,"versionNonce":525414495,"isDeleted":false,"id":"fbsQwsT_4k5el0Qcejgoo","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11029.014506973048,"y":6799.667317708332,"strokeColor":"#000000","backgroundColor":"transparent","width":1462.0991929190059,"height":3203.889083862303,"seed":102027748,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":{"elementId":"SFoZCbftIWLU-FL9ViEx5","focus":0.46729909087725346,"gap":20.681382120327726},"endBinding":{"elementId":"a47QUbsWIlpD8_LjO8DWu","focus":0.14367643783540263,"gap":10.27750651041606},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1462.0991929190059,3203.889083862303]]},{"type":"text","version":516,"versionNonce":501205265,"isDeleted":false,"id":"a47QUbsWIlpD8_LjO8DWu","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12013.984342302598,"y":10013.833908081051,"strokeColor":"#000000","backgroundColor":"transparent","width":887,"height":130,"seed":1286505060,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"fbsQwsT_4k5el0Qcejgoo","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"km_identity_init():\n        km_identity_arch_init();\n        config.identity_configured = true;","baseline":121,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"km_identity_init():\n        km_identity_arch_init();\n        config.identity_configured = true;"},{"type":"arrow","version":45,"versionNonce":128568447,"isDeleted":false,"id":"y0n0feHONirA4tfWUKt6e","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11092.317319597518,"y":6146.889531453448,"strokeColor":"#000000","backgroundColor":"transparent","width":36.666717529296875,"height":115,"seed":48744540,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[36.666717529296875,-115]]},{"type":"text","version":66,"versionNonce":2047246065,"isDeleted":false,"id":"h50a2jvEuAdghe6xYYol9","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11028.984037126815,"y":5971.889455159503,"strokeColor":"#000000","backgroundColor":"transparent","width":212,"height":43,"seed":1558788572,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"0xc0000080","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xc0000080"},{"type":"arrow","version":365,"versionNonce":1859773599,"isDeleted":false,"id":"O4Zx14V37m96bu74JvGKy","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11013.984037126815,"y":6221.889531453448,"strokeColor":"#000000","backgroundColor":"transparent","width":1548.1083889620986,"height":289.2057380128599,"seed":620158692,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"RJhXVnFZ3HBjQoyzr7Rjm","focus":0.29049881153559415,"gap":18.33343505859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1548.1083889620986,-289.2057380128599]]},{"type":"text","version":320,"versionNonce":1872459985,"isDeleted":false,"id":"RJhXVnFZ3HBjQoyzr7Rjm","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12578.983731951033,"y":5838.556477864581,"strokeColor":"#000000","backgroundColor":"transparent","width":907,"height":87,"seed":276956900,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"O4Zx14V37m96bu74JvGKy","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"write_cr0((read_cr0() & ~CR0_EM) | CR0_MP);\nwrite_cr4(read_cr4() | CR4_OSFXSR);","baseline":78,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"write_cr0((read_cr0() & ~CR0_EM) | CR0_MP);\nwrite_cr4(read_cr4() | CR4_OSFXSR);"},{"type":"text","version":313,"versionNonce":76675263,"isDeleted":false,"id":"kGsXsYqT-X2dXkSKnExMJ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13025.65029689244,"y":5728.556248982745,"strokeColor":"#000000","backgroundColor":"transparent","width":655,"height":87,"seed":102299612,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"CR0_MP      =          (1 << 1)\nCR0_EM      =          (1 << 2)","baseline":78,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"CR0_MP      =          (1 << 1)\nCR0_EM      =          (1 << 2)"},{"type":"text","version":140,"versionNonce":1077294769,"isDeleted":false,"id":"SbtiqCsiTVZhoxMfru1V6","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13027.595080421084,"y":5938.5561981201145,"strokeColor":"#000000","backgroundColor":"transparent","width":676,"height":43,"seed":1879150940,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"CR4_OSFXSR        =     (1 << 9)","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"CR4_OSFXSR        =     (1 << 9)"},{"type":"arrow","version":628,"versionNonce":779258079,"isDeleted":false,"id":"kaljhX-ppoKoGZ8fibcZ5","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10877.31683640253,"y":6269.11105855306,"strokeColor":"#000000","backgroundColor":"transparent","width":1838.3333841959611,"height":32.00139347388267,"seed":603032932,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"tVxW7Tt0yrHpCNbm7ApGZ","focus":0.871451220987019,"gap":26.66656494140625},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1838.3333841959611,32.00139347388267]]},{"type":"text","version":338,"versionNonce":243153041,"isDeleted":false,"id":"tVxW7Tt0yrHpCNbm7ApGZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12742.316785539897,"y":6199.66655476888,"strokeColor":"#000000","backgroundColor":"transparent","width":1955,"height":2081,"seed":1324008284,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"kaljhX-ppoKoGZ8fibcZ5","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"        descriptor_t *gdt_p = (descriptor_t *) gdtr.base;\n        tss_descriptor_t *tss_desc;\n\n        // Attention plz！！ 多处理器系统中，每一个CPU对应一个GDT和它的TSS。\n        // 所有CPU使用同一个IDT即可。\n        if (config.cpu_active == 1) {\n                // 当前 CPU是bootstrap CPU。\n                idt_init();\n                /*\n                         * NOTE: bootstrap CPU has statically allocated TSS, because\n                 * the heap hasn't been initialized so far.\n                 */\n                tss_p = &tss;\n        } else {\n                /*\n                 * We are going to use malloc, which may return\n                 * non boot-mapped pointer, initialize the CR3 register\n                 * ahead of page_init\n                 */\n                write_cr3((uintptr_t) AS_KERNEL->genarch.page_table);\n\n                tss_p = (tss_t *) malloc(sizeof(tss_t));\n                if (!tss_p)\n                        panic(\"Cannot allocate TSS.\");\n        }\n        // 清空 tss 段。\n        tss_initialize(tss_p);\n        // 设置 gdt中的 tss描述符。\n        tss_desc = (tss_descriptor_t *) (&gdt_p[TSS_DES]);\n        tss_desc->present = 1;\n        tss_desc->type = AR_TSS;\n        tss_desc->dpl = PL_KERNEL;\n        // 设置 gdt tss描述符的 base和limit。\n        gdt_tss_setbase(&gdt_p[TSS_DES], (uintptr_t) tss_p);\n        gdt_tss_setlimit(&gdt_p[TSS_DES], TSS_BASIC_SIZE - 1);\n        // 重新加载 gdtr和idtr。\n        gdtr_load(&gdtr);\n        idtr_load(&idtr);\n        /*\n         * As of this moment, the current CPU has its own GDT pointing\n         * to its own TSS. We just need to load the TR register.\n         */\n        // 加载 TR 寄存器。\n        // 加载任务状态段到TR寄存器中。\n        // 执行 ltr 指令。ltr 指令的作用是将指定的选择子加载到任务寄存器（TR）中。\n        // 使得当前 CPU 可以使用该 TSS 来管理任务的上下文切换。这是操作系统任务管理机制中的一个重要步骤。\n        tr_load(GDT_SELECTOR(TSS_DES));","baseline":2072,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"        descriptor_t *gdt_p = (descriptor_t *) gdtr.base;\n        tss_descriptor_t *tss_desc;\n\n        // Attention plz！！ 多处理器系统中，每一个CPU对应一个GDT和它的TSS。\n        // 所有CPU使用同一个IDT即可。\n        if (config.cpu_active == 1) {\n                // 当前 CPU是bootstrap CPU。\n                idt_init();\n                /*\n                         * NOTE: bootstrap CPU has statically allocated TSS, because\n                 * the heap hasn't been initialized so far.\n                 */\n                tss_p = &tss;\n        } else {\n                /*\n                 * We are going to use malloc, which may return\n                 * non boot-mapped pointer, initialize the CR3 register\n                 * ahead of page_init\n                 */\n                write_cr3((uintptr_t) AS_KERNEL->genarch.page_table);\n\n                tss_p = (tss_t *) malloc(sizeof(tss_t));\n                if (!tss_p)\n                        panic(\"Cannot allocate TSS.\");\n        }\n        // 清空 tss 段。\n        tss_initialize(tss_p);\n        // 设置 gdt中的 tss描述符。\n        tss_desc = (tss_descriptor_t *) (&gdt_p[TSS_DES]);\n        tss_desc->present = 1;\n        tss_desc->type = AR_TSS;\n        tss_desc->dpl = PL_KERNEL;\n        // 设置 gdt tss描述符的 base和limit。\n        gdt_tss_setbase(&gdt_p[TSS_DES], (uintptr_t) tss_p);\n        gdt_tss_setlimit(&gdt_p[TSS_DES], TSS_BASIC_SIZE - 1);\n        // 重新加载 gdtr和idtr。\n        gdtr_load(&gdtr);\n        idtr_load(&idtr);\n        /*\n         * As of this moment, the current CPU has its own GDT pointing\n         * to its own TSS. We just need to load the TR register.\n         */\n        // 加载 TR 寄存器。\n        // 加载任务状态段到TR寄存器中。\n        // 执行 ltr 指令。ltr 指令的作用是将指定的选择子加载到任务寄存器（TR）中。\n        // 使得当前 CPU 可以使用该 TSS 来管理任务的上下文切换。这是操作系统任务管理机制中的一个重要步骤。\n        tr_load(GDT_SELECTOR(TSS_DES));"},{"type":"text","version":127,"versionNonce":1242305791,"isDeleted":false,"id":"BmS_a-9BwX7qxvLoPcKvF","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":15369.871920631047,"y":6344.110697428387,"strokeColor":"#000000","backgroundColor":"transparent","width":1350,"height":3727,"seed":1059910372,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"g_nttDOv11skzNe4pFoUP","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"/*\r\n * This function takes care of proper setup of IDT and IDTR.\r\n */\r\nvoid idt_init(void)\r\n{\r\n\tidescriptor_t *d;\r\n\r\n\tfor (unsigned i = 0; i < IDT_ITEMS; i++) {\r\n\t\td = &idt[i];\r\n\r\n\t\td->unused = 0;\r\n\t\td->selector = GDT_SELECTOR(KTEXT_DES);\r\n\r\n\t\td->present = 1;\r\n\t\td->type = AR_INTERRUPT;  /* masking interrupt */\r\n\r\n\t\td->dpl = PL_KERNEL;\r\n\t\td->ist = 0;\r\n\t}\r\n\r\n\td = &idt[0];\r\n\tidt_setoffset(d++, (uintptr_t) &int_0);\r\n\tidt_setoffset(d++, (uintptr_t) &int_1);\r\n\tidt_setoffset(d++, (uintptr_t) &int_2);\r\n\tidt_setoffset(d++, (uintptr_t) &int_3);\r\n\tidt_setoffset(d++, (uintptr_t) &int_4);\r\n\tidt_setoffset(d++, (uintptr_t) &int_5);\r\n\tidt_setoffset(d++, (uintptr_t) &int_6);\r\n\tidt_setoffset(d++, (uintptr_t) &int_7);\r\n\tidt_setoffset(d++, (uintptr_t) &int_8);\r\n\tidt_setoffset(d++, (uintptr_t) &int_9);\r\n\tidt_setoffset(d++, (uintptr_t) &int_10);\r\n\tidt_setoffset(d++, (uintptr_t) &int_11);\r\n\tidt_setoffset(d++, (uintptr_t) &int_12);\r\n\tidt_setoffset(d++, (uintptr_t) &int_13);\r\n\tidt_setoffset(d++, (uintptr_t) &int_14);\r\n\tidt_setoffset(d++, (uintptr_t) &int_15);\r\n\tidt_setoffset(d++, (uintptr_t) &int_16);\r\n\tidt_setoffset(d++, (uintptr_t) &int_17);\r\n\tidt_setoffset(d++, (uintptr_t) &int_18);\r\n\tidt_setoffset(d++, (uintptr_t) &int_19);\r\n\tidt_setoffset(d++, (uintptr_t) &int_20);\r\n\tidt_setoffset(d++, (uintptr_t) &int_21);\r\n\tidt_setoffset(d++, (uintptr_t) &int_22);\r\n\tidt_setoffset(d++, (uintptr_t) &int_23);\r\n\tidt_setoffset(d++, (uintptr_t) &int_24);\r\n\tidt_setoffset(d++, (uintptr_t) &int_25);\r\n\tidt_setoffset(d++, (uintptr_t) &int_26);\r\n\tidt_setoffset(d++, (uintptr_t) &int_27);\r\n\tidt_setoffset(d++, (uintptr_t) &int_28);\r\n\tidt_setoffset(d++, (uintptr_t) &int_29);\r\n\tidt_setoffset(d++, (uintptr_t) &int_30);\r\n\tidt_setoffset(d++, (uintptr_t) &int_31);\r\n\tidt_setoffset(d++, (uintptr_t) &int_32);\r\n\tidt_setoffset(d++, (uintptr_t) &int_33);\r\n\tidt_setoffset(d++, (uintptr_t) &int_34);\r\n\tidt_setoffset(d++, (uintptr_t) &int_35);\r\n\tidt_setoffset(d++, (uintptr_t) &int_36);\r\n\tidt_setoffset(d++, (uintptr_t) &int_37);\r\n\tidt_setoffset(d++, (uintptr_t) &int_38);\r\n\tidt_setoffset(d++, (uintptr_t) &int_39);\r\n\tidt_setoffset(d++, (uintptr_t) &int_40);\r\n\tidt_setoffset(d++, (uintptr_t) &int_41);\r\n\tidt_setoffset(d++, (uintptr_t) &int_42);\r\n\tidt_setoffset(d++, (uintptr_t) &int_43);\r\n\tidt_setoffset(d++, (uintptr_t) &int_44);\r\n\tidt_setoffset(d++, (uintptr_t) &int_45);\r\n\tidt_setoffset(d++, (uintptr_t) &int_46);\r\n\tidt_setoffset(d++, (uintptr_t) &int_47);\r\n\tidt_setoffset(d++, (uintptr_t) &int_48);\r\n\tidt_setoffset(d++, (uintptr_t) &int_49);\r\n\tidt_setoffset(d++, (uintptr_t) &int_50);\r\n\tidt_setoffset(d++, (uintptr_t) &int_51);\r\n\tidt_setoffset(d++, (uintptr_t) &int_52);\r\n\tidt_setoffset(d++, (uintptr_t) &int_53);\r\n\tidt_setoffset(d++, (uintptr_t) &int_54);\r\n\tidt_setoffset(d++, (uintptr_t) &int_55);\r\n\tidt_setoffset(d++, (uintptr_t) &int_56);\r\n\tidt_setoffset(d++, (uintptr_t) &int_57);\r\n\tidt_setoffset(d++, (uintptr_t) &int_58);\r\n\tidt_setoffset(d++, (uintptr_t) &int_59);\r\n\tidt_setoffset(d++, (uintptr_t) &int_60);\r\n\tidt_setoffset(d++, (uintptr_t) &int_61);\r\n\tidt_setoffset(d++, (uintptr_t) &int_62);\r\n\tidt_setoffset(d++, (uintptr_t) &int_63);\r\n}","baseline":3718,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"/*\r\n * This function takes care of proper setup of IDT and IDTR.\r\n */\r\nvoid idt_init(void)\r\n{\r\n\tidescriptor_t *d;\r\n\r\n\tfor (unsigned i = 0; i < IDT_ITEMS; i++) {\r\n\t\td = &idt[i];\r\n\r\n\t\td->unused = 0;\r\n\t\td->selector = GDT_SELECTOR(KTEXT_DES);\r\n\r\n\t\td->present = 1;\r\n\t\td->type = AR_INTERRUPT;  /* masking interrupt */\r\n\r\n\t\td->dpl = PL_KERNEL;\r\n\t\td->ist = 0;\r\n\t}\r\n\r\n\td = &idt[0];\r\n\tidt_setoffset(d++, (uintptr_t) &int_0);\r\n\tidt_setoffset(d++, (uintptr_t) &int_1);\r\n\tidt_setoffset(d++, (uintptr_t) &int_2);\r\n\tidt_setoffset(d++, (uintptr_t) &int_3);\r\n\tidt_setoffset(d++, (uintptr_t) &int_4);\r\n\tidt_setoffset(d++, (uintptr_t) &int_5);\r\n\tidt_setoffset(d++, (uintptr_t) &int_6);\r\n\tidt_setoffset(d++, (uintptr_t) &int_7);\r\n\tidt_setoffset(d++, (uintptr_t) &int_8);\r\n\tidt_setoffset(d++, (uintptr_t) &int_9);\r\n\tidt_setoffset(d++, (uintptr_t) &int_10);\r\n\tidt_setoffset(d++, (uintptr_t) &int_11);\r\n\tidt_setoffset(d++, (uintptr_t) &int_12);\r\n\tidt_setoffset(d++, (uintptr_t) &int_13);\r\n\tidt_setoffset(d++, (uintptr_t) &int_14);\r\n\tidt_setoffset(d++, (uintptr_t) &int_15);\r\n\tidt_setoffset(d++, (uintptr_t) &int_16);\r\n\tidt_setoffset(d++, (uintptr_t) &int_17);\r\n\tidt_setoffset(d++, (uintptr_t) &int_18);\r\n\tidt_setoffset(d++, (uintptr_t) &int_19);\r\n\tidt_setoffset(d++, (uintptr_t) &int_20);\r\n\tidt_setoffset(d++, (uintptr_t) &int_21);\r\n\tidt_setoffset(d++, (uintptr_t) &int_22);\r\n\tidt_setoffset(d++, (uintptr_t) &int_23);\r\n\tidt_setoffset(d++, (uintptr_t) &int_24);\r\n\tidt_setoffset(d++, (uintptr_t) &int_25);\r\n\tidt_setoffset(d++, (uintptr_t) &int_26);\r\n\tidt_setoffset(d++, (uintptr_t) &int_27);\r\n\tidt_setoffset(d++, (uintptr_t) &int_28);\r\n\tidt_setoffset(d++, (uintptr_t) &int_29);\r\n\tidt_setoffset(d++, (uintptr_t) &int_30);\r\n\tidt_setoffset(d++, (uintptr_t) &int_31);\r\n\tidt_setoffset(d++, (uintptr_t) &int_32);\r\n\tidt_setoffset(d++, (uintptr_t) &int_33);\r\n\tidt_setoffset(d++, (uintptr_t) &int_34);\r\n\tidt_setoffset(d++, (uintptr_t) &int_35);\r\n\tidt_setoffset(d++, (uintptr_t) &int_36);\r\n\tidt_setoffset(d++, (uintptr_t) &int_37);\r\n\tidt_setoffset(d++, (uintptr_t) &int_38);\r\n\tidt_setoffset(d++, (uintptr_t) &int_39);\r\n\tidt_setoffset(d++, (uintptr_t) &int_40);\r\n\tidt_setoffset(d++, (uintptr_t) &int_41);\r\n\tidt_setoffset(d++, (uintptr_t) &int_42);\r\n\tidt_setoffset(d++, (uintptr_t) &int_43);\r\n\tidt_setoffset(d++, (uintptr_t) &int_44);\r\n\tidt_setoffset(d++, (uintptr_t) &int_45);\r\n\tidt_setoffset(d++, (uintptr_t) &int_46);\r\n\tidt_setoffset(d++, (uintptr_t) &int_47);\r\n\tidt_setoffset(d++, (uintptr_t) &int_48);\r\n\tidt_setoffset(d++, (uintptr_t) &int_49);\r\n\tidt_setoffset(d++, (uintptr_t) &int_50);\r\n\tidt_setoffset(d++, (uintptr_t) &int_51);\r\n\tidt_setoffset(d++, (uintptr_t) &int_52);\r\n\tidt_setoffset(d++, (uintptr_t) &int_53);\r\n\tidt_setoffset(d++, (uintptr_t) &int_54);\r\n\tidt_setoffset(d++, (uintptr_t) &int_55);\r\n\tidt_setoffset(d++, (uintptr_t) &int_56);\r\n\tidt_setoffset(d++, (uintptr_t) &int_57);\r\n\tidt_setoffset(d++, (uintptr_t) &int_58);\r\n\tidt_setoffset(d++, (uintptr_t) &int_59);\r\n\tidt_setoffset(d++, (uintptr_t) &int_60);\r\n\tidt_setoffset(d++, (uintptr_t) &int_61);\r\n\tidt_setoffset(d++, (uintptr_t) &int_62);\r\n\tidt_setoffset(d++, (uintptr_t) &int_63);\r\n}"},{"type":"arrow","version":194,"versionNonce":1009450609,"isDeleted":false,"id":"g_nttDOv11skzNe4pFoUP","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13254.316744849795,"y":6528.110799153646,"strokeColor":"#000000","backgroundColor":"transparent","width":2102.2216796875036,"height":126.40947706301995,"seed":1537215452,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"BmS_a-9BwX7qxvLoPcKvF","focus":0.9701753054307858,"gap":13.33349609375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[2102.2216796875036,-126.40947706301995]]},{"type":"arrow","version":81,"versionNonce":786373919,"isDeleted":false,"id":"5kise1g85xZ79I08W3hDJ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12999.31654139928,"y":6749.110758463548,"strokeColor":"#000000","backgroundColor":"transparent","width":315.55552164713663,"height":84.44447835286519,"seed":1642533860,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"iI4SMQO_rj3BCzdA20duY","focus":-0.12612614575653625,"gap":14.944580078127728},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-315.55552164713663,-84.44447835286519]]},{"type":"text","version":94,"versionNonce":134482001,"isDeleted":false,"id":"iI4SMQO_rj3BCzdA20duY","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12259.316693987177,"y":6602.721700032555,"strokeColor":"#000000","backgroundColor":"transparent","width":479,"height":47,"seed":811674204,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"5kise1g85xZ79I08W3hDJ","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"bsp使用静态的GDT表和tss段","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"bsp使用静态的GDT表和tss段"},{"type":"arrow","version":95,"versionNonce":1885086015,"isDeleted":false,"id":"zsEqAycVwp2q9oNXf31JD","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13010.427737281449,"y":7142.443990071617,"strokeColor":"#000000","backgroundColor":"transparent","width":384.44437662760356,"height":122.2222900390625,"seed":933806300,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-384.44437662760356,-122.2222900390625]]},{"type":"text","version":143,"versionNonce":1809897009,"isDeleted":false,"id":"obdoIp70ztsvLnn9dUPii","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12134.87211390905,"y":6967.1662801106795,"strokeColor":"#000000","backgroundColor":"transparent","width":645,"height":95,"seed":1444217564,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"ap会创建自己的GDT表，然后在此处创建\n自己的tss段","baseline":85,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"ap会创建自己的GDT表，然后在此处创建\n自己的tss段"},{"type":"arrow","version":124,"versionNonce":1608753503,"isDeleted":false,"id":"XOzwvTPuKxqp3NeMn7qdU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10662.649823869993,"y":6307.443837483721,"strokeColor":"#000000","backgroundColor":"transparent","width":348.88895670572856,"height":8.097365906138293,"seed":906109148,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"suM5uvsxGyE7v2sIhezjw","focus":0.4633774163838619,"gap":23.444580078125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-348.88895670572856,8.097365906138293]]},{"type":"text","version":112,"versionNonce":984147985,"isDeleted":false,"id":"suM5uvsxGyE7v2sIhezjw","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9749.31628708614,"y":6249.94383748372,"strokeColor":"#000000","backgroundColor":"transparent","width":541,"height":95,"seed":1852179428,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"XOzwvTPuKxqp3NeMn7qdU","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"清除（即设置为0）RFLAGS_IOPL\n和RFLAGS_NT这两个标志位","baseline":85,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"清除（即设置为0）RFLAGS_IOPL\n和RFLAGS_NT这两个标志位"},{"type":"arrow","version":98,"versionNonce":1321606527,"isDeleted":false,"id":"zC14EzsUI2_u6zpdfH0K-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10671.53898402624,"y":6345.221547444658,"strokeColor":"#000000","backgroundColor":"transparent","width":380,"height":60,"seed":837006692,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-380,60]]},{"type":"text","version":119,"versionNonce":2119417329,"isDeleted":false,"id":"nJTFpkezghHvGGGDzCv0x","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9949.316592261917,"y":6383.277170817054,"strokeColor":"#000000","backgroundColor":"transparent","width":325,"height":47,"seed":658377052,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"清除数据对齐检查位","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"清除数据对齐检查位"},{"type":"arrow","version":119,"versionNonce":272897439,"isDeleted":false,"id":"xItm3kCbWMWSORiPuWG5l","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10764.87231735957,"y":6411.888214111323,"strokeColor":"#000000","backgroundColor":"transparent","width":466.6668701171893,"height":124.05809968540689,"seed":725727068,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"P3v9ifdLSwUdFTCY98FAg","focus":-0.12415263814030618,"gap":24.88885498046875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-466.6668701171893,124.05809968540689]]},{"type":"text","version":89,"versionNonce":367581137,"isDeleted":false,"id":"P3v9ifdLSwUdFTCY98FAg","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9239.316592261912,"y":6507.443735758459,"strokeColor":"#000000","backgroundColor":"transparent","width":1034,"height":433,"seed":1735196516,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"xItm3kCbWMWSORiPuWG5l","type":"arrow"},{"id":"kEhQuv2kCp5W4Gkh2myJU","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"static inline bool pat_supported(void)\n{\n\tif (!has_cpuid())\n\t\treturn false;\n\n\tcpu_info_t info;\n\tcpuid(INTEL_CPUID_STANDARD, &info);\n\n\treturn (info.cpuid_edx & (1 << 16)) != 0;\n}","baseline":425,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"static inline bool pat_supported(void)\n{\n\tif (!has_cpuid())\n\t\treturn false;\n\n\tcpu_info_t info;\n\tcpuid(INTEL_CPUID_STANDARD, &info);\n\n\treturn (info.cpuid_edx & (1 << 16)) != 0;\n}"},{"type":"text","version":123,"versionNonce":999164351,"isDeleted":false,"id":"-tBq5FUExOHa3u60UUH9g","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7779.316185360874,"y":6188.554982503255,"strokeColor":"#000000","backgroundColor":"transparent","width":1245,"height":1213,"seed":814861156,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"kEhQuv2kCp5W4Gkh2myJU","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"/** Determine CPUID support\r\n*\r\n* @return 0 in EAX if CPUID is not support, 1 if supported.\r\n*\r\n*/\r\nFUNCTION_BEGIN(has_cpuid)\r\n\t/* Load RFLAGS */\r\n\tpushfq\r\n\tpopq %rax\r\n\tmovq %rax, %rdx\r\n\r\n\t/* Flip the ID bit */\r\n\txorl $RFLAGS_ID, %edx\r\n\r\n\t/* Store RFLAGS */\r\n\tpushq %rdx\r\n\tpopfq\r\n\tpushfq\r\n\r\n\t/* Get the ID bit again */\r\n\tpopq %rdx\r\n\tandl $RFLAGS_ID, %eax\r\n\tandl $RFLAGS_ID, %edx\r\n\r\n\t/* 0 if not supported, 1 if supported */\r\n\txorl %edx, %eax\r\n\tret\r\nFUNCTION_END(has_cpuid)","baseline":1205,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"/** Determine CPUID support\r\n*\r\n* @return 0 in EAX if CPUID is not support, 1 if supported.\r\n*\r\n*/\r\nFUNCTION_BEGIN(has_cpuid)\r\n\t/* Load RFLAGS */\r\n\tpushfq\r\n\tpopq %rax\r\n\tmovq %rax, %rdx\r\n\r\n\t/* Flip the ID bit */\r\n\txorl $RFLAGS_ID, %edx\r\n\r\n\t/* Store RFLAGS */\r\n\tpushq %rdx\r\n\tpopfq\r\n\tpushfq\r\n\r\n\t/* Get the ID bit again */\r\n\tpopq %rdx\r\n\tandl $RFLAGS_ID, %eax\r\n\tandl $RFLAGS_ID, %edx\r\n\r\n\t/* 0 if not supported, 1 if supported */\r\n\txorl %edx, %eax\r\n\tret\r\nFUNCTION_END(has_cpuid)"},{"type":"arrow","version":173,"versionNonce":327136689,"isDeleted":false,"id":"kEhQuv2kCp5W4Gkh2myJU","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9220.427635556187,"y":6582.292916034558,"strokeColor":"#000000","backgroundColor":"transparent","width":195.1114501953125,"height":191.66198790993803,"seed":1663252700,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":{"elementId":"P3v9ifdLSwUdFTCY98FAg","focus":-0.5243359699252937,"gap":18.888956705724922},"endBinding":{"elementId":"-tBq5FUExOHa3u60UUH9g","focus":-0.8348977621599275,"gap":1},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-195.1114501953125,-191.66198790993803]]},{"type":"arrow","version":279,"versionNonce":767850975,"isDeleted":false,"id":"VK7UvAlUovqzJxN1IEAP_","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9244.87201218379,"y":6807.4439392089835,"strokeColor":"#000000","backgroundColor":"transparent","width":611.1110432942678,"height":1247.1056748215806,"seed":795748324,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"G4hmfHmcDZjz-c9zdO5P5","focus":0.5610301935256385,"gap":21.55562337239644},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-611.1110432942678,1247.1056748215806]]},{"type":"text","version":183,"versionNonce":1514133393,"isDeleted":false,"id":"G4hmfHmcDZjz-c9zdO5P5","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7578.205345517125,"y":8020.777374267579,"strokeColor":"#000000","backgroundColor":"transparent","width":1034,"height":693,"seed":178844380,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"VK7UvAlUovqzJxN1IEAP_","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"FUNCTION_BEGIN(cpuid)\r\n\t/* Preserve %rbx across function calls */\r\n\tmovq %rbx, %r10\r\n\r\n\t/* Load the command into %eax */\r\n\tmovl %edi, %eax\r\n\r\n\tcpuid\r\n\tmovl %eax, 0(%rsi)\r\n\tmovl %ebx, 4(%rsi)\r\n\tmovl %ecx, 8(%rsi)\r\n\tmovl %edx, 12(%rsi)\r\n\r\n\tmovq %r10, %rbx\r\n\tret\r\nFUNCTION_END(cpuid)","baseline":685,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"FUNCTION_BEGIN(cpuid)\r\n\t/* Preserve %rbx across function calls */\r\n\tmovq %rbx, %r10\r\n\r\n\t/* Load the command into %eax */\r\n\tmovl %edi, %eax\r\n\r\n\tcpuid\r\n\tmovl %eax, 0(%rsi)\r\n\tmovl %ebx, 4(%rsi)\r\n\tmovl %ecx, 8(%rsi)\r\n\tmovl %edx, 12(%rsi)\r\n\r\n\tmovq %r10, %rbx\r\n\tret\r\nFUNCTION_END(cpuid)"},{"type":"arrow","version":222,"versionNonce":1274537471,"isDeleted":false,"id":"xj8YedDmqXWBsU7HiNkFw","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9244.87201218379,"y":6749.666229248046,"strokeColor":"#000000","backgroundColor":"transparent","width":635.389999249679,"height":897.7777099609375,"seed":1425780068,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"8DGn8ovyfWkbg-qsL3ISY","focus":0.6225726645389953,"gap":5.8323925146414695},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-635.389999249679,897.7777099609375]]},{"type":"text","version":322,"versionNonce":2086714737,"isDeleted":false,"id":"8DGn8ovyfWkbg-qsL3ISY","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7822.64962041947,"y":7652.999359130858,"strokeColor":"#000000","backgroundColor":"transparent","width":781,"height":260,"seed":1739894108,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"xj8YedDmqXWBsU7HiNkFw","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\r\n\tuint32_t cpuid_eax;\r\n\tuint32_t cpuid_ebx;\r\n\tuint32_t cpuid_ecx;\r\n\tuint32_t cpuid_edx;\r\n} __attribute__((packed)) cpu_info_t;","baseline":251,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\r\n\tuint32_t cpuid_eax;\r\n\tuint32_t cpuid_ebx;\r\n\tuint32_t cpuid_ecx;\r\n\tuint32_t cpuid_edx;\r\n} __attribute__((packed)) cpu_info_t;"},{"type":"text","version":133,"versionNonce":86560287,"isDeleted":false,"id":"MiFc288Xlf6Y8qlAXOnli","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9225.98325892858,"y":7002.999359130853,"strokeColor":"#000000","backgroundColor":"transparent","width":1025,"height":95,"seed":1401733860,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"PAT（Page Attribute Table）：一种用于内存管理的技术，\n允许操作系统为物理内存页设置属性，例如缓存模式。","baseline":85,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"PAT（Page Attribute Table）：一种用于内存管理的技术，\n允许操作系统为物理内存页设置属性，例如缓存模式。"},{"type":"text","version":154,"versionNonce":1495918417,"isDeleted":false,"id":"v0_473RDzSM-l2vfdccjD","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9194.872215634306,"y":7134.110198974603,"strokeColor":"#000000","backgroundColor":"transparent","width":1098,"height":240,"seed":348907620,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"R2L5LRPRTDWbpf_fujjdH","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36.76246513299575,"fontFamily":3,"text":"false：表示不启用PAT。\ntrue：表示页缓存禁用（PCD）。\ntrue：表示页写入类型（PWT）。\nPAT_TYPE_WRITE_COMBINING：表示设置写合并\n                        （Write Combining）内存类型。","baseline":231,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"false：表示不启用PAT。\ntrue：表示页缓存禁用（PCD）。\ntrue：表示页写入类型（PWT）。\nPAT_TYPE_WRITE_COMBINING：表示设置写合并\n                        （Write Combining）内存类型。"},{"type":"arrow","version":159,"versionNonce":340243007,"isDeleted":false,"id":"R2L5LRPRTDWbpf_fujjdH","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10827.09450567337,"y":6451.888061523431,"strokeColor":"#000000","backgroundColor":"transparent","width":597.7777099609375,"height":664.4444274902344,"seed":1746833884,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"v0_473RDzSM-l2vfdccjD","focus":0.5502478238397347,"gap":17.7777099609375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-597.7777099609375,664.4444274902344]]},{"type":"arrow","version":211,"versionNonce":2062734641,"isDeleted":false,"id":"Lgyv_PQmfK0UtDTcPR6c4","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10835.983462379096,"y":6536.332285563149,"strokeColor":"#000000","backgroundColor":"transparent","width":559.5507536687455,"height":1193.333333333334,"seed":361558236,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"v9Wuwo-ZqEcUXMbn5aLdc","focus":-0.03587615776408245,"gap":21.11104329427144},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-559.5507536687455,1193.333333333334]]},{"type":"text","version":183,"versionNonce":37032543,"isDeleted":false,"id":"v9Wuwo-ZqEcUXMbn5aLdc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8982.650230771022,"y":7750.776662190754,"strokeColor":"#000000","backgroundColor":"transparent","width":1854,"height":1726,"seed":304882524,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"Lgyv_PQmfK0UtDTcPR6c4","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"// 中断初始化。。\nvoid interrupt_init(void)\n{\n\tunsigned int i;\n\n\t// 重新注册 exc_table\n\tfor (i = 0; i < IVT_ITEMS; i++)\n\t\texc_register(i, \"null\", false, (iroutine_t) null_interrupt);\n\n\t// IRQ_COUNT = 16\n\t// IRQ_BASE  = 32\n\t// 这里只是将处理函数设置为了 irq_interrupt ， 但是真正的中断处理要在irq_init之后才可以。\n\tfor (i = 0; i < IRQ_COUNT; i++) {\n\t\tif ((i != IRQ_PIC0_SPUR) && (i != IRQ_PIC1_SPUR) &&\n\t\t    (i != IRQ_PIC1))\n\t\t\texc_register(IVT_IRQBASE + i, \"irq\", true,\n\t\t\t    (iroutine_t) irq_interrupt);\n\t}\n\n\t// VECTOR_DE：除法错误（Division Error）。\n\t// VECTOR_NM：非屏蔽中断（Non - Maskable Interrupt）。\n\t// VECTOR_SS：栈段错误（Stack Segment Fault）。\n\t// VECTOR_GP：通用保护错误（General Protection Fault）。\n\t// VECTOR_PIC0_SPUR 和 VECTOR_PIC1_SPUR：主从 PIC 的 spurious 中断。\n\texc_register(VECTOR_DE, \"de_fault\", true, (iroutine_t) de_fault);\n\texc_register(VECTOR_NM, \"nm_fault\", true, (iroutine_t) nm_fault);\n\texc_register(VECTOR_SS, \"ss_fault\", true, (iroutine_t) ss_fault);\n\texc_register(VECTOR_GP, \"gp_fault\", true, (iroutine_t) gp_fault);\n\texc_register(VECTOR_PIC0_SPUR, \"pic0_spurious\", true,\n\t    (iroutine_t) pic_spurious);\n\texc_register(VECTOR_PIC1_SPUR, \"pic1_spurious\", true,\n\t    (iroutine_t) pic_spurious);\n\n#ifdef CONFIG_SMP\n\t// 在多处理器系统中同步 TLB（Translation Lookaside Buffer）\n\texc_register(VECTOR_TLB_SHOOTDOWN_IPI, \"tlb_shootdown\", true,\n\t    (iroutine_t) tlb_shootdown_ipi);\n#endif\n}","baseline":1717,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"// 中断初始化。。\nvoid interrupt_init(void)\n{\n\tunsigned int i;\n\n\t// 重新注册 exc_table\n\tfor (i = 0; i < IVT_ITEMS; i++)\n\t\texc_register(i, \"null\", false, (iroutine_t) null_interrupt);\n\n\t// IRQ_COUNT = 16\n\t// IRQ_BASE  = 32\n\t// 这里只是将处理函数设置为了 irq_interrupt ， 但是真正的中断处理要在irq_init之后才可以。\n\tfor (i = 0; i < IRQ_COUNT; i++) {\n\t\tif ((i != IRQ_PIC0_SPUR) && (i != IRQ_PIC1_SPUR) &&\n\t\t    (i != IRQ_PIC1))\n\t\t\texc_register(IVT_IRQBASE + i, \"irq\", true,\n\t\t\t    (iroutine_t) irq_interrupt);\n\t}\n\n\t// VECTOR_DE：除法错误（Division Error）。\n\t// VECTOR_NM：非屏蔽中断（Non - Maskable Interrupt）。\n\t// VECTOR_SS：栈段错误（Stack Segment Fault）。\n\t// VECTOR_GP：通用保护错误（General Protection Fault）。\n\t// VECTOR_PIC0_SPUR 和 VECTOR_PIC1_SPUR：主从 PIC 的 spurious 中断。\n\texc_register(VECTOR_DE, \"de_fault\", true, (iroutine_t) de_fault);\n\texc_register(VECTOR_NM, \"nm_fault\", true, (iroutine_t) nm_fault);\n\texc_register(VECTOR_SS, \"ss_fault\", true, (iroutine_t) ss_fault);\n\texc_register(VECTOR_GP, \"gp_fault\", true, (iroutine_t) gp_fault);\n\texc_register(VECTOR_PIC0_SPUR, \"pic0_spurious\", true,\n\t    (iroutine_t) pic_spurious);\n\texc_register(VECTOR_PIC1_SPUR, \"pic1_spurious\", true,\n\t    (iroutine_t) pic_spurious);\n\n#ifdef CONFIG_SMP\n\t// 在多处理器系统中同步 TLB（Translation Lookaside Buffer）\n\texc_register(VECTOR_TLB_SHOOTDOWN_IPI, \"tlb_shootdown\", true,\n\t    (iroutine_t) tlb_shootdown_ipi);\n#endif\n}"},{"type":"text","version":495,"versionNonce":891488017,"isDeleted":false,"id":"mb0RKL6ft8q8XbVtGqu-e","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7115.983462379097,"y":8915.221140543621,"strokeColor":"#000000","backgroundColor":"transparent","width":1455,"height":217,"seed":1053187164,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"ENTFYm-u5kt9nDLgfdwce","type":"arrow"},{"id":"w9t4icLvHZZ-oTFQb8Gwk","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"static void null_interrupt(unsigned int n, istate_t *istate)\n{\n\tfault_if_from_uspace(istate, \"Unserviced interrupt: %u.\", n);\n\tpanic_badtrap(istate, n, \"Unserviced interrupt.\");\n}","baseline":208,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"static void null_interrupt(unsigned int n, istate_t *istate)\n{\n\tfault_if_from_uspace(istate, \"Unserviced interrupt: %u.\", n);\n\tpanic_badtrap(istate, n, \"Unserviced interrupt.\");\n}"},{"type":"arrow","version":109,"versionNonce":1740729983,"isDeleted":false,"id":"w9t4icLvHZZ-oTFQb8Gwk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9020.428042457217,"y":8109.665618896484,"strokeColor":"#000000","backgroundColor":"transparent","width":566.6666666666661,"height":795.5556233723964,"seed":227187172,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"mb0RKL6ft8q8XbVtGqu-e","focus":0.6534323330582442,"gap":9.99989827474019},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-566.6666666666661,795.5556233723964]]},{"type":"arrow","version":271,"versionNonce":36830449,"isDeleted":false,"id":"O9ioRIM3qdaA_15gKF3OE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9038.7606128511,"y":8452.165262858074,"strokeColor":"#000000","backgroundColor":"transparent","width":569.1858330295327,"height":916.9999237060547,"seed":46504676,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"_Pb3h9gq85L6Lg8ErdwCu","focus":0.2570572160753258,"gap":11.33343505859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-569.1858330295327,916.9999237060547]]},{"type":"text","version":185,"versionNonce":1873626783,"isDeleted":false,"id":"_Pb3h9gq85L6Lg8ErdwCu","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6908.76076543899,"y":9380.498621622723,"strokeColor":"#000000","backgroundColor":"transparent","width":1582,"height":1434,"seed":1465258468,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"O9ioRIM3qdaA_15gKF3OE","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"static void irq_interrupt(unsigned int n, istate_t *istate)\r\n{\r\n\tassert(n >= IVT_IRQBASE);\r\n\r\n\tunsigned int inum = n - IVT_IRQBASE;\r\n\tbool ack = false;\r\n\tassert(inum < IRQ_COUNT);\r\n\tassert(inum != IRQ_PIC1);\r\n\r\n\t// 查找对应 IRQ\r\n\tirq_t *irq = irq_dispatch_and_lock(inum);\r\n\tif (irq) {\r\n\t\t/*\r\n\t\t * The IRQ handler was found.\r\n\t\t */\r\n\r\n\t\tif (irq->preack) {\r\n\t\t\t/* Send EOI before processing the interrupt */\r\n\t\t\tpic_ops->eoi(inum);\r\n\t\t\tack = true;\r\n\t\t}\r\n\t\tirq->handler(irq);\r\n\t\tirq_spinlock_unlock(&irq->lock, false);\r\n\t} else {\r\n#ifdef CONFIG_DEBUG\r\n\t\tlog(LF_ARCH, LVL_DEBUG, \"cpu%u: unhandled IRQ %u\", CPU->id,\r\n\t\t    inum);\r\n#endif\r\n\t}\r\n\r\n\tif (!ack)\r\n\t\tpic_ops->eoi(inum);\r\n}","baseline":1425,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"static void irq_interrupt(unsigned int n, istate_t *istate)\r\n{\r\n\tassert(n >= IVT_IRQBASE);\r\n\r\n\tunsigned int inum = n - IVT_IRQBASE;\r\n\tbool ack = false;\r\n\tassert(inum < IRQ_COUNT);\r\n\tassert(inum != IRQ_PIC1);\r\n\r\n\t// 查找对应 IRQ\r\n\tirq_t *irq = irq_dispatch_and_lock(inum);\r\n\tif (irq) {\r\n\t\t/*\r\n\t\t * The IRQ handler was found.\r\n\t\t */\r\n\r\n\t\tif (irq->preack) {\r\n\t\t\t/* Send EOI before processing the interrupt */\r\n\t\t\tpic_ops->eoi(inum);\r\n\t\t\tack = true;\r\n\t\t}\r\n\t\tirq->handler(irq);\r\n\t\tirq_spinlock_unlock(&irq->lock, false);\r\n\t} else {\r\n#ifdef CONFIG_DEBUG\r\n\t\tlog(LF_ARCH, LVL_DEBUG, \"cpu%u: unhandled IRQ %u\", CPU->id,\r\n\t\t    inum);\r\n#endif\r\n\t}\r\n\r\n\tif (!ack)\r\n\t\tpic_ops->eoi(inum);\r\n}"},{"type":"text","version":261,"versionNonce":564606673,"isDeleted":false,"id":"t-DlncxQVvYOu9zBroIFJ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":4730.427482968287,"y":8708.832056681316,"strokeColor":"#000000","backgroundColor":"transparent","width":1519,"height":1863,"seed":1721224804,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"minUqZhKZcqtcpZCIcTyg","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"/** Structure representing one device IRQ.\r\n *\r\n * If one device has multiple interrupts, there will be multiple irq_t\r\n * instantions.\r\n */\r\ntypedef struct irq {\r\n\t/** Hash table link. */\r\n\tht_link_t link;\r\n\r\n\t/** Lock protecting everything in this structure\r\n\t *  except the link member. When both the IRQ\r\n\t *  hash table lock and this lock are to be acquired,\r\n\t *  this lock must not be taken first.\r\n\t */\r\n\tIRQ_SPINLOCK_DECLARE(lock);\r\n\r\n\t/** Send EOI before processing the interrupt.\r\n\t *  This is essential for timer interrupt which\r\n\t *  has to be acknowledged before doing preemption\r\n\t *  to make sure another timer interrupt will\r\n\t *  be eventually generated.\r\n\t */\r\n\tbool preack;\r\n\r\n\t/** Actual IRQ number. -1 if not yet assigned. */\r\n\tinr_t inr;\r\n\t/** Trigger level of the IRQ. */\r\n\tirq_trigger_t trigger;\r\n\t/** Claim ownership of the IRQ. */\r\n\tirq_ownership_t (*claim)(struct irq *);\r\n\t/** Handler for this IRQ and device. */\r\n\tirq_handler_t handler;\r\n\t/** Instance argument for the handler and the claim function. */\r\n\tvoid *instance;\r\n\r\n\t/** Clear interrupt routine. */\r\n\tcir_t cir;\r\n\t/** First argument to the clear interrupt routine. */\r\n\tvoid *cir_arg;\r\n\r\n\t/** Notification configuration structure. */\r\n\tipc_notif_cfg_t notif_cfg;\r\n} irq_t;","baseline":1855,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"/** Structure representing one device IRQ.\r\n *\r\n * If one device has multiple interrupts, there will be multiple irq_t\r\n * instantions.\r\n */\r\ntypedef struct irq {\r\n\t/** Hash table link. */\r\n\tht_link_t link;\r\n\r\n\t/** Lock protecting everything in this structure\r\n\t *  except the link member. When both the IRQ\r\n\t *  hash table lock and this lock are to be acquired,\r\n\t *  this lock must not be taken first.\r\n\t */\r\n\tIRQ_SPINLOCK_DECLARE(lock);\r\n\r\n\t/** Send EOI before processing the interrupt.\r\n\t *  This is essential for timer interrupt which\r\n\t *  has to be acknowledged before doing preemption\r\n\t *  to make sure another timer interrupt will\r\n\t *  be eventually generated.\r\n\t */\r\n\tbool preack;\r\n\r\n\t/** Actual IRQ number. -1 if not yet assigned. */\r\n\tinr_t inr;\r\n\t/** Trigger level of the IRQ. */\r\n\tirq_trigger_t trigger;\r\n\t/** Claim ownership of the IRQ. */\r\n\tirq_ownership_t (*claim)(struct irq *);\r\n\t/** Handler for this IRQ and device. */\r\n\tirq_handler_t handler;\r\n\t/** Instance argument for the handler and the claim function. */\r\n\tvoid *instance;\r\n\r\n\t/** Clear interrupt routine. */\r\n\tcir_t cir;\r\n\t/** First argument to the clear interrupt routine. */\r\n\tvoid *cir_arg;\r\n\r\n\t/** Notification configuration structure. */\r\n\tipc_notif_cfg_t notif_cfg;\r\n} irq_t;"},{"type":"arrow","version":244,"versionNonce":413735615,"isDeleted":false,"id":"minUqZhKZcqtcpZCIcTyg","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6928.760918026881,"y":9832.165568033855,"strokeColor":"#000000","backgroundColor":"transparent","width":665,"height":1097.156943990718,"seed":955261796,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"t-DlncxQVvYOu9zBroIFJ","focus":-0.998842606678177,"gap":14.33343505859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-665,-1097.156943990718]]},{"type":"text","version":102,"versionNonce":1981428913,"isDeleted":false,"id":"IKmmMyUQ3k-zltVLKJvfT","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10155.42819504511,"y":8598.832667032879,"strokeColor":"#000000","backgroundColor":"transparent","width":43,"height":173,"seed":630712540,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"0\n7\n12\n13","baseline":165,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0\n7\n12\n13"},{"type":"text","version":138,"versionNonce":928344799,"isDeleted":false,"id":"W73dLFIHp2qoYQMIfimRc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10397.094454810735,"y":8770.49915568034,"strokeColor":"#000000","backgroundColor":"transparent","width":106,"height":43,"seed":755521380,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"39 47","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"39 47"},{"type":"arrow","version":418,"versionNonce":590509713,"isDeleted":false,"id":"iMP55-475-YqejED4HWCq","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9667.094759986516,"y":9056.332590738934,"strokeColor":"#000000","backgroundColor":"transparent","width":344.0546871897004,"height":631.6667175292969,"seed":340766308,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"T9Svq1I7sUdW1ZWTIxSPr","focus":-0.42347616342362393,"gap":14.16656494140625},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-344.0546871897004,631.6667175292969]]},{"type":"text","version":273,"versionNonce":943896319,"isDeleted":false,"id":"T9Svq1I7sUdW1ZWTIxSPr","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8767.094264075871,"y":9702.165873209637,"strokeColor":"#000000","backgroundColor":"transparent","width":1666,"height":433,"seed":1817413476,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"iMP55-475-YqejED4HWCq","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"static void pic_spurious(unsigned int n, istate_t *istate)\n{\n        unsigned int inum = n - IVT_IRQBASE;\n        if (!pic_ops->is_spurious(inum)) {\n                /* This is actually not a spurious IRQ, so proceed as usual. */\n                irq_interrupt(n, istate);\n                return;\n        }\n        pic_ops->handle_spurious(n);\n}","baseline":425,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"static void pic_spurious(unsigned int n, istate_t *istate)\n{\n        unsigned int inum = n - IVT_IRQBASE;\n        if (!pic_ops->is_spurious(inum)) {\n                /* This is actually not a spurious IRQ, so proceed as usual. */\n                irq_interrupt(n, istate);\n                return;\n        }\n        pic_ops->handle_spurious(n);\n}"},{"type":"arrow","version":240,"versionNonce":1806138481,"isDeleted":false,"id":"_G4l1IFkdEPkXuTcJpAj6","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9627.094607398625,"y":9794.666178385418,"strokeColor":"#000000","backgroundColor":"transparent","width":256.6668701171875,"height":198.33343505859375,"seed":1320603620,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"q8bxXHWMxGcP4yIq-DO3x","focus":0.49115612583068347,"gap":8.33343505859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[256.6668701171875,-198.33343505859375]]},{"type":"text","version":140,"versionNonce":569474847,"isDeleted":false,"id":"q8bxXHWMxGcP4yIq-DO3x","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9892.094912574406,"y":9570.499384562176,"strokeColor":"#000000","backgroundColor":"transparent","width":43,"height":43,"seed":1554658268,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"_G4l1IFkdEPkXuTcJpAj6","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"32","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"32"},{"type":"arrow","version":248,"versionNonce":1329645137,"isDeleted":false,"id":"xzxaHX1gSzRsT-KWQGBh9","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10836.816821143742,"y":6577.999511718754,"strokeColor":"#000000","backgroundColor":"transparent","width":395.5555216471348,"height":3984.4443766276054,"seed":435685724,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914516,"link":null,"startBinding":null,"endBinding":{"elementId":"IJyw7Kcn9Ac8IHvW0wtoM","focus":0.9894232841223147,"gap":24.55562337239644},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-395.5555216471348,3984.4443766276054]]},{"type":"text","version":39,"versionNonce":1456620351,"isDeleted":false,"id":"IJyw7Kcn9Ac8IHvW0wtoM","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9105.705676124211,"y":10475.777323404951,"strokeColor":"#000000","backgroundColor":"transparent","width":1311,"height":406,"seed":1722206308,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"xzxaHX1gSzRsT-KWQGBh9","type":"arrow"},{"id":"C84RMtQp3ur66ZQgK3vSY","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"void bios_init(void)\r\n{\r\n\t/* Copy the EBDA address out from BIOS Data Area */\r\n\t// x86 架构中，内存地址被分为段（Segment）和偏移（Offset）。\r\n\t// 段地址和偏移地址结合在一起形成一个物理地址。\r\n\t// 具体来说，段地址需要乘以 16（即左移 4 位）\r\n\t// 取出该地址的值，乘以16得到EBDA 的物理地址。\r\n\tebda = *((uint16_t *) BIOS_EBDA_PTR) * 0x10U;\r\n}","baseline":397,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"void bios_init(void)\r\n{\r\n\t/* Copy the EBDA address out from BIOS Data Area */\r\n\t// x86 架构中，内存地址被分为段（Segment）和偏移（Offset）。\r\n\t// 段地址和偏移地址结合在一起形成一个物理地址。\r\n\t// 具体来说，段地址需要乘以 16（即左移 4 位）\r\n\t// 取出该地址的值，乘以16得到EBDA 的物理地址。\r\n\tebda = *((uint16_t *) BIOS_EBDA_PTR) * 0x10U;\r\n}"},{"type":"text","version":170,"versionNonce":1758843953,"isDeleted":false,"id":"zoNQWyGgM0Tm-kTglO7M4","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":7919.038856869654,"y":11099.110249837237,"strokeColor":"#000000","backgroundColor":"transparent","width":1070,"height":181,"seed":1808129124,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"C84RMtQp3ur66ZQgK3vSY","type":"arrow"}],"updated":1741338914516,"link":null,"fontSize":36,"fontFamily":3,"text":"// 定义了一个宏，指向 BDA 中存储 EBDA 段地址的位置 0x40E\n#define BIOS_EBDA_PTR  0x40eU\n// 存储 EBDA 的物理地址\nuintptr_t ebda = 0;","baseline":173,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"// 定义了一个宏，指向 BDA 中存储 EBDA 段地址的位置 0x40E\n#define BIOS_EBDA_PTR  0x40eU\n// 存储 EBDA 的物理地址\nuintptr_t ebda = 0;"},{"type":"arrow","version":219,"versionNonce":390431583,"isDeleted":false,"id":"C84RMtQp3ur66ZQgK3vSY","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9783.935548852302,"y":10906.221852620443,"strokeColor":"#000000","backgroundColor":"transparent","width":1658.2779993326149,"height":185.1105855305941,"seed":206931676,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":{"elementId":"IJyw7Kcn9Ac8IHvW0wtoM","focus":-0.8352978890021884,"gap":24.444529215492366},"endBinding":{"elementId":"zoNQWyGgM0Tm-kTglO7M4","focus":-0.8982389148940493,"gap":7.777811686199129},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1658.2779993326149,185.1105855305941]]},{"type":"text","version":101,"versionNonce":206448145,"isDeleted":false,"id":"vZfu6J2kDDQCBeAdOT1jF","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8555.149340674998,"y":11141.60999552409,"strokeColor":"#000000","backgroundColor":"transparent","width":581,"height":47,"seed":345453668,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"表示BDA中存储EBDA段地址的偏移量","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"表示BDA中存储EBDA段地址的偏移量"},{"type":"arrow","version":47,"versionNonce":1134280575,"isDeleted":false,"id":"iAaPjB-rkxx_JPt9COb98","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9558.482775733592,"y":10845.776713053387,"strokeColor":"#000000","backgroundColor":"transparent","width":3.333282470703125,"height":168.33335876464844,"seed":1401295580,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"N2RYLYzASO8uUEIULa6c6","focus":-0.1278861492729888,"gap":6.6666412353515625},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[3.333282470703125,168.33335876464844]]},{"type":"text","version":72,"versionNonce":614546417,"isDeleted":false,"id":"N2RYLYzASO8uUEIULa6c6","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9238.482623145701,"y":11020.776713053387,"strokeColor":"#000000","backgroundColor":"transparent","width":743,"height":47,"seed":962717668,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"iAaPjB-rkxx_JPt9COb98","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"读取 0x40e 处的16位值，这是EBDA的段地址","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"读取 0x40e 处的16位值，这是EBDA的段地址"},{"type":"arrow","version":161,"versionNonce":1578465183,"isDeleted":false,"id":"FUuVI2elHD4z1pJqQKQuH","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10011.816058204295,"y":10865.776713053387,"strokeColor":"#000000","backgroundColor":"transparent","width":441.93595296605235,"height":385.0001525878906,"seed":1092061276,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"lHPxe5IyhNYdJ4ZkMU0AN","focus":-0.28612631248347115,"gap":10},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-441.93595296605235,385.0001525878906]]},{"type":"text","version":101,"versionNonce":1373017553,"isDeleted":false,"id":"lHPxe5IyhNYdJ4ZkMU0AN","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9241.815905616404,"y":11260.776865641277,"strokeColor":"#000000","backgroundColor":"transparent","width":833,"height":47,"seed":718094684,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"FUuVI2elHD4z1pJqQKQuH","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"将段地址左移4位（乘以16），得到EBDA的物理地址","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"将段地址左移4位（乘以16），得到EBDA的物理地址"},{"type":"rectangle","version":155,"versionNonce":1289956287,"isDeleted":false,"id":"Qdt699ri6dt7WcP_I6EPS","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10336.648425147654,"y":5210.944269816082,"strokeColor":"#000000","backgroundColor":"transparent","width":1816.6668701171875,"height":286.66664123535156,"seed":1262670684,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null},{"type":"rectangle","version":157,"versionNonce":1191556017,"isDeleted":false,"id":"nbdVtULdjHu5DrEUmu-td","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10423.31499008906,"y":6070.944346110027,"strokeColor":"#000000","backgroundColor":"transparent","width":1770.0003051757812,"height":753.3334350585938,"seed":776597468,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null},{"type":"rectangle","version":99,"versionNonce":1545952223,"isDeleted":false,"id":"6-LEXY0NzwTpxL2oLWXv2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11923.315295264842,"y":9917.610911051434,"strokeColor":"#000000","backgroundColor":"transparent","width":1080,"height":346.6668701171875,"seed":762588380,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"SgYAgCZ2LY5Myv_SDefPH","type":"arrow"}],"updated":1741338914517,"link":null},{"type":"arrow","version":368,"versionNonce":1750472081,"isDeleted":false,"id":"iNEICd4rdh364TxsBMj2k","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11148.870511736195,"y":6744.277577718099,"strokeColor":"#000000","backgroundColor":"transparent","width":774.2223307291661,"height":4839.779927749364,"seed":2104629084,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"ETkTzZrAC0Xsur8I4HBZh","focus":0.9788903007603024,"gap":21.44458007812682},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-774.2223307291661,4839.779927749364]]},{"type":"text","version":188,"versionNonce":2146207743,"isDeleted":false,"id":"ETkTzZrAC0Xsur8I4HBZh","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9340.203600928902,"y":11441.611012776691,"strokeColor":"#000000","backgroundColor":"transparent","width":1013,"height":347,"seed":588538076,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"iNEICd4rdh364TxsBMj2k","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"pic_ops_t i8259_pic_ops = {\r\n\t.get_name = i8259_get_name,\r\n\t.enable_irqs = i8259_enable_irqs,\r\n\t.disable_irqs = i8259_disable_irqs,\r\n\t.eoi = i8259_eoi,\r\n\t.is_spurious = i8259_is_spurious,\r\n\t.handle_spurious = i8259_handle_spurious\r\n};","baseline":338,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"pic_ops_t i8259_pic_ops = {\r\n\t.get_name = i8259_get_name,\r\n\t.enable_irqs = i8259_enable_irqs,\r\n\t.disable_irqs = i8259_disable_irqs,\r\n\t.eoi = i8259_eoi,\r\n\t.is_spurious = i8259_is_spurious,\r\n\t.handle_spurious = i8259_handle_spurious\r\n};"},{"type":"arrow","version":265,"versionNonce":687815537,"isDeleted":false,"id":"omncLGeXNagwgTzGQL044","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11466.648018246611,"y":6708.7221577962255,"strokeColor":"#000000","backgroundColor":"transparent","width":1052.7779134114553,"height":5650.997185390345,"seed":34180836,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"xxdk_niPGpD5JbtFzBwQ_","focus":0.6930168564703159,"gap":23.88911946614826},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-1052.7779134114553,5650.997185390345]]},{"type":"text","version":124,"versionNonce":1446588447,"isDeleted":false,"id":"xxdk_niPGpD5JbtFzBwQ_","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8891.980985369008,"y":12281.389180501306,"strokeColor":"#000000","backgroundColor":"transparent","width":1498,"height":1702,"seed":1424692068,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"omncLGeXNagwgTzGQL044","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"// irq0_vec  =  32\n// irq0_vec这个参数指使用i8259PIC时映射的中断0号其实是映射到了32号。\nvoid i8259_init(i8259_t *pic0, i8259_t *pic1, unsigned int irq0_vec)\n{\n\tsaved_pic0 = pic0;\n\tsaved_pic1 = pic1;\n\n\t/* ICW1: this is ICW1, ICW4 to follow */\n\tpio_write_8(&pic0->port1, I8259_ICW1 | I8259_ICW1_NEEDICW4);\n\n\t/* ICW2: IRQ 0 maps to interrupt vector address irq0_vec */\n\tpio_write_8(&pic0->port2, irq0_vec);\n\n\t/* ICW3: pic1 using IRQ I8259_IRQ_SLAVE */\n\tpio_write_8(&pic0->port2, 1 << I8259_IRQ_SLAVE);\n\n\t/* ICW4: i8086 mode */\n\tpio_write_8(&pic0->port2, 1);\n\n\t/* ICW1: ICW1, ICW4 to follow */\n\tpio_write_8(&pic1->port1, I8259_ICW1 | I8259_ICW1_NEEDICW4);\n\n\t/* ICW2: IRQ 8 maps to interrupt vector address irq0_vec + 8 */\n\t// I8259_IRQ_COUNT = 8\n\tpio_write_8(&pic1->port2, irq0_vec + I8259_IRQ_COUNT);\n\n\t/* ICW3: pic1 is known as I8259_IRQ_SLAVE */\n\tpio_write_8(&pic1->port2, I8259_IRQ_SLAVE);\n\n\t/* ICW4: i8086 mode */\n\tpio_write_8(&pic1->port2, 1);\n\n\t/* disable all irq's */\n\t// 禁用所有中断\n\ti8259_disable_irqs(0xffff);\n\t/* but enable I8259_IRQ_SLAVE */\n\t// 启用从 PIC 的中断\n\ti8259_enable_irqs(1 << I8259_IRQ_SLAVE);\n}","baseline":1693,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"// irq0_vec  =  32\n// irq0_vec这个参数指使用i8259PIC时映射的中断0号其实是映射到了32号。\nvoid i8259_init(i8259_t *pic0, i8259_t *pic1, unsigned int irq0_vec)\n{\n\tsaved_pic0 = pic0;\n\tsaved_pic1 = pic1;\n\n\t/* ICW1: this is ICW1, ICW4 to follow */\n\tpio_write_8(&pic0->port1, I8259_ICW1 | I8259_ICW1_NEEDICW4);\n\n\t/* ICW2: IRQ 0 maps to interrupt vector address irq0_vec */\n\tpio_write_8(&pic0->port2, irq0_vec);\n\n\t/* ICW3: pic1 using IRQ I8259_IRQ_SLAVE */\n\tpio_write_8(&pic0->port2, 1 << I8259_IRQ_SLAVE);\n\n\t/* ICW4: i8086 mode */\n\tpio_write_8(&pic0->port2, 1);\n\n\t/* ICW1: ICW1, ICW4 to follow */\n\tpio_write_8(&pic1->port1, I8259_ICW1 | I8259_ICW1_NEEDICW4);\n\n\t/* ICW2: IRQ 8 maps to interrupt vector address irq0_vec + 8 */\n\t// I8259_IRQ_COUNT = 8\n\tpio_write_8(&pic1->port2, irq0_vec + I8259_IRQ_COUNT);\n\n\t/* ICW3: pic1 is known as I8259_IRQ_SLAVE */\n\tpio_write_8(&pic1->port2, I8259_IRQ_SLAVE);\n\n\t/* ICW4: i8086 mode */\n\tpio_write_8(&pic1->port2, 1);\n\n\t/* disable all irq's */\n\t// 禁用所有中断\n\ti8259_disable_irqs(0xffff);\n\t/* but enable I8259_IRQ_SLAVE */\n\t// 启用从 PIC 的中断\n\ti8259_enable_irqs(1 << I8259_IRQ_SLAVE);\n}"},{"type":"text","version":116,"versionNonce":692626769,"isDeleted":false,"id":"mxw02gJjK7g_KugY1ClIX","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8843.034350440623,"y":11981.500439961756,"strokeColor":"#000000","backgroundColor":"transparent","width":2298,"height":284,"seed":1858601564,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"// 初始化8259中断控制器芯片。\r\n\t\t// 通过 i8259_init 函数初始化 PIC，\r\n\t\t// 设置主从 PIC 的基地址和中断向量基地址。这确保了系统能够正确处理外部中断请求。\r\n\t\t// IVT_IRQBASE =  32\t\t\t中断向量基地址，通常为 32，表示 IRQ0 对应的中断向量号为 32。\r\n\t\t// I8259_PIC0_BASE = 0x20U\t\t主 PIC 的基地址\r\n\t\t// I8259_PIC1_BASE = 0xA0U\t\t从 PIC 的基地址","baseline":275,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"// 初始化8259中断控制器芯片。\r\n\t\t// 通过 i8259_init 函数初始化 PIC，\r\n\t\t// 设置主从 PIC 的基地址和中断向量基地址。这确保了系统能够正确处理外部中断请求。\r\n\t\t// IVT_IRQBASE =  32\t\t\t中断向量基地址，通常为 32，表示 IRQ0 对应的中断向量号为 32。\r\n\t\t// I8259_PIC0_BASE = 0x20U\t\t主 PIC 的基地址\r\n\t\t// I8259_PIC1_BASE = 0xA0U\t\t从 PIC 的基地址"},{"type":"arrow","version":219,"versionNonce":1761334335,"isDeleted":false,"id":"VV1tTgrzH-2dWbOANaXzH","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9368.867785499217,"y":11556.499982198084,"strokeColor":"#000000","backgroundColor":"transparent","width":2196.6665649414062,"height":80.3743932144771,"seed":261861860,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"lttWuFMS7xqFFHNp-ai0p","focus":-0.5667216543233937,"gap":16.666717529296875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2196.6665649414062,-80.3743932144771]]},{"type":"text","version":201,"versionNonce":344576817,"isDeleted":false,"id":"lttWuFMS7xqFFHNp-ai0p","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5700.534503028513,"y":11323.167004903162,"strokeColor":"#000000","backgroundColor":"transparent","width":1455,"height":650,"seed":720162660,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"VV1tTgrzH-2dWbOANaXzH","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"void i8259_enable_irqs(uint16_t irqmask)\r\n{\r\n\tuint8_t x;\r\n\r\n\tif (irqmask & 0xff) {\r\n\t\tx = pio_read_8(&saved_pic0->port2);\r\n\t\tpio_write_8(&saved_pic0->port2,\r\n\t\t    (uint8_t) (x & (~(irqmask & 0xff))));\r\n\t}\r\n\tif (irqmask >> I8259_IRQ_COUNT) {\r\n\t\tx = pio_read_8(&saved_pic1->port2);\r\n\t\tpio_write_8(&saved_pic1->port2,\r\n\t\t    (uint8_t) (x & (~(irqmask >> I8259_IRQ_COUNT))));\r\n\t}\r\n}","baseline":641,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"void i8259_enable_irqs(uint16_t irqmask)\r\n{\r\n\tuint8_t x;\r\n\r\n\tif (irqmask & 0xff) {\r\n\t\tx = pio_read_8(&saved_pic0->port2);\r\n\t\tpio_write_8(&saved_pic0->port2,\r\n\t\t    (uint8_t) (x & (~(irqmask & 0xff))));\r\n\t}\r\n\tif (irqmask >> I8259_IRQ_COUNT) {\r\n\t\tx = pio_read_8(&saved_pic1->port2);\r\n\t\tpio_write_8(&saved_pic1->port2,\r\n\t\t    (uint8_t) (x & (~(irqmask >> I8259_IRQ_COUNT))));\r\n\t}\r\n}"},{"type":"text","version":112,"versionNonce":806679647,"isDeleted":false,"id":"Y22Dpzmo_IvxJTX6aZWKa","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5666.645393734894,"y":12092.055529276533,"strokeColor":"#000000","backgroundColor":"transparent","width":1392,"height":650,"seed":1892982748,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"xh0dFbi1Jo6MLLVWLVOT-","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"void i8259_disable_irqs(uint16_t irqmask)\r\n{\r\n\tuint8_t x;\r\n\r\n\tif (irqmask & 0xff) {\r\n\t\tx = pio_read_8(&saved_pic0->port2);\r\n\t\tpio_write_8(&saved_pic0->port2,\r\n\t\t    (uint8_t) (x | (irqmask & 0xff)));\r\n\t}\r\n\tif (irqmask >> I8259_IRQ_COUNT) {\r\n\t\tx = pio_read_8(&saved_pic1->port2);\r\n\t\tpio_write_8(&saved_pic1->port2,\r\n\t\t    (uint8_t) (x | (irqmask >> I8259_IRQ_COUNT)));\r\n\t}\r\n}","baseline":641,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"void i8259_disable_irqs(uint16_t irqmask)\r\n{\r\n\tuint8_t x;\r\n\r\n\tif (irqmask & 0xff) {\r\n\t\tx = pio_read_8(&saved_pic0->port2);\r\n\t\tpio_write_8(&saved_pic0->port2,\r\n\t\t    (uint8_t) (x | (irqmask & 0xff)));\r\n\t}\r\n\tif (irqmask >> I8259_IRQ_COUNT) {\r\n\t\tx = pio_read_8(&saved_pic1->port2);\r\n\t\tpio_write_8(&saved_pic1->port2,\r\n\t\t    (uint8_t) (x | (irqmask >> I8259_IRQ_COUNT)));\r\n\t}\r\n}"},{"type":"arrow","version":237,"versionNonce":1059734801,"isDeleted":false,"id":"xh0dFbi1Jo6MLLVWLVOT-","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9367.756742204945,"y":11599.833239237472,"strokeColor":"#000000","backgroundColor":"transparent","width":2304.444681803384,"height":576.1309848936562,"seed":2039802076,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"Y22Dpzmo_IvxJTX6aZWKa","focus":-0.13209984639115518,"gap":4.66666666666606},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2304.444681803384,576.1309848936562]]},{"type":"text","version":144,"versionNonce":1398083711,"isDeleted":false,"id":"pPHwhyyF7-y0JCTKRBFZy","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5472.20101710729,"y":12822.05552927654,"strokeColor":"#000000","backgroundColor":"transparent","width":1666,"height":260,"seed":652864092,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"3k1ISJJ_qLBZL8jQkAO4c","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"void i8259_eoi(unsigned int irq)\r\n{\r\n\tif (irq >= I8259_IRQ_COUNT)\r\n\t\tpio_write_8(&saved_pic1->port1, I8259_OCW4 | I8259_OCW4_NSEOI);\r\n\tpio_write_8(&saved_pic0->port1, I8259_OCW4 | I8259_OCW4_NSEOI);\r\n}","baseline":251,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"void i8259_eoi(unsigned int irq)\r\n{\r\n\tif (irq >= I8259_IRQ_COUNT)\r\n\t\tpio_write_8(&saved_pic1->port1, I8259_OCW4 | I8259_OCW4_NSEOI);\r\n\tpio_write_8(&saved_pic0->port1, I8259_OCW4 | I8259_OCW4_NSEOI);\r\n}"},{"type":"arrow","version":192,"versionNonce":77691633,"isDeleted":false,"id":"3k1ISJJ_qLBZL8jQkAO4c","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9361.08997381302,"y":11648.722195943206,"strokeColor":"#000000","backgroundColor":"transparent","width":2457.7259229853025,"height":1160.0000000000018,"seed":1528323676,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"pPHwhyyF7-y0JCTKRBFZy","focus":0.26567057286412293,"gap":13.33333333333212},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2457.7259229853025,1160.0000000000018]]},{"type":"text","version":60,"versionNonce":746367135,"isDeleted":false,"id":"iZxdc-6Bmldeo8bc8-oDz","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5363.31206040156,"y":13273.166572570812,"strokeColor":"#000000","backgroundColor":"transparent","width":1561,"height":347,"seed":47226980,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"gMzfCLq1vdx6KPgC7zddh","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"bool i8259_is_spurious(unsigned int irq)\r\n{\r\n\tpio_write_8(&saved_pic0->port1, I8259_OCW3 | I8259_OCW3_READ_ISR);\r\n\tpio_write_8(&saved_pic1->port1, I8259_OCW3 | I8259_OCW3_READ_ISR);\r\n\tuint8_t isr_lo = pio_read_8(&saved_pic0->port1);\r\n\tuint8_t isr_hi = pio_read_8(&saved_pic1->port1);\r\n\treturn !(((isr_hi << I8259_IRQ_COUNT) | isr_lo) & (1 << irq));\r\n}","baseline":338,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"bool i8259_is_spurious(unsigned int irq)\r\n{\r\n\tpio_write_8(&saved_pic0->port1, I8259_OCW3 | I8259_OCW3_READ_ISR);\r\n\tpio_write_8(&saved_pic1->port1, I8259_OCW3 | I8259_OCW3_READ_ISR);\r\n\tuint8_t isr_lo = pio_read_8(&saved_pic0->port1);\r\n\tuint8_t isr_hi = pio_read_8(&saved_pic1->port1);\r\n\treturn !(((isr_hi << I8259_IRQ_COUNT) | isr_lo) & (1 << irq));\r\n}"},{"type":"text","version":100,"versionNonce":1702294737,"isDeleted":false,"id":"KfjQ6Mv9nMleP-kWoVgCk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5365.534299577992,"y":13770.94448598227,"strokeColor":"#000000","backgroundColor":"transparent","width":1666,"height":260,"seed":437841116,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"bBVtD09LH6v2vsoFXc4nO","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"void i8259_handle_spurious(unsigned int irq)\r\n{\r\n\t/* For spurious IRQs from pic1, we need to isssue an EOI to pic0 */\r\n\tif (irq >= I8259_IRQ_COUNT)\r\n\t\tpio_write_8(&saved_pic0->port1, I8259_OCW4 | I8259_OCW4_NSEOI);\r\n}","baseline":251,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"void i8259_handle_spurious(unsigned int irq)\r\n{\r\n\t/* For spurious IRQs from pic1, we need to isssue an EOI to pic0 */\r\n\tif (irq >= I8259_IRQ_COUNT)\r\n\t\tpio_write_8(&saved_pic0->port1, I8259_OCW4 | I8259_OCW4_NSEOI);\r\n}"},{"type":"arrow","version":166,"versionNonce":154942655,"isDeleted":false,"id":"gMzfCLq1vdx6KPgC7zddh","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9367.757047380726,"y":11679.83323923748,"strokeColor":"#000000","backgroundColor":"transparent","width":2586.6668701171875,"height":1575.5556233723946,"seed":1690536924,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"iZxdc-6Bmldeo8bc8-oDz","focus":0.3034215183856324,"gap":17.7777099609375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2586.6668701171875,1575.5556233723946]]},{"type":"arrow","version":131,"versionNonce":1698837169,"isDeleted":false,"id":"bBVtD09LH6v2vsoFXc4nO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9354.423307146353,"y":11735.388811747245,"strokeColor":"#000000","backgroundColor":"transparent","width":2628.8889567057304,"height":2028.8890075683594,"seed":1486713820,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"KfjQ6Mv9nMleP-kWoVgCk","focus":0.349412389783535,"gap":6.66666666666606},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-2628.8889567057304,2028.8890075683594]]},{"type":"text","version":51,"versionNonce":758402271,"isDeleted":false,"id":"Tsah8G0pXgRWjk5RyadJG","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8107.478752499543,"y":12803.721890767418,"strokeColor":"#000000","backgroundColor":"transparent","width":718,"height":173,"seed":1352824284,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\r\n\tioport8_t port1;\r\n\tioport8_t port2;\r\n} __attribute__((packed)) i8259_t;","baseline":165,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\r\n\tioport8_t port1;\r\n\tioport8_t port2;\r\n} __attribute__((packed)) i8259_t;"},{"type":"arrow","version":73,"versionNonce":682275985,"isDeleted":false,"id":"BVd3e9xI8WWzDxhnHYRpW","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9589.978752499543,"y":12797.055325826012,"strokeColor":"#000000","backgroundColor":"transparent","width":606.6668701171875,"height":63.333282470703125,"seed":1783803228,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"evGe0CHDAIZRE-sROAOEo","focus":-0.38385625345688135,"gap":8.33343505859375},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[606.6668701171875,63.333282470703125]]},{"type":"text","version":76,"versionNonce":334846207,"isDeleted":false,"id":"evGe0CHDAIZRE-sROAOEo","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10204.979057675324,"y":12832.888608296715,"strokeColor":"#000000","backgroundColor":"transparent","width":43,"height":43,"seed":1264726492,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"BVd3e9xI8WWzDxhnHYRpW","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"32","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"32"},{"type":"text","version":268,"versionNonce":1399323249,"isDeleted":false,"id":"TMHlj6b7QYuQuLyyumgaW","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10299.978752499543,"y":13422.055173238121,"strokeColor":"#000000","backgroundColor":"transparent","width":528,"height":130,"seed":269087708,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"9R4k8LvwxySfXYy3e2jmX","type":"arrow"},{"id":"LMcJxCoYrBzdX2POuUUo1","type":"arrow"},{"id":"qqz-OH9DwqGnKbPeaTqND","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"#define I8259_IRQ_COUNT 8\r\n\r\n#define I8259_IRQ_SLAVE 2","baseline":121,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"#define I8259_IRQ_COUNT 8\r\n\r\n#define I8259_IRQ_SLAVE 2"},{"type":"arrow","version":264,"versionNonce":1929371935,"isDeleted":false,"id":"W26r2-fvMtiVLJh51KsJQ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":10008.312187558136,"y":13325.388608296715,"strokeColor":"#000000","backgroundColor":"transparent","width":318.0449914845358,"height":96.66671752929688,"seed":181835236,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[318.0449914845358,96.66671752929688]]},{"type":"arrow","version":242,"versionNonce":641827921,"isDeleted":false,"id":"9R4k8LvwxySfXYy3e2jmX","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9866.64547002884,"y":13483.722043355308,"strokeColor":"#000000","backgroundColor":"transparent","width":411.66656494140625,"height":46.92915398440891,"seed":611494500,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"TMHlj6b7QYuQuLyyumgaW","focus":-0.8008946689653647,"gap":21.666717529296875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[411.66656494140625,46.92915398440891]]},{"type":"arrow","version":148,"versionNonce":2076468543,"isDeleted":false,"id":"LMcJxCoYrBzdX2POuUUo1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9869.978447323761,"y":12947.055325826012,"strokeColor":"#000000","backgroundColor":"transparent","width":688.3334350585938,"height":456.6667175292969,"seed":440041948,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"TMHlj6b7QYuQuLyyumgaW","focus":0.33135238764125313,"gap":18.3331298828125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[688.3334350585938,456.6667175292969]]},{"type":"arrow","version":67,"versionNonce":1561252401,"isDeleted":false,"id":"qqz-OH9DwqGnKbPeaTqND","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":9666.645164853058,"y":13897.055402119957,"strokeColor":"#000000","backgroundColor":"transparent","width":673.3334350585938,"height":325,"seed":725565156,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"TMHlj6b7QYuQuLyyumgaW","focus":0.1201431904004683,"gap":20.000228881835938},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[673.3334350585938,-325]]},{"type":"text","version":76,"versionNonce":1570989407,"isDeleted":false,"id":"rKFHdkbeGggx3iKLduJqP","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":8047.477684384308,"y":13143.722310384117,"strokeColor":"#000000","backgroundColor":"transparent","width":619,"height":852,"seed":1605666908,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"主PIC的中断范围：IRQ0 到 IRQ7。\r\nIRQ0：通常用于系统时钟。\r\nIRQ1：通常用于键盘。\r\nIRQ2：通常用于从PIC的中断请求。\r\nIRQ3：通常用于串行端口COM2。\r\nIRQ4：通常用于串行端口COM1。\r\nIRQ5：通常用于软盘驱动器。\r\nIRQ6：通常用于硬盘驱动器。\r\nIRQ7：通常用于并行端口LPT1。\r\n从PIC的中断范围：IRQ8 到 IRQ15。\r\nIRQ8：通常用于实时时钟（RTC）。\r\nIRQ9：通常用于软盘驱动器。\r\nIRQ10：通常用于硬盘驱动器。\r\nIRQ11：通常用于硬盘驱动器。\r\nIRQ12：通常用于鼠标。\r\nIRQ13：通常用于数学协处理器。\r\nIRQ14：通常用于硬盘驱动器。\r\nIRQ15：通常用于硬盘驱动器。","baseline":843,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"主PIC的中断范围：IRQ0 到 IRQ7。\r\nIRQ0：通常用于系统时钟。\r\nIRQ1：通常用于键盘。\r\nIRQ2：通常用于从PIC的中断请求。\r\nIRQ3：通常用于串行端口COM2。\r\nIRQ4：通常用于串行端口COM1。\r\nIRQ5：通常用于软盘驱动器。\r\nIRQ6：通常用于硬盘驱动器。\r\nIRQ7：通常用于并行端口LPT1。\r\n从PIC的中断范围：IRQ8 到 IRQ15。\r\nIRQ8：通常用于实时时钟（RTC）。\r\nIRQ9：通常用于软盘驱动器。\r\nIRQ10：通常用于硬盘驱动器。\r\nIRQ11：通常用于硬盘驱动器。\r\nIRQ12：通常用于鼠标。\r\nIRQ13：通常用于数学协处理器。\r\nIRQ14：通常用于硬盘驱动器。\r\nIRQ15：通常用于硬盘驱动器。"},{"type":"arrow","version":80,"versionNonce":1287087121,"isDeleted":false,"id":"fMlSIDFaZanbxaX3XOBIx","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12699.977379208527,"y":10065.389180501305,"strokeColor":"#000000","backgroundColor":"transparent","width":773.3332824707031,"height":258.33335876464844,"seed":395354724,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"KZjp5xcfQo8Zw5c1jfFDO","focus":0.7165774453530345,"gap":15},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[773.3332824707031,-258.33335876464844]]},{"type":"text","version":80,"versionNonce":132997503,"isDeleted":false,"id":"KZjp5xcfQo8Zw5c1jfFDO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13488.31066167923,"y":9691.222539265953,"strokeColor":"#000000","backgroundColor":"transparent","width":1434,"height":303,"seed":587529444,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"fMlSIDFaZanbxaX3XOBIx","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"void km_identity_arch_init(void)\r\n{\r\n\t// KM_AMD64_IDENTITY_START      UINT64_C(0xffffffff80000000)\r\n\tconfig.identity_base = KM_AMD64_IDENTITY_START;\r\n\t// KM_AMD64_IDENTITY_SIZE       UINT64_C(0x0000000080000000)\r\n\tconfig.identity_size = KM_AMD64_IDENTITY_SIZE;\r\n}","baseline":295,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"void km_identity_arch_init(void)\r\n{\r\n\t// KM_AMD64_IDENTITY_START      UINT64_C(0xffffffff80000000)\r\n\tconfig.identity_base = KM_AMD64_IDENTITY_START;\r\n\t// KM_AMD64_IDENTITY_SIZE       UINT64_C(0x0000000080000000)\r\n\tconfig.identity_size = KM_AMD64_IDENTITY_SIZE;\r\n}"},{"type":"arrow","version":175,"versionNonce":1093843441,"isDeleted":false,"id":"9yChYcYDDD-J7NGIjNwH0","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2996.477023170116,"y":-1344.1667785644522,"strokeColor":"#000000","backgroundColor":"transparent","width":796.1666259765625,"height":71.66087924687417,"seed":844751332,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"s3r5lraLN_dXnU3YOv1nc","focus":-0.4314857780143711,"gap":1.1666259765625},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[796.1666259765625,71.66087924687417]]},{"type":"arrow","version":140,"versionNonce":736287135,"isDeleted":false,"id":"pYnoj8T5yERi-McMXKS5V","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2971.143771216991,"y":-1260.1667785644522,"strokeColor":"#000000","backgroundColor":"transparent","width":814.66650390625,"height":18.94626313155959,"seed":847261028,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"s3r5lraLN_dXnU3YOv1nc","focus":-0.715139911445926,"gap":8},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[814.66650390625,18.94626313155959]]},{"type":"arrow","version":157,"versionNonce":461919185,"isDeleted":false,"id":"V8PPOLBVsIzLm0swjoqOb","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2907.143771216991,"y":-1152.1667785644522,"strokeColor":"#000000","backgroundColor":"transparent","width":879.0369615203062,"height":69.23770638658607,"seed":1423479908,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"s3r5lraLN_dXnU3YOv1nc","focus":0.1714030241531369,"gap":12},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[879.0369615203062,-69.23770638658607]]},{"type":"text","version":132,"versionNonce":2125745599,"isDeleted":false,"id":"s3r5lraLN_dXnU3YOv1nc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3793.810275123241,"y":-1277.6667785644522,"strokeColor":"#000000","backgroundColor":"transparent","width":1109,"height":47,"seed":1918767964,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"9yChYcYDDD-J7NGIjNwH0","type":"arrow"},{"id":"V8PPOLBVsIzLm0swjoqOb","type":"arrow"},{"id":"pYnoj8T5yERi-McMXKS5V","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"在main_bsp_separated_stack -> km_identity_init中初始化","baseline":38,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"在main_bsp_separated_stack -> km_identity_init中初始化"},{"type":"text","version":231,"versionNonce":802140593,"isDeleted":false,"id":"w_kd01-CzWYfTeHclX977","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11961.753929501494,"y":10779.500254313156,"strokeColor":"#000000","backgroundColor":"transparent","width":1730,"height":1387,"seed":1537619940,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"frame_init():\n        if (config.cpu_active == 1) {\n                zones.count = 0;\n                irq_spinlock_initialize(&zones.lock, \"frame.zones.lock\");\n                mutex_initialize(&mem_avail_mtx, MUTEX_ACTIVE);\n                condvar_initialize(&mem_avail_cv);\n        }\n\n        frame_low_arch_init();\n\n        // ADDR2PFN(addr)   --->  ((addr) >> 12)  // 4K\n        // SIZE2FRAMES(size)--->  (((size) == 0) ? 0 : ((((size) - 1) >> 12) + 1))\n        if (config.cpu_active == 1) {\n                frame_mark_unavailable(ADDR2PFN(KA2PA(config.base)),\n                SIZE2FRAMES(config.kernel_size));\n\n                for (size_t i = 0; i < init.cnt; i++)\n                        frame_mark_unavailable(ADDR2PFN(init.tasks[i].paddr),\n                            SIZE2FRAMES(init.tasks[i].size));\n\n                if (ballocs.size)\n                        frame_mark_unavailable(ADDR2PFN(KA2PA(ballocs.base)),\n                            SIZE2FRAMES(ballocs.size));\n\n                /*\n                 * Blacklist first frame, as allocating NULL would\n                 * fail in some places\n                 */\n                frame_mark_unavailable(0, 1);\n        }\n\n        frame_high_arch_init();","baseline":1378,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"frame_init():\n        if (config.cpu_active == 1) {\n                zones.count = 0;\n                irq_spinlock_initialize(&zones.lock, \"frame.zones.lock\");\n                mutex_initialize(&mem_avail_mtx, MUTEX_ACTIVE);\n                condvar_initialize(&mem_avail_cv);\n        }\n\n        frame_low_arch_init();\n\n        // ADDR2PFN(addr)   --->  ((addr) >> 12)  // 4K\n        // SIZE2FRAMES(size)--->  (((size) == 0) ? 0 : ((((size) - 1) >> 12) + 1))\n        if (config.cpu_active == 1) {\n                frame_mark_unavailable(ADDR2PFN(KA2PA(config.base)),\n                SIZE2FRAMES(config.kernel_size));\n\n                for (size_t i = 0; i < init.cnt; i++)\n                        frame_mark_unavailable(ADDR2PFN(init.tasks[i].paddr),\n                            SIZE2FRAMES(init.tasks[i].size));\n\n                if (ballocs.size)\n                        frame_mark_unavailable(ADDR2PFN(KA2PA(ballocs.base)),\n                            SIZE2FRAMES(ballocs.size));\n\n                /*\n                 * Blacklist first frame, as allocating NULL would\n                 * fail in some places\n                 */\n                frame_mark_unavailable(0, 1);\n        }\n\n        frame_high_arch_init();"},{"type":"rectangle","version":312,"versionNonce":415556255,"isDeleted":false,"id":"ucOQSWTQPIqTTOAfdcUON","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":11792.031995500827,"y":10669.222925821945,"strokeColor":"#000000","backgroundColor":"transparent","width":1961.6665649414062,"height":1586.666641235351,"seed":1026938332,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"SgYAgCZ2LY5Myv_SDefPH","type":"arrow"},{"id":"EV91yN3EfqoD3DvRcQhN8","type":"arrow"}],"updated":1741338986912,"link":null},{"type":"arrow","version":357,"versionNonce":1664111505,"isDeleted":false,"id":"SgYAgCZ2LY5Myv_SDefPH","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12467.96182998858,"y":10279.642472978165,"strokeColor":"#000000","backgroundColor":"transparent","width":94.70109399770445,"height":382.7265490839709,"seed":1952898148,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":{"elementId":"6-LEXY0NzwTpxL2oLWXv2","gap":15.364691809544519,"focus":0.0721627217247672},"endBinding":{"elementId":"ucOQSWTQPIqTTOAfdcUON","gap":6.853903759808116,"focus":-0.009319815692758603},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[94.70109399770445,382.7265490839709]]},{"type":"text","version":91,"versionNonce":1700604415,"isDeleted":false,"id":"I-GGl9SHFnfatglq5oj84","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5483.697727566662,"y":5590.056271870937,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":43,"seed":1184062300,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"-B6whLI7Uhw8ip2A3tDXt","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"0xffffffff801830c0","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff801830c0"},{"type":"arrow","version":59,"versionNonce":165788017,"isDeleted":false,"id":"-B6whLI7Uhw8ip2A3tDXt","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6114.531162625256,"y":5610.8896306355855,"strokeColor":"#000000","backgroundColor":"transparent","width":243.33343505859375,"height":0,"seed":838876380,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":{"elementId":"r0UeXAQl7cU_k_8IpJbsx","focus":0.06020259097436768,"gap":21.675327301035395},"endBinding":{"elementId":"I-GGl9SHFnfatglq5oj84","focus":-0.031006569086119186,"gap":6.5},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-243.33343505859375,0]]},{"type":"text","version":72,"versionNonce":1229296159,"isDeleted":false,"id":"2SbPJSd-fucJvHkjpiW0b","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5149.531010037365,"y":5589.222951253261,"strokeColor":"#000000","backgroundColor":"transparent","width":296,"height":43,"seed":1364581732,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"GDzyeYm9gNwcp237Zr9n6","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"zones_t zones;","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"zones_t zones;"},{"type":"text","version":262,"versionNonce":86729553,"isDeleted":false,"id":"a2DGCWv1l2NNzdfo45Cly","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3159.8088725861935,"y":4800.88960520427,"strokeColor":"#000000","backgroundColor":"transparent","width":1733,"height":359,"seed":1371503460,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"GDzyeYm9gNwcp237Zr9n6","type":"arrow"},{"id":"BbmbwNFpAvD7HDPxVqLAB","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\r\n\t// 中断自旋锁，用于保护 zones 结构体的访问\r\n\tIRQ_SPINLOCK_DECLARE(lock);\r\n\t// 系统中内存区域的总数\r\n\tsize_t count;\r\n\t// 一个数组，包含所有内存区域的信息。每个元素是一个 zone_t 结构体，表示一个内存区域。\r\n\tzone_t info[ZONES_MAX];\r\n} zones_t;","baseline":350,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\r\n\t// 中断自旋锁，用于保护 zones 结构体的访问\r\n\tIRQ_SPINLOCK_DECLARE(lock);\r\n\t// 系统中内存区域的总数\r\n\tsize_t count;\r\n\t// 一个数组，包含所有内存区域的信息。每个元素是一个 zone_t 结构体，表示一个内存区域。\r\n\tzone_t info[ZONES_MAX];\r\n} zones_t;"},{"type":"arrow","version":404,"versionNonce":1076622911,"isDeleted":false,"id":"GDzyeYm9gNwcp237Zr9n6","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5181.347714147843,"y":5584.222938537604,"strokeColor":"#000000","backgroundColor":"transparent","width":987.6831811427583,"height":420,"seed":1433127388,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":{"elementId":"2SbPJSd-fucJvHkjpiW0b","focus":-0.27258145355574087,"gap":5.000012715657249},"endBinding":{"elementId":"a2DGCWv1l2NNzdfo45Cly","focus":0.20560935065634148,"gap":4.33333333333394},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-987.6831811427583,-420]]},{"type":"text","version":65,"versionNonce":560255281,"isDeleted":false,"id":"3zytgU7eOMkCB7NorV60l","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3210.1976563589797,"y":5613.556251525885,"strokeColor":"#000000","backgroundColor":"transparent","width":1372,"height":43,"seed":1546365148,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"BbmbwNFpAvD7HDPxVqLAB","type":"arrow"},{"id":"AYsEbkuO69CBLOIdZWA01","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"#define IRQ_SPINLOCK_DECLARE(lock_name)  irq_spinlock_t lock_name","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"#define IRQ_SPINLOCK_DECLARE(lock_name)  irq_spinlock_t lock_name"},{"type":"arrow","version":146,"versionNonce":821089887,"isDeleted":false,"id":"BbmbwNFpAvD7HDPxVqLAB","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3757.6505550695088,"y":5187.333981831875,"strokeColor":"#000000","backgroundColor":"transparent","width":54.224979142574284,"height":419.5556437174482,"seed":2099087068,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":{"elementId":"a2DGCWv1l2NNzdfo45Cly","focus":0.27199942626837026,"gap":27.44437662760447},"endBinding":{"elementId":"3zytgU7eOMkCB7NorV60l","focus":-0.28516043109489375,"gap":6.6666259765625},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-54.224979142574284,419.5556437174482]]},{"type":"text","version":150,"versionNonce":871727889,"isDeleted":false,"id":"KUPlD5lXpGd1LKpi5vcuc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":3185.530969347261,"y":5837.5563125610415,"strokeColor":"#000000","backgroundColor":"transparent","width":1688,"height":347,"seed":1061900132,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"AYsEbkuO69CBLOIdZWA01","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\r\n\tspinlock_t lock;              /**< Spinlock */\r\n\tbool guard;                   /**< Flag whether ipl is valid */\r\n\tipl_t ipl;                    /**< Original interrupt level */\r\n#ifdef CONFIG_DEBUG_SPINLOCK\r\n\t_Atomic(struct cpu *) owner;  /**< Which cpu currently owns this lock */\r\n#endif\r\n} irq_spinlock_t;","baseline":338,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\r\n\tspinlock_t lock;              /**< Spinlock */\r\n\tbool guard;                   /**< Flag whether ipl is valid */\r\n\tipl_t ipl;                    /**< Original interrupt level */\r\n#ifdef CONFIG_DEBUG_SPINLOCK\r\n\t_Atomic(struct cpu *) owner;  /**< Which cpu currently owns this lock */\r\n#endif\r\n} irq_spinlock_t;"},{"type":"arrow","version":161,"versionNonce":1382331007,"isDeleted":false,"id":"AYsEbkuO69CBLOIdZWA01","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":4163.637438620629,"y":5664.222938537604,"strokeColor":"#000000","backgroundColor":"transparent","width":315.8187219131023,"height":169.3333740234375,"seed":458223204,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":{"elementId":"3zytgU7eOMkCB7NorV60l","focus":-0.4435024057217641,"gap":7.66668701171875},"endBinding":{"elementId":"KUPlD5lXpGd1LKpi5vcuc","focus":-0.43916307003069316,"gap":4},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-315.8187219131023,169.3333740234375]]},{"type":"line","version":302,"versionNonce":2035611889,"isDeleted":false,"id":"qgHuPpLcW17hbZguXX4bx","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5143.5317424592395,"y":5633.222989400238,"strokeColor":"#000000","backgroundColor":"transparent","width":3100,"height":9040.00015258789,"seed":527672548,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[-3100,9040.00015258789]]},{"type":"line","version":185,"versionNonce":759696031,"isDeleted":false,"id":"zyh_AU1_AzofK_sfTCdTZ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12185.754439399343,"y":10913.222989400238,"strokeColor":"#000000","backgroundColor":"transparent","width":1973.888804117838,"height":4721.666717529297,"seed":1826346588,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[-1973.888804117838,4721.666717529297]]},{"type":"line","version":186,"versionNonce":856339153,"isDeleted":false,"id":"H7-GRu7-_7pMXs_JcYo9T","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":2010.1983074006457,"y":14653.222531636566,"strokeColor":"#000000","backgroundColor":"transparent","width":8213.334045410156,"height":980.0006103515625,"seed":272878684,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[8213.334045410156,980.0006103515625]]},{"type":"arrow","version":70,"versionNonce":1581997759,"isDeleted":false,"id":"3ACZMvakxQcBxqBgzXf88","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13505.75510061354,"y":10934.000801086431,"strokeColor":"#000000","backgroundColor":"transparent","width":302.2220865885429,"height":16.447320947234402,"seed":221985756,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"GzU860O0lyJyVEdfFm6cJ","focus":0.42196531791907516,"gap":18.333282470703125},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[302.2220865885429,-16.447320947234402]]},{"type":"text","version":79,"versionNonce":95301809,"isDeleted":false,"id":"GzU860O0lyJyVEdfFm6cJ","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":13826.310469672784,"y":10844.000801086431,"strokeColor":"#000000","backgroundColor":"transparent","width":1434,"height":173,"seed":1287821788,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"3ACZMvakxQcBxqBgzXf88","type":"arrow"},{"id":"HEKn-lpteaHmNnoSOGNsO","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"void irq_spinlock_initialize(irq_spinlock_t *lock, const char *name)\r\n{\r\n\t*lock = (irq_spinlock_t) IRQ_SPINLOCK_INITIALIZER(name);\r\n}","baseline":165,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"void irq_spinlock_initialize(irq_spinlock_t *lock, const char *name)\r\n{\r\n\t*lock = (irq_spinlock_t) IRQ_SPINLOCK_INITIALIZER(name);\r\n}"},{"type":"text","version":106,"versionNonce":403648223,"isDeleted":false,"id":"h0dRpkZ_VXH6ynQp6pXvD","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":15568.532759711845,"y":10907.056373596199,"strokeColor":"#000000","backgroundColor":"transparent","width":1223,"height":260,"seed":1437386980,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"HEKn-lpteaHmNnoSOGNsO","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"#define IRQ_SPINLOCK_INITIALIZER(desc_name) \\\r\n\t{ \\\r\n\t\t.lock = SPINLOCK_INITIALIZER(desc_name), \\\r\n\t\t.guard = false, \\\r\n\t\t.ipl = 0, \\\r\n\t}","baseline":251,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"#define IRQ_SPINLOCK_INITIALIZER(desc_name) \\\r\n\t{ \\\r\n\t\t.lock = SPINLOCK_INITIALIZER(desc_name), \\\r\n\t\t.guard = false, \\\r\n\t\t.ipl = 0, \\\r\n\t}"},{"type":"arrow","version":120,"versionNonce":384234129,"isDeleted":false,"id":"HEKn-lpteaHmNnoSOGNsO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":15279.644006456636,"y":10973.074754839297,"strokeColor":"#000000","backgroundColor":"transparent","width":286.6666666666697,"height":39.43334116713231,"seed":292324964,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":{"elementId":"GzU860O0lyJyVEdfFm6cJ","focus":0.7725664673269166,"gap":19.33353678385174},"endBinding":{"elementId":"h0dRpkZ_VXH6ynQp6pXvD","focus":0.877266185643276,"gap":2.2220865885410603},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[286.6666666666697,-39.43334116713231]]},{"type":"arrow","version":52,"versionNonce":1696856831,"isDeleted":false,"id":"bDw_8g1uW4598Qzq4suXn","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":15417.421512967054,"y":10953.723040262867,"strokeColor":"#000000","backgroundColor":"transparent","width":12.872468687855871,"height":253.33333333333212,"seed":834411876,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":null,"endBinding":{"elementId":"W4TzUJTqIIwJciCwiuL1O","focus":0.3951758246003054,"gap":18.27781168619913},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-12.872468687855871,-253.33333333333212]]},{"type":"text","version":225,"versionNonce":1802270833,"isDeleted":false,"id":"W4TzUJTqIIwJciCwiuL1O","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":14972.977543240493,"y":10465.111895243335,"strokeColor":"#000000","backgroundColor":"transparent","width":1413,"height":217,"seed":881087708,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"bDw_8g1uW4598Qzq4suXn","type":"arrow"},{"id":"A0Up4uqyaPQjuMddv2gOW","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"*lock = (irq_spinlock_t) {\n                .lock = {.name = (name), .flag = ATOMIC_FLAG_INIT},\n                .guard = false,\n                .ipl = 0,\n           }","baseline":208,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"*lock = (irq_spinlock_t) {\n                .lock = {.name = (name), .flag = ATOMIC_FLAG_INIT},\n                .guard = false,\n                .ipl = 0,\n           }"},{"type":"text","version":75,"versionNonce":705315615,"isDeleted":false,"id":"NJFRe-3eBvtCj9FU9on7N","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":16876.310673123295,"y":10269.278561910003,"strokeColor":"#000000","backgroundColor":"transparent","width":1688,"height":347,"seed":1327111260,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"A0Up4uqyaPQjuMddv2gOW","type":"arrow"}],"updated":1741338914517,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\r\n\tspinlock_t lock;              /**< Spinlock */\r\n\tbool guard;                   /**< Flag whether ipl is valid */\r\n\tipl_t ipl;                    /**< Original interrupt level */\r\n#ifdef CONFIG_DEBUG_SPINLOCK\r\n\t_Atomic(struct cpu *) owner;  /**< Which cpu currently owns this lock */\r\n#endif\r\n} irq_spinlock_t;","baseline":338,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\r\n\tspinlock_t lock;              /**< Spinlock */\r\n\tbool guard;                   /**< Flag whether ipl is valid */\r\n\tipl_t ipl;                    /**< Original interrupt level */\r\n#ifdef CONFIG_DEBUG_SPINLOCK\r\n\t_Atomic(struct cpu *) owner;  /**< Which cpu currently owns this lock */\r\n#endif\r\n} irq_spinlock_t;"},{"type":"arrow","version":106,"versionNonce":84296273,"isDeleted":false,"id":"A0Up4uqyaPQjuMddv2gOW","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":15179.39621203137,"y":10444.834083557138,"strokeColor":"#000000","backgroundColor":"transparent","width":1684.6927814044247,"height":116.13606151819658,"seed":269343972,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914517,"link":null,"startBinding":{"elementId":"W4TzUJTqIIwJciCwiuL1O","focus":-1.038716369910713,"gap":20.27781168619731},"endBinding":{"elementId":"NJFRe-3eBvtCj9FU9on7N","focus":0.7471666346202489,"gap":12.2216796875},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1684.6927814044247,-116.13606151819658]]},{"type":"arrow","version":172,"versionNonce":1731364671,"isDeleted":false,"id":"sg-q0u8RciA1X2vOA0NnW","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":17250.200036730064,"y":10342.05627187094,"strokeColor":"#000000","backgroundColor":"transparent","width":1475.5560302734375,"height":238.4481394839113,"seed":411729116,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":null,"endBinding":{"elementId":"Vc4b02CaT2qErBxKSs8vd","focus":0.9152349764828134,"gap":14.44417317708212},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[1475.5560302734375,-238.4481394839113]]},{"type":"text","version":63,"versionNonce":1082904625,"isDeleted":false,"id":"Vc4b02CaT2qErBxKSs8vd","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":18740.200240180584,"y":10079.834083557138,"strokeColor":"#000000","backgroundColor":"transparent","width":717,"height":390,"seed":2079880932,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"sg-q0u8RciA1X2vOA0NnW","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct spinlock {\r\n#ifdef CONFIG_SMP\r\n\tatomic_flag flag;\r\n\r\n#ifdef CONFIG_DEBUG_SPINLOCK\r\n\tconst char *name;\r\n#endif /* CONFIG_DEBUG_SPINLOCK */\r\n#endif\r\n} spinlock_t;","baseline":381,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct spinlock {\r\n#ifdef CONFIG_SMP\r\n\tatomic_flag flag;\r\n\r\n#ifdef CONFIG_DEBUG_SPINLOCK\r\n\tconst char *name;\r\n#endif /* CONFIG_DEBUG_SPINLOCK */\r\n#endif\r\n} spinlock_t;"},{"type":"arrow","version":46,"versionNonce":989677407,"isDeleted":false,"id":"ocVAU8jFvO-FAmSl_ucj2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":19114.64482025871,"y":10186.500851949066,"strokeColor":"#000000","backgroundColor":"transparent","width":553.3333333333321,"height":93.33333333333394,"seed":1862031580,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":null,"endBinding":{"elementId":"O8X_ZlNDVi82MDHxwZabS","focus":0.3860513453241412,"gap":6.666666666667879},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[553.3333333333321,-93.33333333333394]]},{"type":"text","version":87,"versionNonce":1944363537,"isDeleted":false,"id":"O8X_ZlNDVi82MDHxwZabS","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":19674.64482025871,"y":10066.778663635265,"strokeColor":"#000000","backgroundColor":"transparent","width":233,"height":43,"seed":1831147356,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"ocVAU8jFvO-FAmSl_ucj2","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"stdatomic.h","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"stdatomic.h"},{"type":"text","version":140,"versionNonce":599458687,"isDeleted":false,"id":"LHoQMVsezgc2iME6MHvrn","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5479.0878744579295,"y":5476.500445048026,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":43,"seed":394306780,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"aVxfiixZaa17j0kwlTVvH","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"0xffffffff80183060","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80183060"},{"type":"arrow","version":63,"versionNonce":1275607025,"isDeleted":false,"id":"aVxfiixZaa17j0kwlTVvH","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6116.865482693608,"y":5494.981104357269,"strokeColor":"#000000","backgroundColor":"transparent","width":251.1108398437509,"height":0.12294620189550187,"seed":1107257180,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":{"elementId":"r0UeXAQl7cU_k_8IpJbsx","focus":0.13365947265378952,"gap":19.341007232684206},"endBinding":{"elementId":"LHoQMVsezgc2iME6MHvrn","focus":-0.12968620969031186,"gap":5.66676839192769},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-251.1108398437509,0.12294620189550187]]},{"type":"text","version":79,"versionNonce":28064671,"isDeleted":false,"id":"72skYau-4MM3Wo81sa0T9","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5155.754032498292,"y":5475.389096577978,"strokeColor":"#000000","backgroundColor":"transparent","width":275,"height":43,"seed":1045457508,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"Oux6qLJVjYkUPysKrqcYk","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"mem_avail_mtx","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"mem_avail_mtx"},{"type":"text","version":178,"versionNonce":1795035601,"isDeleted":false,"id":"GA-CyWvCGR1cDK2FdurFI","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":4616.865075792563,"y":4612.055763244644,"strokeColor":"#000000","backgroundColor":"transparent","width":612,"height":260,"seed":1051581788,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"Oux6qLJVjYkUPysKrqcYk","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\r\n\tmutex_type_t type;\r\n\tsemaphore_t sem;\r\n\tstruct thread *owner;\r\n\tunsigned nesting;\r\n} mutex_t;","baseline":251,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\r\n\tmutex_type_t type;\r\n\tsemaphore_t sem;\r\n\tstruct thread *owner;\r\n\tunsigned nesting;\r\n} mutex_t;"},{"type":"arrow","version":233,"versionNonce":1493266367,"isDeleted":false,"id":"Oux6qLJVjYkUPysKrqcYk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5201.083300419478,"y":5464.278053283707,"strokeColor":"#000000","backgroundColor":"transparent","width":408.7021772058388,"height":573.333333333333,"seed":376051172,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":{"elementId":"72skYau-4MM3Wo81sa0T9","focus":-0.44964870786728595,"gap":11.11104329427144},"endBinding":{"elementId":"GA-CyWvCGR1cDK2FdurFI","focus":0.593521803980522,"gap":18.88895670572947},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-408.7021772058388,-573.333333333333]]},{"type":"line","version":29,"versionNonce":1172156337,"isDeleted":false,"id":"AURuNR4zPa5fa23-Ly__3","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12168.642948513914,"y":10950.166994412764,"strokeColor":"#000000","backgroundColor":"transparent","width":124.444580078125,"height":11.11114501953125,"seed":1764151516,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[124.444580078125,-11.11114501953125]]},{"type":"line","version":34,"versionNonce":1406869471,"isDeleted":false,"id":"y8TACO_tXnpbS1zTeHbpd","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12184.19836843579,"y":10919.055900255862,"strokeColor":"#000000","backgroundColor":"transparent","width":113.33333333333394,"height":24.44447835286337,"seed":997895004,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[113.33333333333394,-24.44447835286337]]},{"type":"line","version":57,"versionNonce":1120833937,"isDeleted":false,"id":"vmzETrz78gyjo63ccVKcc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12158.531701769123,"y":10982.389182726565,"strokeColor":"#000000","backgroundColor":"transparent","width":138.33335876464844,"height":5,"seed":1615403236,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[138.33335876464844,-5]]},{"type":"line","version":60,"versionNonce":71945215,"isDeleted":false,"id":"nTYb_NqcqaC8Ufbmp-WoM","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12142.69841929842,"y":11019.889182726565,"strokeColor":"#000000","backgroundColor":"transparent","width":151.66664123535156,"height":2.5,"seed":180463460,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[151.66664123535156,2.5]]},{"type":"text","version":99,"versionNonce":386414449,"isDeleted":false,"id":"kFG9Rax2lOFBmoVxc79G3","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5479.642338162359,"y":5641.556205431637,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":43,"seed":812256732,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"ciyOkI3LiaxpUbQ6jFYVL","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"0xffffffff80183000","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"0xffffffff80183000"},{"type":"arrow","version":48,"versionNonce":1716384799,"isDeleted":false,"id":"ciyOkI3LiaxpUbQ6jFYVL","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":6121.8646282014215,"y":5649.978249049008,"strokeColor":"#000000","backgroundColor":"transparent","width":255.55562337239644,"height":6.125037410803088,"seed":156823900,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":{"elementId":"r0UeXAQl7cU_k_8IpJbsx","focus":0.04047207217394971,"gap":14.341861724869887},"endBinding":{"elementId":"kFG9Rax2lOFBmoVxc79G3","focus":-0.08636937943541068,"gap":5.66666666666606},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-255.55562337239644,6.125037410803088]]},{"type":"text","version":65,"versionNonce":1691492689,"isDeleted":false,"id":"pE7yTfknex7VcVBR5OR6V","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5187.420251573818,"y":5643.778495470699,"strokeColor":"#000000","backgroundColor":"transparent","width":254,"height":43,"seed":1979325412,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"6J_jJ_iEpIKX__qCjwftg","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"mem_avail_cv","baseline":35,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"mem_avail_cv"},{"type":"text","version":48,"versionNonce":567810111,"isDeleted":false,"id":"2daB0D7TN4iK6scrz15YE","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5248.531091417566,"y":4810.444958686846,"strokeColor":"#000000","backgroundColor":"transparent","width":401,"height":130,"seed":1293382620,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"nWR_5-r3GEL0a2GsWb0zS","type":"arrow"},{"id":"6J_jJ_iEpIKX__qCjwftg","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"typedef struct {\r\n\twaitq_t wq;\r\n} condvar_t;","baseline":121,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"typedef struct {\r\n\twaitq_t wq;\r\n} condvar_t;"},{"type":"text","version":137,"versionNonce":428068657,"isDeleted":false,"id":"lB5TUBLYCv-wzxON1XuR0","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":4487.420251573818,"y":3148.222770373043,"strokeColor":"#000000","backgroundColor":"transparent","width":2046,"height":910,"seed":2135904092,"groupIds":[],"strokeSharpness":"round","boundElements":[{"id":"nWR_5-r3GEL0a2GsWb0zS","type":"arrow"}],"updated":1741338914518,"link":null,"fontSize":36,"fontFamily":3,"text":"/** Wait queue structure.\r\n *\r\n */\r\ntypedef struct waitq {\r\n\t/** Lock protecting wait queue structure.\r\n\t *\r\n\t * Must be acquired before T.lock for each T of type thread_t.\r\n\t */\r\n\tIRQ_SPINLOCK_DECLARE(lock);\r\n\r\n\t/**\r\n\t * If negative, number of wakeups that are to be ignored (necessary for futex operation).\r\n\t * If positive, number of wakeups that weren't able to wake a thread.\r\n\t */\r\n\tint wakeup_balance;\r\n\r\n\t/** List of sleeping threads for which there was no missed_wakeup. */\r\n\tlist_t sleepers;\r\n\r\n\tbool closed;\r\n} waitq_t;","baseline":901,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"/** Wait queue structure.\r\n *\r\n */\r\ntypedef struct waitq {\r\n\t/** Lock protecting wait queue structure.\r\n\t *\r\n\t * Must be acquired before T.lock for each T of type thread_t.\r\n\t */\r\n\tIRQ_SPINLOCK_DECLARE(lock);\r\n\r\n\t/**\r\n\t * If negative, number of wakeups that are to be ignored (necessary for futex operation).\r\n\t * If positive, number of wakeups that weren't able to wake a thread.\r\n\t */\r\n\tint wakeup_balance;\r\n\r\n\t/** List of sleeping threads for which there was no missed_wakeup. */\r\n\tlist_t sleepers;\r\n\r\n\tbool closed;\r\n} waitq_t;"},{"type":"arrow","version":112,"versionNonce":214480991,"isDeleted":false,"id":"nWR_5-r3GEL0a2GsWb0zS","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5384.423677291614,"y":4794.88953876497,"strokeColor":"#000000","backgroundColor":"transparent","width":221.46829836412599,"height":715.555623372396,"seed":1730330588,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":{"elementId":"2daB0D7TN4iK6scrz15YE","focus":-0.1817929436578365,"gap":15.55541992187591},"endBinding":{"elementId":"lB5TUBLYCv-wzxON1XuR0","focus":0.4251703211729582,"gap":21.111145019530795},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-221.46829836412599,-715.555623372396]]},{"type":"arrow","version":140,"versionNonce":193249553,"isDeleted":false,"id":"6J_jJ_iEpIKX__qCjwftg","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":5257.208925135015,"y":5632.667452176429,"strokeColor":"#000000","backgroundColor":"transparent","width":163.0357636446688,"height":671.1112467447911,"seed":779819492,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":{"elementId":"pE7yTfknex7VcVBR5OR6V","focus":-0.4926043012024697,"gap":11.11104329427053},"endBinding":{"elementId":"2daB0D7TN4iK6scrz15YE","focus":0.03637257399299664,"gap":21.11124674479197},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[163.0357636446688,-671.1112467447911]]},{"type":"arrow","version":573,"versionNonce":1827689599,"isDeleted":false,"id":"OHUWT-LNlshkjkUHj9mgk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"angle":0,"x":12609.921701158775,"y":11161.555213610345,"strokeColor":"#000000","backgroundColor":"transparent","width":4532.92694410136,"height":341.7203676879144,"seed":977384284,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1741338914518,"link":null,"startBinding":null,"endBinding":{"elementId":"q-46u04HorUJkjTMTaSyM","focus":0.7620525909527779,"gap":19.469895040508163},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[4532.92694410136,341.7203676879144]]},{"id":"q-46u04HorUJkjTMTaSyM","type":"text","x":17162.318540300646,"y":11461.056102752686,"width":2357,"height":1683,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":221651295,"version":477,"versionNonce":1481406193,"isDeleted":false,"boundElements":[{"id":"OHUWT-LNlshkjkUHj9mgk","type":"arrow"}],"updated":1741338914518,"link":null,"text":"// AMD64会调用这个函数\n// 低内存初始化。\nvoid frame_low_arch_init(void)\n{\n\tpfn_t minconf;\n\n\tif (config.cpu_active == 1) {\n\t\tminconf = 1;\n\n#ifdef CONFIG_SMP\n\t\t// 如果是多核系统，之前会把内核copy到AP_BOOT_OFFSET上，长度是unmapped_size\n\t\t// 所以需要确定多核心系统需要设置的内核占用内存。。。\n\t\tsize_t unmapped_size =\n\t\t    (uintptr_t) unmapped_end - BOOT_OFFSET;\n\n\t\t// FRAME_WIDTH = 12\n\t\t// ADDR2PFN(addr) = ((addr) >> FRAME_WIDTH)\n\t\tminconf = max(minconf,\n\t\t    ADDR2PFN(AP_BOOT_OFFSET + unmapped_size));\n#endif\n\n\t\t// 如果是多核心系统，minconf指向的是除开AP需要的内存和第一个页帧外第二个页帧号。\n\t\t// 否则，就是第二个页帧号（1）。\n\t\tinit_e820_memory(minconf, true);\n\n\t\t/* Reserve frame 0 (BIOS data) */\n\t\t// 第一个页帧是为BIOS留的。。。\n\t\tframe_mark_unavailable(0, 1);\n\n#ifdef CONFIG_SMP\n\t\t/* Reserve AP real mode bootstrap memory */\n\t\t// 保留 AP 处理器 实模式 启动需要的内存。\n\t\t// Question Here： MultiBoot2启动之后就是保护模式32位？APP处理器由主处理器启动，是否还是需要从实模式Boot？\n\t\tframe_mark_unavailable(AP_BOOT_OFFSET >> FRAME_WIDTH,\n\t\t    unmapped_size >> FRAME_WIDTH);\n#endif\n\t}\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":1674,"containerId":null,"originalText":"// AMD64会调用这个函数\n// 低内存初始化。\nvoid frame_low_arch_init(void)\n{\n\tpfn_t minconf;\n\n\tif (config.cpu_active == 1) {\n\t\tminconf = 1;\n\n#ifdef CONFIG_SMP\n\t\t// 如果是多核系统，之前会把内核copy到AP_BOOT_OFFSET上，长度是unmapped_size\n\t\t// 所以需要确定多核心系统需要设置的内核占用内存。。。\n\t\tsize_t unmapped_size =\n\t\t    (uintptr_t) unmapped_end - BOOT_OFFSET;\n\n\t\t// FRAME_WIDTH = 12\n\t\t// ADDR2PFN(addr) = ((addr) >> FRAME_WIDTH)\n\t\tminconf = max(minconf,\n\t\t    ADDR2PFN(AP_BOOT_OFFSET + unmapped_size));\n#endif\n\n\t\t// 如果是多核心系统，minconf指向的是除开AP需要的内存和第一个页帧外第二个页帧号。\n\t\t// 否则，就是第二个页帧号（1）。\n\t\tinit_e820_memory(minconf, true);\n\n\t\t/* Reserve frame 0 (BIOS data) */\n\t\t// 第一个页帧是为BIOS留的。。。\n\t\tframe_mark_unavailable(0, 1);\n\n#ifdef CONFIG_SMP\n\t\t/* Reserve AP real mode bootstrap memory */\n\t\t// 保留 AP 处理器 实模式 启动需要的内存。\n\t\t// Question Here： MultiBoot2启动之后就是保护模式32位？APP处理器由主处理器启动，是否还是需要从实模式Boot？\n\t\tframe_mark_unavailable(AP_BOOT_OFFSET >> FRAME_WIDTH,\n\t\t    unmapped_size >> FRAME_WIDTH);\n#endif\n\t}\n}"},{"id":"GEi_8rYyVqFVhkyFbLg1K","type":"text","x":20047.32015010289,"y":12451.722726186117,"width":2384,"height":3219,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1011955537,"version":374,"versionNonce":1894460529,"isDeleted":false,"boundElements":[{"id":"9-m7YL41Z-vA1uP0CNhA3","type":"arrow"},{"id":"RkjuVVv4ya7SDBuENHinC","type":"arrow"}],"updated":1741338960871,"link":null,"text":"/*\n* e820 是 x86 架构中用来描述物理内存布局的标准，\n* 它把内存划分为多个块，每个块有基地址、大小和类型。\n* 代码的任务就是遍历这些内存块，根据类型将它们划分到不同的内存区域中。\n * */\nstatic void init_e820_memory(pfn_t minconf, bool low)\n{\n        unsigned int i;\n\n        for (i = 0; i < e820counter; i++) {\n                // 获取到内存块的基地址和长度。\n                uint64_t base64 = e820table[i].base_address;\n                uint64_t size64 = e820table[i].size;\n                uintptr_t base = (uintptr_t) base64;\n                size_t size = (size_t) size64;\n\n                // 根据内核需要的物理内存划分低端内存和高端内存。\n                // 低端内存被内核使用，通常用于存储内核代码、数据结构、设备驱动等。\n                // 高端内存被用户程序使用，通常用于用户空间程序和内核动态分配的内存。\n                // 低内存区域的管理相对简单，因为这些地址可以直接映射到内核的虚拟地址空间。\n                // 高内存区域的管理相对复杂，因为这些地址需要通过页表映射来管理，以支持虚拟内存系统。\n                if (!frame_adjust_zone_bounds(low, &base, &size))\n                        continue;\n\n                // 对于每一块内存，检查其类型，创建一个对应的内存区域结构。\n                if (e820table[i].type == MEMMAP_MEMORY_AVAILABLE) {\n                        /* To be safe, make the available zone possibly smaller */\n                        uint64_t new_base = ALIGN_UP(base, FRAME_SIZE);\n                        uint64_t new_size = ALIGN_DOWN(size - (new_base - base),\n                            FRAME_SIZE);\n\n                        // 将内存大小转换为帧数。\n                        size_t count = SIZE2FRAMES(new_size);\n                        // 内存的起始页帧号。\n                        pfn_t pfn = ADDR2PFN(new_base);\n                        pfn_t conf;\n\n                        if (low) {\n                                // 低内存：对AMD64架构，是0-2GB。\n                                if ((minconf < pfn) || (minconf >= pfn + count))\n                                        conf = pfn;\n                                else\n                                        conf = minconf;\n                                zone_create(pfn, count, conf,\n                                    ZONE_AVAILABLE | ZONE_LOWMEM);\n                        } else {\n                                // 如果是处理高端内存，就从低端内存中分配出来内存存储数据配置帧。\n                                conf = zone_external_conf_alloc(count);\n                                if (conf != 0)\n                                        zone_create(pfn, count, conf,\n                                            ZONE_AVAILABLE | ZONE_HIGHMEM);\n                        }\n                } \n                else if ((e820table[i].type == MEMMAP_MEMORY_ACPI) || (e820table[i].type == MEMMAP_MEMORY_NVS)) {\n                        /* To be safe, make the firmware zone possibly larger */\n                        uint64_t new_base = ALIGN_DOWN(base, FRAME_SIZE);\n                        uint64_t new_size = ALIGN_UP(size + (base - new_base),\n                            FRAME_SIZE);\n\n                        zone_create(ADDR2PFN(new_base), SIZE2FRAMES(new_size), 0,\n                            ZONE_FIRMWARE);\n                } \n                else {\n                        /* To be safe, make the reserved zone possibly larger */\n                        uint64_t new_base = ALIGN_DOWN(base, FRAME_SIZE);\n                        uint64_t new_size = ALIGN_UP(size + (base - new_base),\n                            FRAME_SIZE);\n\n                        zone_create(ADDR2PFN(new_base), SIZE2FRAMES(new_size), 0,\n                            ZONE_RESERVED);\n                }\n        }\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":3211,"containerId":null,"originalText":"/*\n* e820 是 x86 架构中用来描述物理内存布局的标准，\n* 它把内存划分为多个块，每个块有基地址、大小和类型。\n* 代码的任务就是遍历这些内存块，根据类型将它们划分到不同的内存区域中。\n * */\nstatic void init_e820_memory(pfn_t minconf, bool low)\n{\n        unsigned int i;\n\n        for (i = 0; i < e820counter; i++) {\n                // 获取到内存块的基地址和长度。\n                uint64_t base64 = e820table[i].base_address;\n                uint64_t size64 = e820table[i].size;\n                uintptr_t base = (uintptr_t) base64;\n                size_t size = (size_t) size64;\n\n                // 根据内核需要的物理内存划分低端内存和高端内存。\n                // 低端内存被内核使用，通常用于存储内核代码、数据结构、设备驱动等。\n                // 高端内存被用户程序使用，通常用于用户空间程序和内核动态分配的内存。\n                // 低内存区域的管理相对简单，因为这些地址可以直接映射到内核的虚拟地址空间。\n                // 高内存区域的管理相对复杂，因为这些地址需要通过页表映射来管理，以支持虚拟内存系统。\n                if (!frame_adjust_zone_bounds(low, &base, &size))\n                        continue;\n\n                // 对于每一块内存，检查其类型，创建一个对应的内存区域结构。\n                if (e820table[i].type == MEMMAP_MEMORY_AVAILABLE) {\n                        /* To be safe, make the available zone possibly smaller */\n                        uint64_t new_base = ALIGN_UP(base, FRAME_SIZE);\n                        uint64_t new_size = ALIGN_DOWN(size - (new_base - base),\n                            FRAME_SIZE);\n\n                        // 将内存大小转换为帧数。\n                        size_t count = SIZE2FRAMES(new_size);\n                        // 内存的起始页帧号。\n                        pfn_t pfn = ADDR2PFN(new_base);\n                        pfn_t conf;\n\n                        if (low) {\n                                // 低内存：对AMD64架构，是0-2GB。\n                                if ((minconf < pfn) || (minconf >= pfn + count))\n                                        conf = pfn;\n                                else\n                                        conf = minconf;\n                                zone_create(pfn, count, conf,\n                                    ZONE_AVAILABLE | ZONE_LOWMEM);\n                        } else {\n                                // 如果是处理高端内存，就从低端内存中分配出来内存存储数据配置帧。\n                                conf = zone_external_conf_alloc(count);\n                                if (conf != 0)\n                                        zone_create(pfn, count, conf,\n                                            ZONE_AVAILABLE | ZONE_HIGHMEM);\n                        }\n                } \n                else if ((e820table[i].type == MEMMAP_MEMORY_ACPI) || (e820table[i].type == MEMMAP_MEMORY_NVS)) {\n                        /* To be safe, make the firmware zone possibly larger */\n                        uint64_t new_base = ALIGN_DOWN(base, FRAME_SIZE);\n                        uint64_t new_size = ALIGN_UP(size + (base - new_base),\n                            FRAME_SIZE);\n\n                        zone_create(ADDR2PFN(new_base), SIZE2FRAMES(new_size), 0,\n                            ZONE_FIRMWARE);\n                } \n                else {\n                        /* To be safe, make the reserved zone possibly larger */\n                        uint64_t new_base = ALIGN_DOWN(base, FRAME_SIZE);\n                        uint64_t new_size = ALIGN_UP(size + (base - new_base),\n                            FRAME_SIZE);\n\n                        zone_create(ADDR2PFN(new_base), SIZE2FRAMES(new_size), 0,\n                            ZONE_RESERVED);\n                }\n        }\n}"},{"id":"9-m7YL41Z-vA1uP0CNhA3","type":"arrow","x":17878.98633357457,"y":12503.389367421469,"width":2151.666946411133,"height":10.635113011458088,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1671103985,"version":535,"versionNonce":40005841,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[2151.666946411133,-10.635113011458088]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"GEi_8rYyVqFVhkyFbLg1K","focus":0.9746506389586375,"gap":16.6668701171875},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"Be7wRPZlRVOIMFMWW2jSo","type":"text","x":22924.986104692725,"y":13376.778222401937,"width":1624,"height":1040,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":892797745,"version":690,"versionNonce":534151359,"isDeleted":false,"boundElements":[{"id":"-P-a6cdEKDD4vjY5Q5PCo","type":"arrow"},{"id":"9TcRDexWSXbomPgh6M2IG","type":"arrow"}],"updated":1741338914518,"link":null,"text":"bool frame_adjust_zone_bounds(bool low, uintptr_t *basep, size_t *sizep)\n{\n        \n        // limit = 0X8000 0000\n        uintptr_t limit = KA2PA(config.identity_base) + config.identity_size;\n\n        if (low) {\n                if (*basep > limit)\n                        return false;\n\n                if (*basep + *sizep > limit)\n                        *sizep = limit - *basep;\n        } else {\n                if (*basep + *sizep <= limit)\n                        return false;\n\n                if (*basep <= limit) {\n                        *sizep -= limit - *basep;\n                        *basep = limit;\n                }\n        }\n\n        return true;\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":1031,"containerId":null,"originalText":"bool frame_adjust_zone_bounds(bool low, uintptr_t *basep, size_t *sizep)\n{\n        \n        // limit = 0X8000 0000\n        uintptr_t limit = KA2PA(config.identity_base) + config.identity_size;\n\n        if (low) {\n                if (*basep > limit)\n                        return false;\n\n                if (*basep + *sizep > limit)\n                        *sizep = limit - *basep;\n        } else {\n                if (*basep + *sizep <= limit)\n                        return false;\n\n                if (*basep <= limit) {\n                        *sizep -= limit - *basep;\n                        *basep = limit;\n                }\n        }\n\n        return true;\n}"},{"id":"1Q8izNnjcRXiuQ9egxLl8","type":"arrow","x":21113.874705360053,"y":12672.333947499592,"width":431.11124674478924,"height":48.88885498046875,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1810621311,"version":376,"versionNonce":1331572401,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[431.11124674478924,-48.88885498046875]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"o-uknDp-E853nDCY34uX1","focus":0.08745522496742772,"gap":11.11104329426962},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"o-uknDp-E853nDCY34uX1","type":"text","x":21556.09699539911,"y":12598.167280832926,"width":85,"height":43,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1876864465,"version":249,"versionNonce":2145784031,"isDeleted":false,"boundElements":[{"id":"1Q8izNnjcRXiuQ9egxLl8","type":"arrow"}],"updated":1741338914518,"link":null,"text":"true","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":35,"containerId":null,"originalText":"true"},{"id":"-P-a6cdEKDD4vjY5Q5PCo","type":"arrow","x":23684.24768893032,"y":13365.667280832931,"width":19.79566279066421,"height":39.99984741211665,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":256894257,"version":1775,"versionNonce":1709650065,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-19.79566279066421,-39.99984741211665]],"lastCommittedPoint":null,"startBinding":{"elementId":"Be7wRPZlRVOIMFMWW2jSo","focus":0.1981198253045761,"gap":11.110941569007991},"endBinding":{"elementId":"JT43_zZmOkDYcPDYYQ_1G","focus":-0.15042306621269247,"gap":5.611170450845748},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"JT43_zZmOkDYcPDYYQ_1G","type":"text","x":23600.541372026717,"y":13277.056262969967,"width":85,"height":43,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":88429841,"version":523,"versionNonce":869178623,"isDeleted":false,"boundElements":[{"id":"-P-a6cdEKDD4vjY5Q5PCo","type":"arrow"}],"updated":1741338914518,"link":null,"text":"true","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":35,"containerId":null,"originalText":"true"},{"id":"9TcRDexWSXbomPgh6M2IG","type":"arrow","x":21427.208445594428,"y":13412.333947499614,"width":1479.9999999999964,"height":13.72362603730653,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":2029813535,"version":780,"versionNonce":733279857,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[1479.9999999999964,-13.72362603730653]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"Be7wRPZlRVOIMFMWW2jSo","focus":0.9589269341341058,"gap":17.77765909830123},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"KZpZZOyOfo3p4etEzZfVB","type":"arrow","x":20529.430939083995,"y":13685.666823069269,"width":409.999898274742,"height":4.515559178336844,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":743790897,"version":667,"versionNonce":1326490911,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-409.999898274742,4.515559178336844]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"bn5ui8ycuqBBBSgDlChxq","focus":-0.3874618158642777,"gap":20.333384195964754},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"bn5ui8ycuqBBBSgDlChxq","type":"text","x":18686.09765661329,"y":13435.666975657157,"width":1413,"height":867,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":2043319697,"version":490,"versionNonce":1670316113,"isDeleted":false,"boundElements":[{"id":"KZpZZOyOfo3p4etEzZfVB","type":"arrow"}],"updated":1741338914518,"link":null,"text":"#ifdef __ASSEMBLER__\r\n#define ALIGN_DOWN(s, a)  ((s) & ~((a) - 1))\r\n#define ALIGN_UP(s, a)    (((s) + ((a) - 1)) & ~((a) - 1))\r\n#else\r\n\r\n/** Align to the nearest lower address.\r\n *\r\n * @param s Address or size to be aligned.\r\n * @param a Size of alignment, must be a power of 2.\r\n */\r\n#define ALIGN_DOWN(s, a)  ((s) & ~((typeof(s))(a) - 1))\r\n\r\n/** Align to the nearest higher address.\r\n *\r\n * @param s Address or size to be aligned.\r\n * @param a Size of alignment, must be a power of 2.\r\n */\r\n#define ALIGN_UP(s, a)  (((s) + ((a) - 1)) & ~((typeof(s))(a) - 1))\r\n\r\n#endif","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":858,"containerId":null,"originalText":"#ifdef __ASSEMBLER__\r\n#define ALIGN_DOWN(s, a)  ((s) & ~((a) - 1))\r\n#define ALIGN_UP(s, a)    (((s) + ((a) - 1)) & ~((a) - 1))\r\n#else\r\n\r\n/** Align to the nearest lower address.\r\n *\r\n * @param s Address or size to be aligned.\r\n * @param a Size of alignment, must be a power of 2.\r\n */\r\n#define ALIGN_DOWN(s, a)  ((s) & ~((typeof(s))(a) - 1))\r\n\r\n/** Align to the nearest higher address.\r\n *\r\n * @param s Address or size to be aligned.\r\n * @param a Size of alignment, must be a power of 2.\r\n */\r\n#define ALIGN_UP(s, a)  (((s) + ((a) - 1)) & ~((typeof(s))(a) - 1))\r\n\r\n#endif"},{"id":"pRJ9RylNwgxQGdBnOZQH-","type":"arrow","x":21424.986969357447,"y":14425.666517893529,"width":1632.7774047851526,"height":183.35116697011836,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":362265489,"version":882,"versionNonce":555526463,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[1632.7774047851526,183.35116697011836]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"NwNN3pHPXeK7l1XRUqN47","focus":0.883838967363194,"gap":9.999694824222388},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"NrtH2hWtAzJeQEqxY0p1C","type":"arrow","x":21647.209055945987,"y":14667.888706207332,"width":1396.11083984375,"height":39.4801304622797,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":2101450303,"version":882,"versionNonce":189582897,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[1396.11083984375,-39.4801304622797]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"NwNN3pHPXeK7l1XRUqN47","focus":0.9622384758059965,"gap":24.44417317708576},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"NwNN3pHPXeK7l1XRUqN47","type":"text","x":23067.764068966822,"y":14542.33290481573,"width":1814,"height":4471,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1741138897,"version":529,"versionNonce":928196959,"isDeleted":false,"boundElements":[{"id":"pRJ9RylNwgxQGdBnOZQH-","type":"arrow"},{"id":"NrtH2hWtAzJeQEqxY0p1C","type":"arrow"},{"id":"qMPC47hELsyJX6oiBidXP","type":"arrow"},{"id":"xyXd-166uEePOg7mwjUAu","type":"arrow"}],"updated":1741338914518,"link":null,"text":"/** Create and add zone to system.\n *\n * @param start     First frame number (absolute).\n * @param count     Size of zone in frames.\n * @param confframe Where configuration frames are supposed to be.\n *                  Automatically checks that we will not disturb the\n *                  kernel and possibly init. If confframe is given\n *                  _outside_ this zone, it is expected, that the area is\n *                  already marked BUSY and big enough to contain\n *                  zone_conf_size() amount of data. If the confframe is\n *                  inside the area, the zone free frame information is\n *                  modified not to include it.\n *\n * @return Zone number or -1 on error.\n *\n */\nsize_t zone_create(pfn_t start, size_t count, pfn_t confframe,\n    zone_flags_t flags)\n{\n        irq_spinlock_lock(&zones.lock, true);\n\n        if (flags & ZONE_AVAILABLE) {  /* Create available zone */\n                /*\n                 * Theoretically we could have NULL here, practically make sure\n                 * nobody tries to do that. If some platform requires, remove\n                 * the assert\n                 */\n                assert(confframe != ADDR2PFN((uintptr_t) NULL));\n\n                /* Update the known end of physical memory. */\n                config.physmem_end = max(config.physmem_end, PFN2ADDR(start + count));\n\n                /*\n                 * If confframe is supposed to be inside our zone, then make sure\n                 * it does not span kernel & init\n                 */\n                size_t confcount = SIZE2FRAMES(zone_conf_size(count));\n\n                if ((confframe >= start) && (confframe < start + count)) {\n                        for (; confframe < start + count; confframe++) {\n                                uintptr_t addr = PFN2ADDR(confframe);\n                                if (overlaps(addr, PFN2ADDR(confcount),\n                                    KA2PA(config.base), config.kernel_size))\n                                        continue;\n\n                                if (overlaps(addr, PFN2ADDR(confcount),\n                                    KA2PA(ballocs.base), ballocs.size))\n                                        continue;\n\n                                bool overlap = false;\n                                for (size_t i = 0; i < init.cnt; i++) {\n                                        if (overlaps(addr, PFN2ADDR(confcount),\n                                            init.tasks[i].paddr,\n                                            init.tasks[i].size)) {\n                                                overlap = true;\n                                                break;\n                                        }\n                                }\n\n                                if (overlap)\n                                        continue;\n\n                                break;\n                        }\n                        if (confframe >= start + count)\n                                panic(\"Cannot find configuration data for zone.\");\n                }\n\n                size_t znum = zones_insert_zone(start, count, flags);\n                if (znum == (size_t) -1) {\n                        irq_spinlock_unlock(&zones.lock, true);\n                        return (size_t) -1;\n                }\n                void *confdata = (void *) PA2KA(PFN2ADDR(confframe));\n                // Create new frame zone.\n                zone_construct(&zones.info[znum], start, count, flags, confdata);\n\n                /* If confdata in zone, mark as unavailable */\n                // 如果confframe在start到start+count之间，说明confdata需要占用一些帧，\n                // 数量是 confcount。\n                if ((confframe >= start) && (confframe < start + count)) {\n                        for (size_t i = confframe; i < confframe + confcount; i++)\n                                zone_mark_unavailable(&zones.info[znum],\n                                    i - zones.info[znum].base);\n                }\n\n                irq_spinlock_unlock(&zones.lock, true);\n\n                return znum;\n        }\n\n        /* Non-available zone */\n        size_t znum = zones_insert_zone(start, count, flags);\n        if (znum == (size_t) -1) {\n                irq_spinlock_unlock(&zones.lock, true);\n                return (size_t) -1;\n        }\n        zone_construct(&zones.info[znum], start, count, flags, NULL);\n\n        irq_spinlock_unlock(&zones.lock, true);\n\n        return znum;\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":4463,"containerId":null,"originalText":"/** Create and add zone to system.\n *\n * @param start     First frame number (absolute).\n * @param count     Size of zone in frames.\n * @param confframe Where configuration frames are supposed to be.\n *                  Automatically checks that we will not disturb the\n *                  kernel and possibly init. If confframe is given\n *                  _outside_ this zone, it is expected, that the area is\n *                  already marked BUSY and big enough to contain\n *                  zone_conf_size() amount of data. If the confframe is\n *                  inside the area, the zone free frame information is\n *                  modified not to include it.\n *\n * @return Zone number or -1 on error.\n *\n */\nsize_t zone_create(pfn_t start, size_t count, pfn_t confframe,\n    zone_flags_t flags)\n{\n        irq_spinlock_lock(&zones.lock, true);\n\n        if (flags & ZONE_AVAILABLE) {  /* Create available zone */\n                /*\n                 * Theoretically we could have NULL here, practically make sure\n                 * nobody tries to do that. If some platform requires, remove\n                 * the assert\n                 */\n                assert(confframe != ADDR2PFN((uintptr_t) NULL));\n\n                /* Update the known end of physical memory. */\n                config.physmem_end = max(config.physmem_end, PFN2ADDR(start + count));\n\n                /*\n                 * If confframe is supposed to be inside our zone, then make sure\n                 * it does not span kernel & init\n                 */\n                size_t confcount = SIZE2FRAMES(zone_conf_size(count));\n\n                if ((confframe >= start) && (confframe < start + count)) {\n                        for (; confframe < start + count; confframe++) {\n                                uintptr_t addr = PFN2ADDR(confframe);\n                                if (overlaps(addr, PFN2ADDR(confcount),\n                                    KA2PA(config.base), config.kernel_size))\n                                        continue;\n\n                                if (overlaps(addr, PFN2ADDR(confcount),\n                                    KA2PA(ballocs.base), ballocs.size))\n                                        continue;\n\n                                bool overlap = false;\n                                for (size_t i = 0; i < init.cnt; i++) {\n                                        if (overlaps(addr, PFN2ADDR(confcount),\n                                            init.tasks[i].paddr,\n                                            init.tasks[i].size)) {\n                                                overlap = true;\n                                                break;\n                                        }\n                                }\n\n                                if (overlap)\n                                        continue;\n\n                                break;\n                        }\n                        if (confframe >= start + count)\n                                panic(\"Cannot find configuration data for zone.\");\n                }\n\n                size_t znum = zones_insert_zone(start, count, flags);\n                if (znum == (size_t) -1) {\n                        irq_spinlock_unlock(&zones.lock, true);\n                        return (size_t) -1;\n                }\n                void *confdata = (void *) PA2KA(PFN2ADDR(confframe));\n                // Create new frame zone.\n                zone_construct(&zones.info[znum], start, count, flags, confdata);\n\n                /* If confdata in zone, mark as unavailable */\n                // 如果confframe在start到start+count之间，说明confdata需要占用一些帧，\n                // 数量是 confcount。\n                if ((confframe >= start) && (confframe < start + count)) {\n                        for (size_t i = confframe; i < confframe + confcount; i++)\n                                zone_mark_unavailable(&zones.info[znum],\n                                    i - zones.info[znum].base);\n                }\n\n                irq_spinlock_unlock(&zones.lock, true);\n\n                return znum;\n        }\n\n        /* Non-available zone */\n        size_t znum = zones_insert_zone(start, count, flags);\n        if (znum == (size_t) -1) {\n                irq_spinlock_unlock(&zones.lock, true);\n                return (size_t) -1;\n        }\n        zone_construct(&zones.info[znum], start, count, flags, NULL);\n\n        irq_spinlock_unlock(&zones.lock, true);\n\n        return znum;\n}"},{"id":"qMPC47hELsyJX6oiBidXP","type":"arrow","x":21771.65363602411,"y":15087.888706207332,"width":1284.9995930989608,"height":454.4116381148615,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1131676081,"version":791,"versionNonce":2044059665,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[1284.9995930989608,-454.4116381148615]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"NwNN3pHPXeK7l1XRUqN47","focus":0.9658815113800286,"gap":11.11083984375},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"xyXd-166uEePOg7mwjUAu","type":"arrow","x":21771.65363602411,"y":15478.999952952123,"width":1273.8883463541679,"height":805.2157093543628,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1145852607,"version":791,"versionNonce":520398207,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[1273.8883463541679,-805.2157093543628]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"NwNN3pHPXeK7l1XRUqN47","focus":0.9582011628992044,"gap":22.22208658854288},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"1AHAYZCTl6MmPPDC7Hy2E","type":"arrow","x":57.48783402213854,"y":3052.650522841424,"width":570,"height":7.65984805504695,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1493303583,"version":108,"versionNonce":1025619441,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-570,7.65984805504695]],"lastCommittedPoint":null,"startBinding":{"elementId":"qQbB3RLx9oiGDHmcVhcqq","focus":-0.9676054955647072,"gap":17.17857833137714},"endBinding":{"elementId":"77Sn12oqxDqtWrk_eTc15","focus":0.030922588060915638,"gap":10.444452921549555},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"77Sn12oqxDqtWrk_eTc15","type":"text","x":-1536.956618899411,"y":3044.888441721611,"width":1014,"height":43,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1773538481,"version":202,"versionNonce":1735499167,"isDeleted":false,"boundElements":[{"id":"1AHAYZCTl6MmPPDC7Hy2E","type":"arrow"}],"updated":1741338914518,"link":null,"text":"AP_BOOT_OFFSET + umapped - BOOT_OFFSET = 0x14000","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":35,"containerId":null,"originalText":"AP_BOOT_OFFSET + umapped - BOOT_OFFSET = 0x14000"},{"id":"A0yNzTgA21rs3EVrdeOct","type":"arrow","x":17203.432922726555,"y":12242.221991221119,"width":273.3332824707031,"height":110.46841642903019,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":202605695,"version":296,"versionNonce":943181777,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-273.3332824707031,110.46841642903019]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"ialk3ybY2ZjfiKHKgEZTC","focus":0.466445732824283,"gap":15},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"ialk3ybY2ZjfiKHKgEZTC","type":"text","x":16830.099640255852,"y":12336.388708750415,"width":85,"height":43,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1213271313,"version":145,"versionNonce":1674219967,"isDeleted":false,"boundElements":[{"id":"A0yNzTgA21rs3EVrdeOct","type":"arrow"}],"updated":1741338914518,"link":null,"text":"0x14","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":35,"containerId":null,"originalText":"0x14"},{"id":"mNBG8hR7aUGO65bWU3cKH","type":"arrow","x":20712.322133745467,"y":14547.500184377042,"width":611.1110432942696,"height":118.48896949437949,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":2052787857,"version":561,"versionNonce":758120927,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-611.1110432942696,118.48896949437949]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"JQ-YwwvrlBcrFuSdNrl9v","focus":0.13619793531041363,"gap":31.2222900390625},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"JQ-YwwvrlBcrFuSdNrl9v","type":"text","x":18698.988800412135,"y":14589.722474416105,"width":1371,"height":347,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":704187121,"version":294,"versionNonce":2133905297,"isDeleted":false,"boundElements":[{"id":"mNBG8hR7aUGO65bWU3cKH","type":"arrow"}],"updated":1741338914518,"link":null,"text":"/** Allocate external configuration frames from low memory. */\r\npfn_t zone_external_conf_alloc(size_t count)\r\n{\r\n\tsize_t frames = SIZE2FRAMES(zone_conf_size(count));\r\n\r\n\treturn ADDR2PFN((uintptr_t)\r\n\t    frame_alloc(frames, FRAME_LOWMEM | FRAME_ATOMIC, 0));\r\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":338,"containerId":null,"originalText":"/** Allocate external configuration frames from low memory. */\r\npfn_t zone_external_conf_alloc(size_t count)\r\n{\r\n\tsize_t frames = SIZE2FRAMES(zone_conf_size(count));\r\n\r\n\treturn ADDR2PFN((uintptr_t)\r\n\t    frame_alloc(frames, FRAME_LOWMEM | FRAME_ATOMIC, 0));\r\n}"},{"id":"Vvp5RQbYvipThozwFBz4A","type":"arrow","x":19345.100250607473,"y":14760.27832667034,"width":1075.555521647133,"height":220.0315547295213,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1523616287,"version":562,"versionNonce":1689415167,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-1075.555521647133,-220.0315547295213]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"fNoGZ6fo-2CrlGLbXzVj7","focus":-1.0340810661830784,"gap":11.142394573269485},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"fNoGZ6fo-2CrlGLbXzVj7","type":"text","x":16953.989003862684,"y":14551.389166514089,"width":1308,"height":477,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":10048561,"version":334,"versionNonce":1215477105,"isDeleted":false,"boundElements":[{"id":"Vvp5RQbYvipThozwFBz4A","type":"arrow"}],"updated":1741338914518,"link":null,"text":"/** Compute configuration data size for zone.\n *\n * @param count Size of zone in frames.\n *\n * @return Size of zone configuration info (in bytes).\n *\n */\nsize_t zone_conf_size(size_t count)\n{\n        return (count * sizeof(frame_t) + bitmap_size(count));\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":468,"containerId":null,"originalText":"/** Compute configuration data size for zone.\n *\n * @param count Size of zone in frames.\n *\n * @return Size of zone configuration info (in bytes).\n *\n */\nsize_t zone_conf_size(size_t count)\n{\n        return (count * sizeof(frame_t) + bitmap_size(count));\n}"},{"id":"aXg7J2qzv2P0KMHEl5jx5","type":"text","x":16916.48874954953,"y":15266.389471689872,"width":1645,"height":173,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1835715537,"version":314,"versionNonce":894588447,"isDeleted":false,"boundElements":[{"id":"-eSnQQVHkvyZNCRfw33YB","type":"arrow"}],"updated":1741338914518,"link":null,"text":"uintptr_t frame_alloc(size_t count, frame_flags_t flags, uintptr_t constraint)\r\n{\r\n\treturn frame_alloc_generic(count, flags, constraint, NULL);\r\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":165,"containerId":null,"originalText":"uintptr_t frame_alloc(size_t count, frame_flags_t flags, uintptr_t constraint)\r\n{\r\n\treturn frame_alloc_generic(count, flags, constraint, NULL);\r\n}"},{"id":"-eSnQQVHkvyZNCRfw33YB","type":"arrow","x":18918.15561966672,"y":14889.722906748466,"width":355.00030517578125,"height":393.2137682150005,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":280482623,"version":538,"versionNonce":1077731153,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-355.00030517578125,393.2137682150005]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"aXg7J2qzv2P0KMHEl5jx5","focus":0.8450113873755685,"gap":1.66656494140625},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"CzQQn12HnFeMpDpeY42Iv","type":"arrow","x":17364.822146461152,"y":15401.389624277763,"width":3.4214333543168323,"height":228.33328247070312,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":510159999,"version":436,"versionNonce":369113663,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[3.4214333543168323,228.33328247070312]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"vy2FPxWiVnG0e-q-QXY9O","focus":-0.32955811825392295,"gap":13.333282470703125},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"vy2FPxWiVnG0e-q-QXY9O","type":"text","x":16864.822184608125,"y":15643.056189219169,"width":1666,"height":5507,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":795702673,"version":369,"versionNonce":1961282865,"isDeleted":false,"boundElements":[{"id":"CzQQn12HnFeMpDpeY42Iv","type":"arrow"}],"updated":1741338914518,"link":null,"text":"/** Allocate frames of physical memory.\r\n *\r\n * @param count      Number of continuous frames to allocate.\r\n * @param flags      Flags for host zone selection and address processing.\r\n * @param constraint Indication of physical address bits that cannot be\r\n *                   set in the address of the first allocated frame.\r\n * @param pzone      Preferred zone.\r\n *\r\n * @return Physical address of the allocated frame.\r\n *\r\n */\r\nuintptr_t frame_alloc_generic(size_t count, frame_flags_t flags,\r\n    uintptr_t constraint, size_t *pzone)\r\n{\r\n\tassert(count > 0);\r\n\r\n\tsize_t hint = pzone ? (*pzone) : 0;\r\n\tpfn_t frame_constraint = ADDR2PFN(constraint);\r\n\r\n\t/*\r\n\t * If not told otherwise, we must first reserve the memory.\r\n\t */\r\n\tif (!(flags & FRAME_NO_RESERVE))\r\n\t\treserve_force_alloc(count);\r\n\r\nloop:\r\n\tirq_spinlock_lock(&zones.lock, true);\r\n\r\n\t// TODO: Print diagnostic if neither is explicitly specified.\r\n\t// 这里lowmem是用来判断是要从低端内存分配frame还是高端内存分配frame。\r\n\tbool lowmem = (flags & FRAME_LOWMEM) || !(flags & FRAME_HIGHMEM);\r\n\r\n\t/*\r\n\t * First, find suitable frame zone.\r\n\t */\r\n\tsize_t znum = try_find_zone(count, lowmem, frame_constraint, hint);\r\n\r\n\t/*\r\n\t * If no memory, reclaim some slab memory,\r\n\t * if it does not help, reclaim all.\r\n\t */\r\n\tif ((znum == (size_t) -1) && (!(flags & FRAME_NO_RECLAIM))) {\r\n\t\tirq_spinlock_unlock(&zones.lock, true);\r\n\t\tsize_t freed = slab_reclaim(0);\r\n\t\tirq_spinlock_lock(&zones.lock, true);\r\n\r\n\t\tif (freed > 0)\r\n\t\t\tznum = try_find_zone(count, lowmem,\r\n\t\t\t    frame_constraint, hint);\r\n\r\n\t\tif (znum == (size_t) -1) {\r\n\t\t\tirq_spinlock_unlock(&zones.lock, true);\r\n\t\t\tfreed = slab_reclaim(SLAB_RECLAIM_ALL);\r\n\t\t\tirq_spinlock_lock(&zones.lock, true);\r\n\r\n\t\t\tif (freed > 0)\r\n\t\t\t\tznum = try_find_zone(count, lowmem,\r\n\t\t\t\t    frame_constraint, hint);\r\n\t\t}\r\n\t}\r\n\r\n\tif (znum == (size_t) -1) {\r\n\t\tif (flags & FRAME_ATOMIC) {\r\n\t\t\tirq_spinlock_unlock(&zones.lock, true);\r\n\r\n\t\t\tif (!(flags & FRAME_NO_RESERVE))\r\n\t\t\t\treserve_free(count);\r\n\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tsize_t avail = frame_total_free_get_internal();\r\n\r\n\t\tirq_spinlock_unlock(&zones.lock, true);\r\n\r\n\t\tif (!THREAD)\r\n\t\t\tpanic(\"Cannot wait for %zu frames to become available \"\r\n\t\t\t    \"(%zu available).\", count, avail);\r\n\r\n\t\t/*\r\n\t\t * Sleep until some frames are available again.\r\n\t\t */\r\n\r\n#ifdef CONFIG_DEBUG\r\n\t\tlog(LF_OTHER, LVL_DEBUG,\r\n\t\t    \"Thread %\" PRIu64 \" waiting for %zu frames \"\r\n\t\t    \"%zu available.\", THREAD->tid, count, avail);\r\n#endif\r\n\r\n\t\t/*\r\n\t\t * Since the mem_avail_mtx is an active mutex, we need to\r\n\t\t * disable interrupts to prevent deadlock with TLB shootdown.\r\n\t\t */\r\n\t\tipl_t ipl = interrupts_disable();\r\n\t\tmutex_lock(&mem_avail_mtx);\r\n\r\n\t\tif (mem_avail_req > 0)\r\n\t\t\tmem_avail_req = min(mem_avail_req, count);\r\n\t\telse\r\n\t\t\tmem_avail_req = count;\r\n\r\n\t\tsize_t gen = mem_avail_gen;\r\n\r\n\t\twhile (gen == mem_avail_gen)\r\n\t\t\tcondvar_wait(&mem_avail_cv, &mem_avail_mtx);\r\n\r\n\t\tmutex_unlock(&mem_avail_mtx);\r\n\t\tinterrupts_restore(ipl);\r\n\r\n#ifdef CONFIG_DEBUG\r\n\t\tlog(LF_OTHER, LVL_DEBUG, \"Thread %\" PRIu64 \" woken up.\",\r\n\t\t    THREAD->tid);\r\n#endif\r\n\r\n\t\tgoto loop;\r\n\t}\r\n\r\n\tpfn_t pfn = zone_frame_alloc(&zones.info[znum], count,\r\n\t    frame_constraint) + zones.info[znum].base;\r\n\r\n\tirq_spinlock_unlock(&zones.lock, true);\r\n\r\n\tif (pzone)\r\n\t\t*pzone = znum;\r\n\r\n\treturn PFN2ADDR(pfn);\r\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":5499,"containerId":null,"originalText":"/** Allocate frames of physical memory.\r\n *\r\n * @param count      Number of continuous frames to allocate.\r\n * @param flags      Flags for host zone selection and address processing.\r\n * @param constraint Indication of physical address bits that cannot be\r\n *                   set in the address of the first allocated frame.\r\n * @param pzone      Preferred zone.\r\n *\r\n * @return Physical address of the allocated frame.\r\n *\r\n */\r\nuintptr_t frame_alloc_generic(size_t count, frame_flags_t flags,\r\n    uintptr_t constraint, size_t *pzone)\r\n{\r\n\tassert(count > 0);\r\n\r\n\tsize_t hint = pzone ? (*pzone) : 0;\r\n\tpfn_t frame_constraint = ADDR2PFN(constraint);\r\n\r\n\t/*\r\n\t * If not told otherwise, we must first reserve the memory.\r\n\t */\r\n\tif (!(flags & FRAME_NO_RESERVE))\r\n\t\treserve_force_alloc(count);\r\n\r\nloop:\r\n\tirq_spinlock_lock(&zones.lock, true);\r\n\r\n\t// TODO: Print diagnostic if neither is explicitly specified.\r\n\t// 这里lowmem是用来判断是要从低端内存分配frame还是高端内存分配frame。\r\n\tbool lowmem = (flags & FRAME_LOWMEM) || !(flags & FRAME_HIGHMEM);\r\n\r\n\t/*\r\n\t * First, find suitable frame zone.\r\n\t */\r\n\tsize_t znum = try_find_zone(count, lowmem, frame_constraint, hint);\r\n\r\n\t/*\r\n\t * If no memory, reclaim some slab memory,\r\n\t * if it does not help, reclaim all.\r\n\t */\r\n\tif ((znum == (size_t) -1) && (!(flags & FRAME_NO_RECLAIM))) {\r\n\t\tirq_spinlock_unlock(&zones.lock, true);\r\n\t\tsize_t freed = slab_reclaim(0);\r\n\t\tirq_spinlock_lock(&zones.lock, true);\r\n\r\n\t\tif (freed > 0)\r\n\t\t\tznum = try_find_zone(count, lowmem,\r\n\t\t\t    frame_constraint, hint);\r\n\r\n\t\tif (znum == (size_t) -1) {\r\n\t\t\tirq_spinlock_unlock(&zones.lock, true);\r\n\t\t\tfreed = slab_reclaim(SLAB_RECLAIM_ALL);\r\n\t\t\tirq_spinlock_lock(&zones.lock, true);\r\n\r\n\t\t\tif (freed > 0)\r\n\t\t\t\tznum = try_find_zone(count, lowmem,\r\n\t\t\t\t    frame_constraint, hint);\r\n\t\t}\r\n\t}\r\n\r\n\tif (znum == (size_t) -1) {\r\n\t\tif (flags & FRAME_ATOMIC) {\r\n\t\t\tirq_spinlock_unlock(&zones.lock, true);\r\n\r\n\t\t\tif (!(flags & FRAME_NO_RESERVE))\r\n\t\t\t\treserve_free(count);\r\n\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tsize_t avail = frame_total_free_get_internal();\r\n\r\n\t\tirq_spinlock_unlock(&zones.lock, true);\r\n\r\n\t\tif (!THREAD)\r\n\t\t\tpanic(\"Cannot wait for %zu frames to become available \"\r\n\t\t\t    \"(%zu available).\", count, avail);\r\n\r\n\t\t/*\r\n\t\t * Sleep until some frames are available again.\r\n\t\t */\r\n\r\n#ifdef CONFIG_DEBUG\r\n\t\tlog(LF_OTHER, LVL_DEBUG,\r\n\t\t    \"Thread %\" PRIu64 \" waiting for %zu frames \"\r\n\t\t    \"%zu available.\", THREAD->tid, count, avail);\r\n#endif\r\n\r\n\t\t/*\r\n\t\t * Since the mem_avail_mtx is an active mutex, we need to\r\n\t\t * disable interrupts to prevent deadlock with TLB shootdown.\r\n\t\t */\r\n\t\tipl_t ipl = interrupts_disable();\r\n\t\tmutex_lock(&mem_avail_mtx);\r\n\r\n\t\tif (mem_avail_req > 0)\r\n\t\t\tmem_avail_req = min(mem_avail_req, count);\r\n\t\telse\r\n\t\t\tmem_avail_req = count;\r\n\r\n\t\tsize_t gen = mem_avail_gen;\r\n\r\n\t\twhile (gen == mem_avail_gen)\r\n\t\t\tcondvar_wait(&mem_avail_cv, &mem_avail_mtx);\r\n\r\n\t\tmutex_unlock(&mem_avail_mtx);\r\n\t\tinterrupts_restore(ipl);\r\n\r\n#ifdef CONFIG_DEBUG\r\n\t\tlog(LF_OTHER, LVL_DEBUG, \"Thread %\" PRIu64 \" woken up.\",\r\n\t\t    THREAD->tid);\r\n#endif\r\n\r\n\t\tgoto loop;\r\n\t}\r\n\r\n\tpfn_t pfn = zone_frame_alloc(&zones.info[znum], count,\r\n\t    frame_constraint) + zones.info[znum].base;\r\n\r\n\tirq_spinlock_unlock(&zones.lock, true);\r\n\r\n\tif (pzone)\r\n\t\t*pzone = znum;\r\n\r\n\treturn PFN2ADDR(pfn);\r\n}"},{"id":"R1VHu5OxiL7x_Ih6VI629","type":"text","x":20663.04493241086,"y":21281.89014307659,"width":1582,"height":1820,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1437287711,"version":473,"versionNonce":1806359825,"isDeleted":false,"boundElements":[{"id":"oYIf06lWN7Nhekqy3tSIG","type":"arrow"}],"updated":1741338990337,"link":null,"text":"/** Allocate frame in particular zone.\r\n *\r\n * Assume zone is locked and is available for allocation.\r\n * Panics if allocation is impossible.\r\n *\r\n * @param zone       Zone to allocate from.\r\n * @param count      Number of frames to allocate\r\n * @param constraint Indication of bits that cannot be set in the\r\n *                   physical frame number of the first allocated frame.\r\n *\r\n * @return Frame index in zone.\r\n *\r\n */\r\n_NO_TRACE static size_t zone_frame_alloc(zone_t *zone, size_t count,\r\n    pfn_t constraint)\r\n{\r\n\tassert(zone->flags & ZONE_AVAILABLE);\r\n\tassert(zone->free_count >= count);\r\n\r\n\t/* Allocate frames from zone */\r\n\tsize_t index = (size_t) -1;\r\n\tint avail = bitmap_allocate_range(&zone->bitmap, count, zone->base,\r\n\t    FRAME_LOWPRIO, constraint, &index);\r\n\r\n\t(void) avail;\r\n\tassert(avail);\r\n\tassert(index != (size_t) -1);\r\n\r\n\t/* Update frame reference count */\r\n\tfor (size_t i = 0; i < count; i++) {\r\n\t\tframe_t *frame = zone_get_frame(zone, index + i);\r\n\r\n\t\tassert(frame->refcount == 0);\r\n\t\tframe->refcount = 1;\r\n\t}\r\n\r\n\t/* Update zone information. */\r\n\tzone->free_count -= count;\r\n\tzone->busy_count += count;\r\n\r\n\treturn index;\r\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":1811,"containerId":null,"originalText":"/** Allocate frame in particular zone.\r\n *\r\n * Assume zone is locked and is available for allocation.\r\n * Panics if allocation is impossible.\r\n *\r\n * @param zone       Zone to allocate from.\r\n * @param count      Number of frames to allocate\r\n * @param constraint Indication of bits that cannot be set in the\r\n *                   physical frame number of the first allocated frame.\r\n *\r\n * @return Frame index in zone.\r\n *\r\n */\r\n_NO_TRACE static size_t zone_frame_alloc(zone_t *zone, size_t count,\r\n    pfn_t constraint)\r\n{\r\n\tassert(zone->flags & ZONE_AVAILABLE);\r\n\tassert(zone->free_count >= count);\r\n\r\n\t/* Allocate frames from zone */\r\n\tsize_t index = (size_t) -1;\r\n\tint avail = bitmap_allocate_range(&zone->bitmap, count, zone->base,\r\n\t    FRAME_LOWPRIO, constraint, &index);\r\n\r\n\t(void) avail;\r\n\tassert(avail);\r\n\tassert(index != (size_t) -1);\r\n\r\n\t/* Update frame reference count */\r\n\tfor (size_t i = 0; i < count; i++) {\r\n\t\tframe_t *frame = zone_get_frame(zone, index + i);\r\n\r\n\t\tassert(frame->refcount == 0);\r\n\t\tframe->refcount = 1;\r\n\t}\r\n\r\n\t/* Update zone information. */\r\n\tzone->free_count -= count;\r\n\tzone->busy_count += count;\r\n\r\n\treturn index;\r\n}"},{"id":"oYIf06lWN7Nhekqy3tSIG","type":"arrow","x":16831.488978431367,"y":20782.501176198333,"width":3814.3723360342883,"height":1875.0635043828624,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1350001855,"version":935,"versionNonce":516552831,"isDeleted":false,"boundElements":null,"updated":1741338990337,"link":null,"points":[[0,0],[3814.3723360342883,1875.0635043828624]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"R1VHu5OxiL7x_Ih6VI629","focus":-0.6644091404936685,"gap":17.183617945203878},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"zpBx8JHwpZKFRr1IjEJKE","type":"arrow","x":17204.10208674848,"y":12675.16661707564,"width":199.3333740234375,"height":29.57371083104954,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1296306847,"version":348,"versionNonce":720893567,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-199.3333740234375,29.57371083104954]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"h5NHV6yg_YCpDsIky4s0G","focus":-0.27407547095350815,"gap":18},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"h5NHV6yg_YCpDsIky4s0G","type":"text","x":15636.768712725043,"y":12567.500052134234,"width":1350,"height":737,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1291758577,"version":328,"versionNonce":428340465,"isDeleted":false,"boundElements":[{"id":"zpBx8JHwpZKFRr1IjEJKE","type":"arrow"},{"id":"1uaT_3dESEHL-M63MWm5I","type":"arrow"}],"updated":1741338914518,"link":null,"text":"/** Mark given range unavailable in frame zones.\n *\n */\n_NO_TRACE void frame_mark_unavailable(pfn_t start, size_t count)\n{\n        irq_spinlock_lock(&zones.lock, true);\n\n        for (size_t i = 0; i < count; i++) {\n                size_t znum = find_zone(start + i, 1, 0);\n                if (znum == (size_t) -1)  /* PFN not found */\n                        continue;\n                zone_mark_unavailable(&zones.info[znum],\n                    start + i - zones.info[znum].base);\n        }\n\n        irq_spinlock_unlock(&zones.lock, true);\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":728,"containerId":null,"originalText":"/** Mark given range unavailable in frame zones.\n *\n */\n_NO_TRACE void frame_mark_unavailable(pfn_t start, size_t count)\n{\n        irq_spinlock_lock(&zones.lock, true);\n\n        for (size_t i = 0; i < count; i++) {\n                size_t znum = find_zone(start + i, 1, 0);\n                if (znum == (size_t) -1)  /* PFN not found */\n                        continue;\n                zone_mark_unavailable(&zones.info[znum],\n                    start + i - zones.info[znum].base);\n        }\n\n        irq_spinlock_unlock(&zones.lock, true);\n}"},{"id":"ETkCpT9zWdqQPD8Yq3HDH","type":"text","x":15554.935300554633,"y":13514.833182017046,"width":1498,"height":823,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":90230417,"version":253,"versionNonce":450023071,"isDeleted":false,"boundElements":[{"id":"CP5nL4MZcSUyZMKUhl_LO","type":"arrow"}],"updated":1741338914518,"link":null,"text":"/** Mark frame in zone unavailable to allocation. */\r\n_NO_TRACE static void zone_mark_unavailable(zone_t *zone, size_t index)\r\n{\r\n\tassert(zone->flags & ZONE_AVAILABLE);\r\n\r\n\tframe_t *frame = zone_get_frame(zone, index);\r\n\tassert(frame->refcount <= 1);\r\n\r\n\tif (frame->refcount > 0)\r\n\t\treturn;\r\n\r\n\tassert(zone->free_count > 0);\r\n\r\n\tframe->refcount = 1;\r\n\tbitmap_set_range(&zone->bitmap, index, 1);\r\n\r\n\tzone->free_count--;\r\n\treserve_force_alloc(1);\r\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":815,"containerId":null,"originalText":"/** Mark frame in zone unavailable to allocation. */\r\n_NO_TRACE static void zone_mark_unavailable(zone_t *zone, size_t index)\r\n{\r\n\tassert(zone->flags & ZONE_AVAILABLE);\r\n\r\n\tframe_t *frame = zone_get_frame(zone, index);\r\n\tassert(frame->refcount <= 1);\r\n\r\n\tif (frame->refcount > 0)\r\n\t\treturn;\r\n\r\n\tassert(zone->free_count > 0);\r\n\r\n\tframe->refcount = 1;\r\n\tbitmap_set_range(&zone->bitmap, index, 1);\r\n\r\n\tzone->free_count--;\r\n\treserve_force_alloc(1);\r\n}"},{"id":"CP5nL4MZcSUyZMKUhl_LO","type":"arrow","x":15941.602140154242,"y":13098.49994532271,"width":305.6576537026194,"height":402.33335876464844,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1615580913,"version":460,"versionNonce":1266560721,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-305.6576537026194,402.33335876464844]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"ETkCpT9zWdqQPD8Yq3HDH","focus":-0.9337115029445967,"gap":13.9998779296875},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"be8r5BAK1jdOPbIMyIrjo","type":"arrow","x":16547.269640968047,"y":13598.278382619268,"width":1360.0002441406232,"height":311.2356266576935,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1424453329,"version":538,"versionNonce":1440588479,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-1360.0002441406232,-311.2356266576935]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"D0nsf5xglKlumdG44Jd3X","focus":-0.9171792199065172,"gap":26},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"D0nsf5xglKlumdG44Jd3X","type":"text","x":13585.269396827422,"y":13212.944947560674,"width":1576,"height":1285,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":404271857,"version":593,"versionNonce":978463921,"isDeleted":false,"boundElements":[{"id":"be8r5BAK1jdOPbIMyIrjo","type":"arrow"}],"updated":1741338914518,"link":null,"text":"typedef struct {\r\n\t// 该区域中第一个帧的帧号（pfn_t）\r\n\t/** Frame_no of the first frame in the frames array */\r\n\tpfn_t base;\r\n\r\n\t// 该区域的大小，即该区域中帧的总数。\r\n\t/** Size of zone */\r\n\tsize_t count;\r\n\r\n\t// 该区域中空闲帧的数量\r\n\t/** Number of free frame_t structures */\r\n\tsize_t free_count;\r\n\r\n\t// 该区域中已使用帧的数量\r\n\t/** Number of busy frame_t structures */\r\n\tsize_t busy_count;\r\n\r\n\t// 该区域的类型标志，用于标识区域的属性（如内存类型、用途等）\r\n\t/** Type of the zone */\r\n\tzone_flags_t flags;\r\n\r\n\t// 位图，用于快速检查帧的使用状态。每个位对应一个帧，0 表示空闲，1 表示已使用\r\n\t/** Frame bitmap */\r\n\tbitmap_t bitmap;\r\n\r\n\t// 该区域中所有帧的数组，每个帧用 frame_t 结构体表示\r\n\t/** Array of frame_t structures in this zone */\r\n\tframe_t *frames;\r\n} zone_t;","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":1276,"containerId":null,"originalText":"typedef struct {\r\n\t// 该区域中第一个帧的帧号（pfn_t）\r\n\t/** Frame_no of the first frame in the frames array */\r\n\tpfn_t base;\r\n\r\n\t// 该区域的大小，即该区域中帧的总数。\r\n\t/** Size of zone */\r\n\tsize_t count;\r\n\r\n\t// 该区域中空闲帧的数量\r\n\t/** Number of free frame_t structures */\r\n\tsize_t free_count;\r\n\r\n\t// 该区域中已使用帧的数量\r\n\t/** Number of busy frame_t structures */\r\n\tsize_t busy_count;\r\n\r\n\t// 该区域的类型标志，用于标识区域的属性（如内存类型、用途等）\r\n\t/** Type of the zone */\r\n\tzone_flags_t flags;\r\n\r\n\t// 位图，用于快速检查帧的使用状态。每个位对应一个帧，0 表示空闲，1 表示已使用\r\n\t/** Frame bitmap */\r\n\tbitmap_t bitmap;\r\n\r\n\t// 该区域中所有帧的数组，每个帧用 frame_t 结构体表示\r\n\t/** Array of frame_t structures in this zone */\r\n\tframe_t *frames;\r\n} zone_t;"},{"id":"L_4MaPhagcOeg8ebKSD53","type":"text","x":13668.602648780547,"y":14760.2781995138,"width":1540,"height":268,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1706082673,"version":146,"versionNonce":1824060127,"isDeleted":false,"boundElements":[{"id":"wbKgF3oLlPLDEE3UIiuPB","type":"arrow"}],"updated":1741338914518,"link":null,"text":"typedef struct {\r\n\t// 引用计数\r\n\tsize_t refcount;  /**< Tracking of shared frames */\r\n\t// 如果该帧是由 slab 分配的，这个指针指向 slab 的父结构体。\r\n\tvoid *parent;     /**< If allocated by slab, this points there */\r\n} frame_t;","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":259,"containerId":null,"originalText":"typedef struct {\r\n\t// 引用计数\r\n\tsize_t refcount;  /**< Tracking of shared frames */\r\n\t// 如果该帧是由 slab 分配的，这个指针指向 slab 的父结构体。\r\n\tvoid *parent;     /**< If allocated by slab, this points there */\r\n} frame_t;"},{"id":"wbKgF3oLlPLDEE3UIiuPB","type":"arrow","x":15577.936022803984,"y":13756.944947560674,"width":413.9015203230265,"height":984,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":115632863,"version":259,"versionNonce":229338769,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-413.9015203230265,984]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"L_4MaPhagcOeg8ebKSD53","focus":0.799810408410196,"gap":19.333251953125},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"L-5htP2VFoHRQdjIpwagu","type":"arrow","x":15567.935961768828,"y":14276.111741383917,"width":279.9906303527623,"height":846.3734235643096,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1158097073,"version":262,"versionNonce":133512959,"isDeleted":false,"boundElements":null,"updated":1741338914518,"link":null,"points":[[0,0],[-279.9906303527623,846.3734235643096]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"X1J43nsR18MIlk-PxHXOB","focus":0.7425412354819161,"gap":27.333282470703125},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"X1J43nsR18MIlk-PxHXOB","type":"text","x":13604.602526710234,"y":15143.611817677862,"width":1666,"height":780,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1812727359,"version":164,"versionNonce":205616241,"isDeleted":false,"boundElements":[{"id":"L-5htP2VFoHRQdjIpwagu","type":"arrow"}],"updated":1741338914518,"link":null,"text":"/** Reserve memory.\r\n *\r\n * This function simply marks the respective amount of memory frames reserved.\r\n * It does not implement any sort of blocking for the case there is not enough\r\n * reservable memory. It will simply take the reserve into negative numbers and\r\n * leave the blocking up to the allocation phase.\r\n *\r\n * @param size\t\tNumber of frames to reserve.\r\n */\r\nvoid reserve_force_alloc(size_t size)\r\n{\r\n\tif (!reserve_initialized)\r\n\t\treturn;\r\n\r\n\tirq_spinlock_lock(&reserve_lock, true);\r\n\treserve -= size;\r\n\tirq_spinlock_unlock(&reserve_lock, true);\r\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":771,"containerId":null,"originalText":"/** Reserve memory.\r\n *\r\n * This function simply marks the respective amount of memory frames reserved.\r\n * It does not implement any sort of blocking for the case there is not enough\r\n * reservable memory. It will simply take the reserve into negative numbers and\r\n * leave the blocking up to the allocation phase.\r\n *\r\n * @param size\t\tNumber of frames to reserve.\r\n */\r\nvoid reserve_force_alloc(size_t size)\r\n{\r\n\tif (!reserve_initialized)\r\n\t\treturn;\r\n\r\n\tirq_spinlock_lock(&reserve_lock, true);\r\n\treserve -= size;\r\n\tirq_spinlock_unlock(&reserve_lock, true);\r\n}"},{"id":"1uaT_3dESEHL-M63MWm5I","type":"arrow","x":17188.49122910282,"y":12940.833929697708,"width":193.33328247070312,"height":216.84348086776117,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1885360881,"version":198,"versionNonce":1779631903,"isDeleted":false,"boundElements":null,"updated":1741338914519,"link":null,"points":[[0,0],[-193.33328247070312,-216.84348086776117]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"h5NHV6yg_YCpDsIky4s0G","focus":-0.8693290599894612,"gap":8.389233907073503},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"4wmLsTtnDt2lj58yRvVBb","type":"arrow","x":13285.991498674764,"y":11384.779048919709,"width":696.6668090820331,"height":50.48357692998616,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":531765631,"version":132,"versionNonce":970702417,"isDeleted":false,"boundElements":null,"updated":1741338914519,"link":null,"points":[[0,0],[696.6668090820331,50.48357692998616]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"q1zwy_5uh6nrddIziDXxR","focus":-0.7531958268049459,"gap":6.889485677082121},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"q1zwy_5uh6nrddIziDXxR","type":"text","x":13989.547793433878,"y":11402.001730601023,"width":832,"height":47,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":657101617,"version":95,"versionNonce":830655295,"isDeleted":false,"boundElements":[{"id":"4wmLsTtnDt2lj58yRvVBb","type":"arrow"}],"updated":1741338914519,"link":null,"text":"0x108000 ；0xA3000 -> 0xA3 到 kdata_end ","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":38,"containerId":null,"originalText":"0x108000 ；0xA3000 -> 0xA3 到 kdata_end "},{"id":"Uis5jsYTDofjeZrqiDrCi","type":"arrow","x":12617.490506853483,"y":12147.056207021102,"width":4503.333511352539,"height":954.01465972609,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1451957777,"version":514,"versionNonce":1135579089,"isDeleted":false,"boundElements":null,"updated":1741338954529,"link":null,"points":[[0,0],[4503.333511352539,-954.01465972609]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"tE9knlC42Hr_lkri2Lj5s","focus":0.6087811858352863,"gap":24.16656494140625},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"tE9knlC42Hr_lkri2Lj5s","type":"text","x":17144.990583147428,"y":11107.88941319786,"width":907,"height":217,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":135062591,"version":459,"versionNonce":400416159,"isDeleted":false,"boundElements":[{"id":"Uis5jsYTDofjeZrqiDrCi","type":"arrow"}],"updated":1741338954529,"link":null,"text":"void frame_high_arch_init(void)\r\n{\r\n\tif (config.cpu_active == 1)\r\n\t\tinit_e820_memory(0, false);\r\n}","fontSize":36,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":208,"containerId":null,"originalText":"void frame_high_arch_init(void)\r\n{\r\n\tif (config.cpu_active == 1)\r\n\t\tinit_e820_memory(0, false);\r\n}"},{"id":"RkjuVVv4ya7SDBuENHinC","type":"arrow","x":17772.490277971647,"y":11268.722848256453,"width":2378.333511352539,"height":1161.6667175292969,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1603027423,"version":147,"versionNonce":1107035903,"isDeleted":false,"boundElements":null,"updated":1741338960871,"link":null,"points":[[0,0],[2378.333511352539,1161.6667175292969]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"GEi_8rYyVqFVhkyFbLg1K","focus":0.5015113097623636,"gap":21.333160400366978},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"EV91yN3EfqoD3DvRcQhN8","type":"arrow","x":12241.657427833292,"y":12260.66747919722,"width":300,"height":5900.000305175779,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":0,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":1572918111,"version":180,"versionNonce":187080945,"isDeleted":false,"boundElements":null,"updated":1741338986912,"link":null,"points":[[0,0],[-300,5900.000305175779]],"lastCommittedPoint":null,"startBinding":{"elementId":"ucOQSWTQPIqTTOAfdcUON","focus":0.48045363453980505,"gap":4.777912139923501},"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow"}],"appState":{"gridSize":null,"viewBackgroundColor":"#ffffff"},"files":{}}